<script>document.write(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+VGhlIEJyaWRnZSBNYXN0ZXIncyBIYW5kYm9vayAtIEEgU1RFTSBBZHZlbnR1cmU8L3RpdGxlPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLnRhaWx3aW5kY3NzLmNvbSI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0PgogICAgICAgIHRhaWx3aW5kLmNvbmZpZyA9IHsKICAgICAgICAgICAgdGhlbWU6IHsKICAgICAgICAgICAgICAgIGV4dGVuZDogewogICAgICAgICAgICAgICAgICAgIGNvbG9yczogewogICAgICAgICAgICAgICAgICAgICAgICAnZ3JlZW4tcHJpbWFyeSc6ICcjMjk4MGI5JywgLyogQ2hhbmdlZCB0byBCbHVlIGZvciBFbmdpbmVlcmluZyB0aGVtZSAqLwogICAgICAgICAgICAgICAgICAgICAgICAnZ3JlZW4tc2Vjb25kYXJ5JzogJyMzNDk4ZGInLAogICAgICAgICAgICAgICAgICAgICAgICAnZ3JlZW4tbGlnaHQnOiAnI2YwZjhmZicsCiAgICAgICAgICAgICAgICAgICAgICAgICdicmFuZC1kYXJrJzogJyMyYzNlNTAnLAogICAgICAgICAgICAgICAgICAgICAgICAncGFwZXInOiAnI2ZkZmJmNycsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNhbnM6IFsnU2Vnb2UgVUknLCAnVGFob21hJywgJ0dlbmV2YScsICdWZXJkYW5hJywgJ3NhbnMtc2VyaWYnXSwKICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWY6IFsnR2VvcmdpYScsICdDYW1icmlhJywgJ1RpbWVzIE5ldyBSb21hbicsICdUaW1lcycsICdzZXJpZiddLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgYm94U2hhZG93OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICdib29rJzogJzAgMjBweCAzMHB4IC0xMHB4IHJnYmEoMCwgMCwgMCwgMC4zKSwgMCAwIDEwcHggcmdiYSgwLDAsMCwwLjEpJywKICAgICAgICAgICAgICAgICAgICAgICAgJ3BhZ2UnOiAnaW5zZXQgMCAwIDMwcHggcmdiYSgwLDAsMCwwLjA1KScsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKIC8vIERpc2FibGUgcmlnaHQtY2xpY2sKICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGV2ZW50ID0+IGV2ZW50LnByZXZlbnREZWZhdWx0KCkpOwoKICAvLyBEaXNhYmxlIEYxMiwgQ3RybCtTaGlmdCtJLCBDdHJsK1UKICBkb2N1bWVudC5vbmtleWRvd24gPSBmdW5jdGlvbihlKSB7CiAgICBpZihldmVudC5rZXlDb2RlID09IDEyMykgcmV0dXJuIGZhbHNlOwogICAgaWYoZS5jdHJsS2V5ICYmIGUuc2hpZnRLZXkgJiYgZS5rZXlDb2RlID09ICdJJy5jaGFyQ29kZUF0KDApKSByZXR1cm4gZmFsc2U7CiAgICBpZihlLmN0cmxLZXkgJiYgZS5rZXlDb2RlID09ICdVJy5jaGFyQ29kZUF0KDApKSByZXR1cm4gZmFsc2U7CiAgfTsKCiAgICA8L3NjcmlwdD4KICAgIDxzdHlsZT4KICAgICAgICBib2R5IHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsKICAgICAgICAgICAgLyogYmFja2dyb3VuZC1pbWFnZTogcmFkaWFsLWdyYWRpZW50KCMzNDQ5NWUgMXB4LCB0cmFuc3BhcmVudCAxcHgpOwogICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IDIwcHggMjBweDsgKi8KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmJvb2stY29udGFpbmVyIHsKICAgICAgICAgICAgcGVyc3BlY3RpdmU6IDE1MDBweDsKICAgICAgICB9CgogICAgICAgIC5ib29rLXBhZ2UgewogICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC44cyBjdWJpYy1iZXppZXIoMC42NDUsIDAuMDQ1LCAwLjM1NSwgMSk7CiAgICAgICAgICAgIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7CiAgICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IGxlZnQgY2VudGVyOwogICAgICAgIH0KCiAgICAgICAgLnBhZ2UtY29udGVudCB7CiAgICAgICAgICAgIGJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjsKICAgICAgICB9CgogICAgICAgIC8qIFNpbXVsYXRpb24gQ2FudmFzIFN0eWxlcyAqLwogICAgICAgIGNhbnZhcyB7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDAuNXJlbTsKICAgICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgIH0KCiAgICAgICAgLnNpbS1jb250cm9sLXBhbmVsIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2YwZjhmZjsKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzM0OThkYjsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC41cmVtOwogICAgICAgICAgICBwYWRkaW5nOiAxcmVtOwogICAgICAgICAgICBtYXJnaW4tdG9wOiAxcmVtOwogICAgICAgIH0KCiAgICAgICAgLyogQ3VzdG9tIFJhbmdlIFNsaWRlciAqLwogICAgICAgIGlucHV0W3R5cGU9cmFuZ2VdIHsKICAgICAgICAgICAgaGVpZ2h0OiA2cHg7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNlMmU4ZjA7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDsKICAgICAgICAgICAgb3V0bGluZTogbm9uZTsKICAgICAgICB9CiAgICAgICAgaW5wdXRbdHlwZT1yYW5nZV06Oi13ZWJraXQtc2xpZGVyLXRodW1iIHsKICAgICAgICAgICAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lOwogICAgICAgICAgICBhcHBlYXJhbmNlOiBub25lOwogICAgICAgICAgICB3aWR0aDogMThweDsKICAgICAgICAgICAgaGVpZ2h0OiAxOHB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICMyOTgwYjk7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5IGNsYXNzPSJoLXNjcmVlbiBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBvdmVyZmxvdy1oaWRkZW4iPgoKICAgIDxkaXYgY2xhc3M9ImJvb2stY29udGFpbmVyIHctZnVsbCBtYXgtdy01eGwgaC1bOTB2aF0gcmVsYXRpdmUgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIiPgogICAgICAgIAogICAgICAgIAogICAgICAgIDxkaXYgY2xhc3M9ImFic29sdXRlIGluc2V0LTAgYmctYnJhbmQtZGFyayByb3VuZGVkLXItMnhsIHNoYWRvdy0yeGwgdHJhbnNmb3JtIHRyYW5zbGF0ZS14LTIgdHJhbnNsYXRlLXktMiI+PC9kaXY+CgogICAgICAgIAogICAgICAgIDxkaXYgaWQ9ImJvb2stcGFnZSIgY2xhc3M9ImJvb2stcGFnZSByZWxhdGl2ZSB3LWZ1bGwgaC1mdWxsIGJnLXBhcGVyIHJvdW5kZWQtci14bCBzaGFkb3ctYm9vayBmbGV4IGZsZXgtY29sIG1kOmZsZXgtcm93IG92ZXJmbG93LWhpZGRlbiBib3JkZXItbC04IGJvcmRlci1ncmF5LTIwMCI+CiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0idy1mdWxsIG1kOnctMS8zIHAtOCBtZDpwLTEyIGZsZXggZmxleC1jb2wganVzdGlmeS1jZW50ZXIgYm9yZGVyLXIgYm9yZGVyLWdyYXktMTAwIGJnLXdoaXRlIHJlbGF0aXZlIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFic29sdXRlIHRvcC0wIGxlZnQtMCB3LWZ1bGwgaC0yIGJnLWdyYWRpZW50LXRvLXIgZnJvbS1ncmVlbi1wcmltYXJ5IHRvLWdyZWVuLXNlY29uZGFyeSI+PC9kaXY+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1iLTQgdGV4dC1ncmVlbi1wcmltYXJ5IGZvbnQtYm9sZCB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXN0IHRleHQteHMiPgogICAgICAgICAgICAgICAgICAgIFBhZ2UgPHNwYW4gaWQ9InBhZ2UtbnVtIj4xPC9zcGFuPiBvZiA8c3BhbiBpZD0idG90YWwtcGFnZXMiPjI0PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDxoMiBpZD0ic3RvcnktdGl0bGUiIGNsYXNzPSJ0ZXh0LTN4bCBmb250LXNlcmlmIGZvbnQtYm9sZCB0ZXh0LWJyYW5kLWRhcmsgbWItNiBsZWFkaW5nLXRpZ2h0Ij48L2gyPgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJzdG9yeS10ZXh0IiBjbGFzcz0icHJvc2UgdGV4dC1ncmF5LTYwMCBsZWFkaW5nLXJlbGF4ZWQgbWItOCB0ZXh0LXNtIG92ZXJmbG93LXktYXV0byBtYXgtaC1bNDB2aF0gcHItMiI+CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtdC1hdXRvIGZsZXggZ2FwLTQiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iQm9vay5wcmV2UGFnZSgpIiBpZD0iYnRuLXByZXYiIGNsYXNzPSJmbGV4LTEgcHgtNCBweS0zIHJvdW5kZWQtbGcgYm9yZGVyLTIgYm9yZGVyLWdyYXktMjAwIHRleHQtZ3JheS01MDAgZm9udC1ib2xkIGhvdmVyOmJvcmRlci1icmFuZC1kYXJrIGhvdmVyOnRleHQtYnJhbmQtZGFyayB0cmFuc2l0aW9uIGRpc2FibGVkOm9wYWNpdHktMzAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIj4KICAgICAgICAgICAgICAgICAgICAgICAg4oaQIFByZXZpb3VzCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJCb29rLm5leHRQYWdlKCkiIGlkPSJidG4tbmV4dCIgY2xhc3M9ImZsZXgtMSBweC00IHB5LTMgcm91bmRlZC1sZyBiZy1ncmVlbi1wcmltYXJ5IHRleHQtd2hpdGUgZm9udC1ib2xkIGhvdmVyOmJnLWdyZWVuLXNlY29uZGFyeSBzaGFkb3ctbGcgdHJhbnNpdGlvbiB0cmFuc2Zvcm0gaG92ZXI6LXRyYW5zbGF0ZS15LTEgZGlzYWJsZWQ6b3BhY2l0eS01MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICBOZXh0IDxicj4g4oaSCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBjbGFzcz0idy1mdWxsIG1kOnctMi8zIGJnLWdyZWVuLWxpZ2h0IHJlbGF0aXZlIHAtNiBmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhYnNvbHV0ZSB0b3AtNCByaWdodC00IHRleHQtYmxhY2sgdGV4dC1zIGZvbnQtc2FucyB6LTIwIj4KICAgICAgICAgICAgICAgICAgICAmY29weTsgTWFrZXIgTWluZHoKICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWJzb2x1dGUgdG9wLTYgcmlnaHQtNiB0ZXh0LWJyYW5kLWRhcmsgb3BhY2l0eS0xMCB0ZXh0LTl4bCBmb250LXNlcmlmIGZvbnQtYm9sZCBzZWxlY3Qtbm9uZSI+CiAgICAgICAgICAgICAgICAgICAg8J+MiQogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDxkaXYgaWQ9InNpbS1jb250YWluZXIiIGNsYXNzPSJ3LWZ1bGwgbWF4LXctMnhsIHotMTAiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImJnLXdoaXRlIHAtMiByb3VuZGVkLXhsIHNoYWRvdy1sZyBib3JkZXIgYm9yZGVyLWdyYXktMjAwIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGNhbnZhcyBpZD0ic2ltLWNhbnZhcyIgd2lkdGg9IjYwMCIgaGVpZ2h0PSIzNTAiIGNsYXNzPSJ3LWZ1bGwgaC1hdXRvIGJnLWdyYXktNTAgcm91bmRlZC1sZyI+PC9jYW52YXM+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ic2ltLWNvbnRyb2xzIiBjbGFzcz0ic2ltLWNvbnRyb2wtcGFuZWwgc2hhZG93LXNtIG1pbi1oLVs4MHB4XSBmbGV4IGZsZXgtY29sIGp1c3RpZnktY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0ic2ltLWZlZWRiYWNrIiBjbGFzcz0ibXQtMyB0ZXh0LWNlbnRlciBmb250LWJvbGQgdGV4dC1icmFuZC1kYXJrIG1pbi1oLVsxLjVyZW1dIj48L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8c2NyaXB0PgogICAgICAgIC8vIC0tLSBCT09LIENPTlRFTlQgJiBMT0dJQyAtLS0KICAgICAgICAKICAgICAgICBjb25zdCBQYWdlcyA9IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJUaGUgQnJpZGdlIE1hc3RlcidzIEhhbmRib29rIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJXZWxjb21lLCBBcHByZW50aWNlISBZb3UgYXJlIGFib3V0IHRvIGVtYmFyayBvbiBhIGpvdXJuZXkgdGhyb3VnaCB0aGUgYXJ0IGFuZCBzY2llbmNlIG9mIEJyaWRnZSBFbmdpbmVlcmluZy4gRnJvbSBzaW1wbGUgbG9ncyB0byBtYXNzaXZlIHN0ZWVsIGdpYW50cywgYnJpZGdlcyBjb25uZWN0IG91ciB3b3JsZC4gQXJlIHlvdSByZWFkeSB0byBlYXJuIHlvdXIgdGl0bGUgYXMgYSBNYXN0ZXIgQnVpbGRlcj8iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImNvdmVyIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiQ2xpY2sgJ05leHQnIHRvIGJlZ2luIHlvdXIgdHJhaW5pbmcuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRoZSBQcm9ibGVtOiBUaGUgR2FwIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJFdmVyeSBicmlkZ2Ugc3RhcnRzIHdpdGggYSBwcm9ibGVtOiBhIGdhcC4gSXQgY291bGQgYmUgYSByaXZlciwgYSBjYW55b24sIG9yIGEgaGlnaHdheS4gQmVmb3JlIHdlIGJ1aWxkLCB3ZSBtdXN0IHVuZGVyc3RhbmQgdGhlIG9ic3RhY2xlLiBIZXJlIGxpZXMgdGhlIEdyZWF0IENoYXNtIG9mIElnbm9yYW5jZS4gV2UgbXVzdCBjcm9zcyBpdCEiLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImdhcCIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkNsaWNrIHRoZSBzY3JlZW4gdG8gc3VydmV5IHRoZSBnYXAuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk5hdHVyZSdzIEJyaWRnZSIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiVGhlIHNpbXBsZXN0IGJyaWRnZSBpcyBhIGJlYW0uIE5hdHVyZSBpbnZlbnRlZCBpdCBmaXJzdCAtIGEgZmFsbGVuIHRyZWUgYWNyb3NzIGEgc3RyZWFtLiBJdCB3b3JrcywgYnV0IGl0IGhhcyBsaW1pdHMuIElmIHRoZSBnYXAgaXMgdG9vIHdpZGUsIHRoZSBsb2cgd2lsbCBiZW5kIGFuZCBicmVhayB1bmRlciBpdHMgb3duIHdlaWdodC4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImxvZyIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkNsaWNrIHRvIGRyb3AgYSBsb2cgYWNyb3NzIHRoZSBjaGFzbS4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGhlIEJlYW0gQnJpZGdlIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJFbmdpbmVlcnMgcmVmaW5lZCB0aGUgbG9nIGludG8gdGhlIEJlYW0gQnJpZGdlLiBJdCBjb25zaXN0cyBvZiBhIGhvcml6b250YWwgYmVhbSBzdXBwb3J0ZWQgYXQgZWFjaCBlbmQgYnkgcGllcnMuIFdoZW4gYSBsb2FkIHB1c2hlcyBkb3duLCB0aGUgYmVhbSBiZW5kcy4gVGhlIHRvcCBlZGdlIGlzIHNxdWVlemVkLCBhbmQgdGhlIGJvdHRvbSBlZGdlIGlzIHN0cmV0Y2hlZC4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImJlYW0iLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJVc2UgdGhlIHNsaWRlciB0byBhcHBseSBsb2FkIGFuZCBzZWUgdGhlIGJlYW0gYmVuZC4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiRm9yY2VzOiBDb21wcmVzc2lvbiAmIFRlbnNpb24iLAogICAgICAgICAgICAgICAgdGV4dDogIlRvIGJ1aWxkIHN0cm9uZyBicmlkZ2VzLCB5b3UgbXVzdCBtYXN0ZXIgdHdvIGZvcmNlcy4gPGI+Q29tcHJlc3Npb248L2I+IGlzIGEgc3F1ZWV6aW5nIGZvcmNlIChwdXNoaW5nIHRvZ2V0aGVyKS4gPGI+VGVuc2lvbjwvYj4gaXMgYSBzdHJldGNoaW5nIGZvcmNlIChwdWxsaW5nIGFwYXJ0KS4gRGlmZmVyZW50IG1hdGVyaWFscyBoYW5kbGUgdGhlc2UgZm9yY2VzIGRpZmZlcmVudGx5LiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAiZm9yY2VzIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiSG92ZXIgb3ZlciB0aGUgYmxvY2sgdG8gc2VlIHRoZSBmb3JjZXMgaW4gYWN0aW9uLiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJTdW1tYXJ5OiBCZWFtIEJhc2ljcyIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiQmVhbSBicmlkZ2VzIGFyZSBzaW1wbGUgYW5kIGluZXhwZW5zaXZlIGJ1dCBsaW1pdGVkIGluIHNwYW4uIFRoZSBmYXJ0aGVyIGFwYXJ0IHRoZSBwaWVycywgdGhlIHdlYWtlciB0aGUgYmVhbSBiZWNvbWVzLiBUbyBzcGFuIHdpZGVyIGdhcHMsIHdlIG5lZWQgYmV0dGVyIGRlc2lnbnMuIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJiZWFtX3N0YXRpYyIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIlJldmlldyB0aGUgZGlhZ3JhbS4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGhlIFRydXNzOiBUcmlhbmdsZXMgYXJlIFN0cm9uZyIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiV2h5IGRvIGJyaWRnZXMgaGF2ZSBzbyBtYW55IHRyaWFuZ2xlcz8gQSBzcXVhcmUgY2FuIGVhc2lseSBkaXN0b3J0IGludG8gYSByaG9tYnVzIHVuZGVyIHByZXNzdXJlLiBBIHRyaWFuZ2xlLCBob3dldmVyLCBpcyByaWdpZC4gSXQgY2Fubm90IGNoYW5nZSBzaGFwZSB3aXRob3V0IGJyZWFraW5nIG9uZSBvZiBpdHMgc2lkZXMuIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJzaGFwZXMiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJDbGljayB0aGUgc2hhcGVzIHRvIGFwcGx5IGZvcmNlIGFuZCB0ZXN0IHJpZ2lkaXR5LiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJCdWlsZGluZyBhIFRydXNzIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJCeSBjb25uZWN0aW5nIHRyaWFuZ2xlcywgd2UgY3JlYXRlIGEgVHJ1c3MuIFRoaXMgc3RydWN0dXJlIGRpc3RyaWJ1dGVzIHRoZSB3ZWlnaHQgb2YgdGhlIGxvYWQgYWNyb3NzIG1hbnkgc3RlZWwgbWVtYmVycywgYWxsb3dpbmcgdGhlIGJyaWRnZSB0byBzcGFuIGdyZWF0ZXIgZGlzdGFuY2VzIHRoYW4gYSBzaW1wbGUgYmVhbS4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogInRydXNzIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiSG92ZXIgb3ZlciB0aGUgdHJ1c3MgbWVtYmVycyB0byBzZWUgaWYgdGhleSBhcmUgaW4gQ29tcHJlc3Npb24gKFJlZCkgb3IgVGVuc2lvbiAoQmx1ZSkuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlN1bW1hcnk6IFRydXNzZXMiLAogICAgICAgICAgICAgICAgdGV4dDogIlRydXNzIGJyaWRnZXMgYXJlIGluY3JlZGlibHkgZWZmaWNpZW50LCB1c2luZyBsZXNzIG1hdGVyaWFsIHRvIGNhcnJ5IGhlYXZ5IGxvYWRzLiBUaGV5IGFyZSB0aGUgd29ya2hvcnNlcyBvZiB0aGUgcmFpbHdheSB3b3JsZC4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogInRydXNzX3N0YXRpYyIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIlJldmlldyB0aGUgdHJ1c3MgZGVzaWduLiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJUaGUgQXJjaCBCcmlkZ2UiLAogICAgICAgICAgICAgICAgdGV4dDogIlRoZSBSb21hbnMgd2VyZSBtYXN0ZXJzIG9mIHRoZSBBcmNoLiBBbiBhcmNoIGJyaWRnZSB3b3JrcyBieSB0cmFuc2ZlcnJpbmcgdGhlIHdlaWdodCBvZiB0aGUgYnJpZGdlIGFuZCBpdHMgbG9hZCBwYXJ0aWFsbHkgaW50byBhIGhvcml6b250YWwgdGhydXN0IHJlc3RyYWluZWQgYnkgdGhlIGFidXRtZW50cyBhdCBlaXRoZXIgc2lkZS4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImFyY2giLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJDbGljayB0byBhcHBseSBsb2FkIGFuZCB3YXRjaCB0aGUgZm9yY2UgdHJhdmVsIGRvd24gdGhlIGFyY2guIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRoZSBLZXlzdG9uZSIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiVGhlIG1vc3QgaW1wb3J0YW50IHN0b25lIGluIGFuIGFyY2ggaXMgdGhlIEtleXN0b25lIGF0IHRoZSB2ZXJ5IHRvcC4gSXQgbG9ja3MgYWxsIHRoZSBvdGhlciBzdG9uZXMgaW4gcGxhY2UuIFdpdGhvdXQgaXQsIHRoZSBhcmNoIGNvbGxhcHNlcy4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImtleXN0b25lIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiRHJhZyB0aGUgS2V5c3RvbmUgaW50byB0aGUgY2VudGVyIHRvIGxvY2sgdGhlIGFyY2guIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlN1bW1hcnk6IEFyY2hlcyIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiQXJjaCBicmlkZ2VzIGFyZSBhbHdheXMgaW4gY29tcHJlc3Npb24uIFN0b25lIGFuZCBjb25jcmV0ZSBhcmUgZ3JlYXQgZm9yIGFyY2hlcyBiZWNhdXNlIHRoZXkgYXJlIHN0cm9uZyB1bmRlciBjb21wcmVzc2lvbiBidXQgd2VhayB1bmRlciB0ZW5zaW9uLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAiYXJjaF9zdGF0aWMiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJBZG1pcmUgdGhlIHN0YWJpbGl0eSBvZiB0aGUgYXJjaC4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGhlIFN1c3BlbnNpb24gQnJpZGdlIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJUbyBzcGFuIHRoZSB3aWRlc3QgZ2Fwcywgd2UgdXNlIFN1c3BlbnNpb24gQnJpZGdlcy4gR2lhbnQgY2FibGVzIGFyZSBkcmFwZWQgb3ZlciB0YWxsIHRvd2VycyBhbmQgYW5jaG9yZWQgZGVlcCBpbnRvIHRoZSBncm91bmQuIFRoZSBkZWNrIGhhbmdzIGZyb20gdGhlc2UgY2FibGVzLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAic3VzcGVuc2lvbiIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkFkanVzdCB0aGUgY2FibGUgc2FnIHdpdGggdGhlIHNsaWRlci4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGVuc2lvbiBpbiB0aGUgQ2FibGVzIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJUaGUgbWFpbiBjYWJsZXMgYXJlIGluIG1hc3NpdmUgdGVuc2lvbi4gVGhleSBwdWxsIG9uIHRoZSBhbmNob3JhZ2VzIHdpdGggdGhvdXNhbmRzIG9mIHRvbnMgb2YgZm9yY2UuIFRoZSB0b3dlcnMgc3VwcG9ydCB0aGUgd2VpZ2h0LCBzdGFuZGluZyBpbiBjb21wcmVzc2lvbi4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogInN1c3BlbnNpb25fdGVuc2lvbiIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkluY3JlYXNlIHRoZSBkZWNrIHdlaWdodCBhbmQgd2F0Y2ggdGhlIHRlbnNpb24gcmlzZS4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiU3VtbWFyeTogU3VzcGVuc2lvbiIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiU3VzcGVuc2lvbiBicmlkZ2VzIGFyZSBsaWdodCwgZmxleGlibGUsIGFuZCBiZWF1dGlmdWwuIFRoZXkgY2FuIHNwYW4gZGlzdGFuY2VzIG5vIG90aGVyIGJyaWRnZSB0eXBlIGNhbiwgbGlrZSB0aGUgR29sZGVuIEdhdGUgQnJpZGdlLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAic3VzcGVuc2lvbl9zdGF0aWMiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJSZXZpZXcgdGhlIHN1c3BlbnNpb24gZGVzaWduLiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJDYWJsZS1TdGF5ZWQgQnJpZGdlcyIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiQSBtb2Rlcm4gdmFyaWF0aW9uIGlzIHRoZSBDYWJsZS1TdGF5ZWQgYnJpZGdlLiBJbnN0ZWFkIG9mIG9uZSBtYWluIGNhYmxlLCBtdWx0aXBsZSBjYWJsZXMgcnVuIGRpcmVjdGx5IGZyb20gdGhlIHRvd2VyIHRvIHRoZSBkZWNrLiBJdCBmb3JtcyBhIGZhbi1saWtlIHBhdHRlcm4uIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJjYWJsZXN0YXkiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJDbGljayB0byB0b2dnbGUgYmV0d2VlbiAnSGFycCcgYW5kICdGYW4nIGNhYmxlIGFycmFuZ2VtZW50cy4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiUmVzb25hbmNlICYgV2luZCIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiQnJpZGdlcyBtdXN0IGZpZ2h0IHRoZSB3aW5kLiBJZiB0aGUgd2luZCBwdXNoZXMgYXQgdGhlIGJyaWRnZSdzIG5hdHVyYWwgZnJlcXVlbmN5LCBpdCBjYW4gY2F1c2UgcmVzb25hbmNlIC0gdmlvbGVudCBzaGFraW5nIHRoYXQgY2FuIGRlc3Ryb3kgdGhlIGJyaWRnZSAobGlrZSB0aGUgVGFjb21hIE5hcnJvd3MpLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAicmVzb25hbmNlIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiQWRqdXN0IHRoZSB3aW5kIHNwZWVkLiBBdm9pZCB0aGUgJ0RhbmdlciBab25lJyBmcmVxdWVuY3khIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk1hdGVyaWFscyBTY2llbmNlIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJFbmdpbmVlcnMgY2hvb3NlIG1hdGVyaWFscyBjYXJlZnVsbHkuIENvbmNyZXRlIGlzIGNoZWFwIGFuZCBzdHJvbmcgaW4gY29tcHJlc3Npb24uIFN0ZWVsIGlzIGV4cGVuc2l2ZSBidXQgc3Ryb25nIGluIHRlbnNpb24uIFJlaW5mb3JjZWQgY29uY3JldGUgY29tYmluZXMgYm90aCEiLAogICAgICAgICAgICAgICAgc2ltVHlwZTogIm1hdGVyaWFscyIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkNsaWNrICdUZXN0JyB0byBjcnVzaCB0aGUgY29uY3JldGUgYmxvY2suIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkZvdW5kYXRpb25zICYgUGllcnMiLAogICAgICAgICAgICAgICAgdGV4dDogIkEgYnJpZGdlIGlzIG9ubHkgYXMgc3Ryb25nIGFzIGl0cyBmb3VuZGF0aW9uLiBJZiB0aGUgcml2ZXJiZWQgaXMgc29mdCBtdWQsIGVuZ2luZWVycyBkcml2ZSBsb25nIHBvbGVzIGNhbGxlZCAncGlsZXMnIGRlZXAgaW50byB0aGUgZWFydGggdW50aWwgdGhleSBoaXQgc29saWQgcm9jay4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogInBpbGVzIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiQ2xpY2sgdG8gaGFtbWVyIHRoZSBwaWxlIGludG8gdGhlIGdyb3VuZC4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQ2FudGlsZXZlciBCcmlkZ2VzIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJBIGNhbnRpbGV2ZXIgaXMgYSBiZWFtIHN1cHBvcnRlZCBvbmx5IG9uIG9uZSBlbmQsIGxpa2UgYSBkaXZpbmcgYm9hcmQuIENhbnRpbGV2ZXIgYnJpZGdlcyB1c2UgdHdvIGFybXMgcmVhY2hpbmcgb3V0IGZyb20gb3Bwb3NpdGUgc2lkZXMgdG8gbWVldCBpbiB0aGUgbWlkZGxlLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAiY2FudGlsZXZlciIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkFkanVzdCB0aGUgQW5jaG9yIFdlaWdodCB0byBzdXBwb3J0IHRoZSBicmlkZ2UsIHRoZW4gc2VuZCB0aGUgdHJ1Y2sgYWNyb3NzLiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJNb3ZlYWJsZSBCcmlkZ2VzIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJTb21ldGltZXMsIGJvYXRzIG5lZWQgdG8gcGFzcy4gQmFzY3VsZSBicmlkZ2VzIChkcmF3YnJpZGdlcykgdXNlIGEgY291bnRlcndlaWdodCB0byBsaWZ0IHRoZSBoZWF2eSBkZWNrIHdpdGggdmVyeSBsaXR0bGUgZW5lcmd5LiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAiYmFzY3VsZSIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkRyYWcgdGhlIHNsaWRlciB0byByYWlzZSB0aGUgYnJpZGdlIGZvciB0aGUgc2hpcC4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGhlIExvYWQgVGVzdCIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiWW91J3ZlIGxlYXJuZWQgdGhlIHByaW5jaXBsZXMuIE5vdywgdGVzdCB5b3VyIGJyaWRnZSEgV2Ugd2lsbCBkcml2ZSBoZWF2eSB0cnVja3Mgb250byB0aGUgZGVjay4gV2lsbCB5b3VyIGRlc2lnbiBob2xkLCBvciB3aWxsIGl0IGNydW1ibGU/IiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJsb2FkX3Rlc3QiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJDbGljayAnQWRkIFRydWNrJyB0byB0ZXN0IHRoZSBsaW1pdC4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiRnV0dXJlIEJyaWRnZXMiLAogICAgICAgICAgICAgICAgdGV4dDogIlRoZSBmdXR1cmUgb2YgYnJpZGdpbmcgaXMgZXhjaXRpbmchIEVuZ2luZWVycyBhcmUgZGVzaWduaW5nIGZsb2F0aW5nIGJyaWRnZXMsIDNELXByaW50ZWQgYnJpZGdlcywgYW5kIGV2ZW4gYnJpZGdlcyB0aGF0IGhlYWwgdGhlaXIgb3duIGNyYWNrcyB3aXRoIGJhY3RlcmlhLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAiZnV0dXJlIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiV2F0Y2ggdGhlIGF1dG9ub21vdXMgM0QgcHJpbnRlciBjb25zdHJ1Y3QgdGhlIGJyaWRnZS4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiTWFzdGVyIEJ1aWxkZXIiLAogICAgICAgICAgICAgICAgdGV4dDogIkNvbmdyYXR1bGF0aW9ucyEgWW91IGhhdmUgY29tcGxldGVkIHRoZSBoYW5kYm9vay4gWW91IHVuZGVyc3RhbmQgZm9yY2VzLCBtYXRlcmlhbHMsIGFuZCBkZXNpZ25zLiBHbyBmb3J0aCBhbmQgY29ubmVjdCB0aGUgd29ybGQhIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJjZXJ0aWZpY2F0ZSIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkNsaWNrIHRvIHJlY2VpdmUgeW91ciBzZWFsLiIKICAgICAgICAgICAgfQogICAgICAgIF07CgogICAgICAgIGNvbnN0IEJvb2sgPSB7CiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAwLAogICAgICAgICAgICAKICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclBhZ2UoKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIG5leHRQYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlIDwgUGFnZXMubGVuZ3RoIC0gMSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UrKzsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclBhZ2UoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJQYWdlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBwcmV2UGFnZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA+IDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlLS07CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJQYWdlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICByZW5kZXJQYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2UgPSBQYWdlc1t0aGlzLmN1cnJlbnRQYWdlXTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gVXBkYXRlIFRleHQKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWdlLW51bScpLnRleHRDb250ZW50ID0gdGhpcy5jdXJyZW50UGFnZSArIDE7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG90YWwtcGFnZXMnKS50ZXh0Q29udGVudCA9IFBhZ2VzLmxlbmd0aDsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdG9yeS10aXRsZScpLnRleHRDb250ZW50ID0gcGFnZS50aXRsZTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdG9yeS10ZXh0JykuaW5uZXJIVE1MID0gYDxwPiR7cGFnZS50ZXh0fTwvcD48cCBjbGFzcz0ibXQtNCB0ZXh0LXNtIGZvbnQtYm9sZCB0ZXh0LWdyZWVuLXByaW1hcnkgaXRhbGljIj5UYXNrOiAke3BhZ2UuaW5zdHJ1Y3Rpb259PC9wPmA7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBCdXR0b25zCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLXByZXYnKS5kaXNhYmxlZCA9IHRoaXMuY3VycmVudFBhZ2UgPT09IDA7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQnKS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgPT09IFBhZ2VzLmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQnKS50ZXh0Q29udGVudCA9ICJSZXN0YXJ0IjsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0JykuaW5uZXJIVE1MID0gIk5leHQgPGJyPiDihpIiOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIExvYWQgU2ltdWxhdGlvbgogICAgICAgICAgICAgICAgU2ltdWxhdGlvbnMubG9hZChwYWdlLnNpbVR5cGUpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgU2ltdWxhdGlvbnMgPSB7CiAgICAgICAgICAgIGNhbnZhczogbnVsbCwKICAgICAgICAgICAgY3R4OiBudWxsLAogICAgICAgICAgICBhbmltSWQ6IG51bGwsCiAgICAgICAgICAgIGFjdGl2ZVR5cGU6IG51bGwsCiAgICAgICAgICAgIHN0YXRlOiB7fSwKCiAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKHR5cGUpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmFuaW1JZCkgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltSWQpOwogICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVUeXBlID0gdHlwZTsKICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jYW52YXMnKTsKICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLm9ubW91c2Vtb3ZlID0gbnVsbDsKICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLm9ubW91c2Vkb3duID0gbnVsbDsKICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLm9ubW91c2V1cCA9IG51bGw7CiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5vbmNsaWNrID0gbnVsbDsKICAgICAgICAgICAgICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gUmVzZXQgY29udHJvbHMKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tY29udHJvbHMnKS5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICcnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLmNsYXNzTmFtZSA9ICJtdC0zIHRleHQtY2VudGVyIGZvbnQtYm9sZCB0ZXh0LWJyYW5kLWRhcmsgbWluLWgtWzEuNXJlbV0iOwoKICAgICAgICAgICAgICAgIC8vIEluaXRpYWxpemUgc3BlY2lmaWMgc2ltdWxhdGlvbgogICAgICAgICAgICAgICAgaWYgKHRoaXNbdHlwZV0pIHRoaXNbdHlwZV0uaW5pdCh0aGlzKTsKICAgICAgICAgICAgICAgIGVsc2UgdGhpcy5wbGFjZWhvbGRlci5pbml0KHRoaXMpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5jdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICBzaW0uY3R4LmZpbGxTdHlsZSA9ICIjYmRjM2M3IjsKICAgICAgICAgICAgICAgICAgICBzaW0uY3R4LmZvbnQgPSAiMjBweCBzYW5zLXNlcmlmIjsKICAgICAgICAgICAgICAgICAgICBzaW0uY3R4LnRleHRBbGlnbiA9ICJjZW50ZXIiOwogICAgICAgICAgICAgICAgICAgIHNpbS5jdHguZmlsbFRleHQoIlN0YXRpYyBEaWFncmFtIC8gVmlzdWFsIiwgMzAwLCAxNzUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gMS4gQ09WRVIKICAgICAgICAgICAgY292ZXI6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgdDogMCB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUudCArPSAwLjAyOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMyYzNlNTAnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgNjAwLCAzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBCcmlkZ2UgU2lsaG91ZXR0ZQogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzNDQ5NWUnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oMCwgMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbygxMDAsIDI1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oNTAwLCAyNTApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKDYwMCwgMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgU3VzcGVuc2lvbiBDYWJsZXMKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNmMWM0MGYnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKDEwMCwgMjUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8oMzAwLCAzNTAsIDUwMCwgMjUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGl0bGUKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZvbnQgPSAnYm9sZCA0MHB4IHNlcmlmJzsgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIkJyaWRnZSBFbmdpbmVlcmluZyIsIDMwMCwgMTUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDIuIEdBUAogICAgICAgICAgICBnYXA6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgLy8gU2t5CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjODdDRUVCJzsgY3R4LmZpbGxSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAvLyBDbGlmZnMKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM4QjQ1MTMnOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAyMDAsIDE1MCwgMTUwKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoNDUwLCAyMDAsIDE1MCwgMTUwKTsKICAgICAgICAgICAgICAgICAgICAvLyBXYXRlcgogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzM0OThkYic7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDE1MCwgMzAwLCAzMDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiR2FwIFdpZHRoOiAzMDAgbWV0ZXJzIjsKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkcmF3KCkgewogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2t5CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzg3Q0VFQic7IGN0eC5maWxsUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsaWZmcwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM4QjQ1MTMnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMjAwLCAxNTAsIDE1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCg0NTAsIDIwMCwgMTUwLCAxNTApOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBXYXRlcgogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzNDk4ZGInOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMTUwLCAzMDAsIDMwMCwgNTApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkcmF3KCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gIkNsaWNrIHRvIHN1cnZleS4iOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHNpbS5jYW52YXMub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgZHJhdygpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IG1lYXN1cmVtZW50IGxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMyYzNlNTAnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNldExpbmVEYXNoKFs1LCA1XSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygxNTAsIDIwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oNDUwLCAyMDApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zZXRMaW5lRGFzaChbXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IGFycm93cwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMyYzNlNTAnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMTUwLCAyMDApOyBjdHgubGluZVRvKDE2MCwgMTk1KTsgY3R4LmxpbmVUbygxNjAsIDIwNSk7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyg0NTAsIDIwMCk7IGN0eC5saW5lVG8oNDQwLCAxOTUpOyBjdHgubGluZVRvKDQ0MCwgMjA1KTsgY3R4LmZpbGwoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJHYXAgV2lkdGg6IDMwMCBtZXRlcnMiOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykuY2xhc3NOYW1lID0gIm10LTMgdGV4dC1jZW50ZXIgZm9udC1ib2xkIHRleHQtZ3JlZW4tcHJpbWFyeSBtaW4taC1bMS41cmVtXSI7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDMuIExPRwogICAgICAgICAgICBsb2c6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgZHJvcHBlZDogZmFsc2UsIHk6IDAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0uY2FudmFzLm9uY2xpY2sgPSAoKSA9PiBzaW0uc3RhdGUuZHJvcHBlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBCYWNrZ3JvdW5kIChzYW1lIGFzIGdhcCkKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjODdDRUVCJzsgY3R4LmZpbGxSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjOEI0NTEzJzsgY3R4LmZpbGxSZWN0KDAsIDIwMCwgMTUwLCAxNTApOyBjdHguZmlsbFJlY3QoNDUwLCAyMDAsIDE1MCwgMTUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNpbS5zdGF0ZS5kcm9wcGVkICYmIHNpbS5zdGF0ZS55IDwgMjAwKSBzaW0uc3RhdGUueSArPSA1OwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2ltLnN0YXRlLmRyb3BwZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzVENDAzNyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMTAwLCBzaW0uc3RhdGUueSwgNDAwLCAyMCk7IC8vIFRoZSBMb2cKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzVENDAzNyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoNTAsIDE4MCwgMjAsIDEwMCk7IC8vIFRyZWUgc3RhbmRpbmcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzI3YWU2MCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoNjAsIDE4MCwgMzAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzaW0ubG9vcCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gNC4gQkVBTQogICAgICAgICAgICBiZWFtOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IGxvYWQ6IDAgfTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWNvbnRyb2xzJykuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCI+PHNwYW4gY2xhc3M9ImZvbnQtYm9sZCI+TG9hZDo8L3NwYW4+PGlucHV0IHR5cGU9InJhbmdlIiBtaW49IjAiIG1heD0iMTAwIiB2YWx1ZT0iMCIgY2xhc3M9ImZsZXgtMSIgb25pbnB1dD0iU2ltdWxhdGlvbnMuc3RhdGUubG9hZD1wYXJzZUludCh0aGlzLnZhbHVlKSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBQaWVycwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM3ZjhjOGQnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMTAwLCAyNTAsIDIwLCAxMDApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoNDgwLCAyNTAsIDIwLCAxMDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmVhbQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiZW5kID0gc2ltLnN0YXRlLmxvYWQgKiAwLjg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2U3NGMzYyc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygxMDAsIDI1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKDMwMCwgMjUwICsgYmVuZCwgNTAwLCAyNTApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKDUwMCwgMjcwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnF1YWRyYXRpY0N1cnZlVG8oMzAwLCAyNzAgKyBiZW5kLCAxMDAsIDI3MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBMb2FkIEFycm93CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNpbS5zdGF0ZS5sb2FkID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMmMzZTUwJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgyOTAsIDE1MCArIGJlbmQvMiwgMjAsIDgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygyODAsIDIzMCArIGJlbmQvMik7IGN0eC5saW5lVG8oMzIwLCAyMzAgKyBiZW5kLzIpOyBjdHgubGluZVRvKDMwMCwgMjUwICsgYmVuZC8yKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzaW0ubG9vcCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gNS4gRk9SQ0VTCiAgICAgICAgICAgIGZvcmNlczogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyBob3ZlcmluZzogZmFsc2UgfTsKICAgICAgICAgICAgICAgICAgICBzaW0uY2FudmFzLm9ubW91c2Vtb3ZlID0gKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHNpbS5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG14ID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBteSA9IGUuY2xpZW50WSAtIHJlY3QudG9wOwogICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUuaG92ZXJpbmcgPSAobXggPiAyMDAgJiYgbXggPCA0MDAgJiYgbXkgPiAxMjUgJiYgbXkgPCAyMjUpOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IHNpbS5zdGF0ZS5ob3ZlcmluZyA/IE1hdGguc2luKERhdGUubm93KCkgLyAxNTApICogNSA6IDA7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBCbG9jawogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzNDk4ZGInOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzI5ODBiOSc7IGN0eC5saW5lV2lkdGggPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpbS5zdGF0ZS5ob3ZlcmluZykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygyMDAgKyBvZmZzZXQsIDEyNSk7IGN0eC5saW5lVG8oNDAwIC0gb2Zmc2V0LCAxMjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyg0MDAgKyBvZmZzZXQsIDIyNSk7IGN0eC5saW5lVG8oMjAwIC0gb2Zmc2V0LCAyMjUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpOyBjdHguZmlsbCgpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMjAwLCAxMjUsIDIwMCwgMTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VSZWN0KDIwMCwgMTI1LCAyMDAsIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXByZXNzaW9uIChUb3ApCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2U3NGMzYyc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gJ2JvbGQgMTZweCBzYW5zLXNlcmlmJzsgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInOyBjdHguZmlsbFRleHQoIkNvbXByZXNzaW9uIChTcXVlZXplKSIsIDMwMCwgMTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDIyMCArIG9mZnNldCwgMTQwKTsgY3R4LmxpbmVUbygyODAgKyBvZmZzZXQsIDE0MCk7IGN0eC5saW5lVG8oMjcwICsgb2Zmc2V0LCAxMzUpOyBjdHgubW92ZVRvKDI4MCArIG9mZnNldCwgMTQwKTsgY3R4LmxpbmVUbygyNzAgKyBvZmZzZXQsIDE0NSk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDM4MCAtIG9mZnNldCwgMTQwKTsgY3R4LmxpbmVUbygzMjAgLSBvZmZzZXQsIDE0MCk7IGN0eC5saW5lVG8oMzMwIC0gb2Zmc2V0LCAxMzUpOyBjdHgubW92ZVRvKDMyMCAtIG9mZnNldCwgMTQwKTsgY3R4LmxpbmVUbygzMzAgLSBvZmZzZXQsIDE0NSk7IGN0eC5zdHJva2UoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRlbnNpb24gKEJvdHRvbSkKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMjdhZTYwJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJUZW5zaW9uIChTdHJldGNoKSIsIDMwMCwgMjYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDI4MCAtIG9mZnNldCwgMjEwKTsgY3R4LmxpbmVUbygyMjAgLSBvZmZzZXQsIDIxMCk7IGN0eC5saW5lVG8oMjMwIC0gb2Zmc2V0LCAyMDUpOyBjdHgubW92ZVRvKDIyMCAtIG9mZnNldCwgMjEwKTsgY3R4LmxpbmVUbygyMzAgLSBvZmZzZXQsIDIxNSk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDMyMCArIG9mZnNldCwgMjEwKTsgY3R4LmxpbmVUbygzODAgKyBvZmZzZXQsIDIxMCk7IGN0eC5saW5lVG8oMzcwICsgb2Zmc2V0LCAyMDUpOyBjdHgubW92ZVRvKDM4MCArIG9mZnNldCwgMjEwKTsgY3R4LmxpbmVUbygzNzAgKyBvZmZzZXQsIDIxNSk7IGN0eC5zdHJva2UoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDcuIFNIQVBFUwogICAgICAgICAgICBzaGFwZXM6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgb2Zmc2V0OiAwIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmNhbnZhcy5vbm1vdXNlZG93biA9IChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBzaW0uY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBteCA9IGUuY2xpZW50WCAtIHJlY3QubGVmdDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbXkgPSBlLmNsaWVudFkgLSByZWN0LnRvcDsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBkaXN0b3J0IGlmIGNsaWNraW5nIHRoZSBzcXVhcmUgKGFwcHJveCBib3VuZHMgMTAwLDEwMCB0byAyMDAsMjAwKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobXggPiAxMDAgJiYgbXggPCAyMDAgJiYgbXkgPiAxMDAgJiYgbXkgPCAyMDApIHNpbS5zdGF0ZS5vZmZzZXQgPSAyMDsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5jYW52YXMub25tb3VzZXVwID0gKCkgPT4gc2ltLnN0YXRlLm9mZnNldCA9IDA7CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2ZmID0gc2ltLnN0YXRlLm9mZnNldDsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNxdWFyZQogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2U3NGMzYyc7IGN0eC5saW5lV2lkdGggPSA0OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IAogICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKDEwMCArIG9mZiwgMTAwKTsgY3R4LmxpbmVUbygyMDAgKyBvZmYsIDEwMCk7IC8vIFRvcCBtb3ZlcwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKDIwMCwgMjAwKTsgY3R4LmxpbmVUbygxMDAsIDIwMCk7IGN0eC5jbG9zZVBhdGgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZmlsbFRleHQoIlNxdWFyZSAoVW5zdGFibGUpIiwgMTUwLCAyMzApOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJpYW5nbGUKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMyN2FlNjAnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oNDAwLCAxMDApOyBjdHgubGluZVRvKDQ1MCwgMjAwKTsgY3R4LmxpbmVUbygzNTAsIDIwMCk7IGN0eC5jbG9zZVBhdGgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIlRyaWFuZ2xlIChSaWdpZCkiLCA0MDAsIDIzMCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW5kIHB1c2hpbmcKICAgICAgICAgICAgICAgICAgICAgICAgaWYob2ZmID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZjFjNDBmJzsgY3R4LmZpbGxUZXh0KCJQVVNIISIsIDE1MCwgODApOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyA4LiBUUlVTUwogICAgICAgICAgICB0cnVzczogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyBob3Zlck1lbWJlcjogbnVsbCB9OwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lbWJlcnMgPSBbCiAgICAgICAgICAgICAgICAgICAgICAgIHsgcDE6IHt4OjE1MCwgeToxNTB9LCBwMjoge3g6NDUwLCB5OjE1MH0sIHR5cGU6ICdjb21wcmVzc2lvbicsIGxhYmVsOiAnVG9wIENob3JkJyB9LAogICAgICAgICAgICAgICAgICAgICAgICB7IHAxOiB7eDoxMDAsIHk6MjUwfSwgcDI6IHt4OjUwMCwgeToyNTB9LCB0eXBlOiAndGVuc2lvbicsIGxhYmVsOiAnQm90dG9tIENob3JkJyB9LAogICAgICAgICAgICAgICAgICAgICAgICB7IHAxOiB7eDoxMDAsIHk6MjUwfSwgcDI6IHt4OjE1MCwgeToxNTB9LCB0eXBlOiAnY29tcHJlc3Npb24nLCBsYWJlbDogJ0RpYWdvbmFsJyB9LAogICAgICAgICAgICAgICAgICAgICAgICB7IHAxOiB7eDoxNTAsIHk6MTUwfSwgcDI6IHt4OjIwMCwgeToyNTB9LCB0eXBlOiAndGVuc2lvbicsIGxhYmVsOiAnRGlhZ29uYWwnIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsgcDE6IHt4OjIwMCwgeToyNTB9LCBwMjoge3g6MjUwLCB5OjE1MH0sIHR5cGU6ICdjb21wcmVzc2lvbicsIGxhYmVsOiAnRGlhZ29uYWwnIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsgcDE6IHt4OjI1MCwgeToxNTB9LCBwMjoge3g6MzAwLCB5OjI1MH0sIHR5cGU6ICd0ZW5zaW9uJywgbGFiZWw6ICdEaWFnb25hbCcgfSwKICAgICAgICAgICAgICAgICAgICAgICAgeyBwMToge3g6MzAwLCB5OjI1MH0sIHAyOiB7eDozNTAsIHk6MTUwfSwgdHlwZTogJ2NvbXByZXNzaW9uJywgbGFiZWw6ICdEaWFnb25hbCcgfSwKICAgICAgICAgICAgICAgICAgICAgICAgeyBwMToge3g6MzUwLCB5OjE1MH0sIHAyOiB7eDo0MDAsIHk6MjUwfSwgdHlwZTogJ3RlbnNpb24nLCBsYWJlbDogJ0RpYWdvbmFsJyB9LAogICAgICAgICAgICAgICAgICAgICAgICB7IHAxOiB7eDo0MDAsIHk6MjUwfSwgcDI6IHt4OjQ1MCwgeToxNTB9LCB0eXBlOiAnY29tcHJlc3Npb24nLCBsYWJlbDogJ0RpYWdvbmFsJyB9LAogICAgICAgICAgICAgICAgICAgICAgICB7IHAxOiB7eDo0NTAsIHk6MTUwfSwgcDI6IHt4OjUwMCwgeToyNTB9LCB0eXBlOiAndGVuc2lvbicsIGxhYmVsOiAnRGlhZ29uYWwnIH0KICAgICAgICAgICAgICAgICAgICBdOwoKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkaXN0VG9TZWdtZW50KHAsIHYsIHcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbDIgPSAody54IC0gdi54KSoqMiArICh3LnkgLSB2LnkpKioyOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobDIgPT09IDApIHJldHVybiBNYXRoLnNxcnQoKHAueCAtIHYueCkqKjIgKyAocC55IC0gdi55KSoqMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ID0gKChwLnggLSB2LngpICogKHcueCAtIHYueCkgKyAocC55IC0gdi55KSAqICh3LnkgLSB2LnkpKSAvIGwyOwogICAgICAgICAgICAgICAgICAgICAgICB0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgdCkpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KChwLnggLSAodi54ICsgdCAqICh3LnggLSB2LngpKSkqKjIgKyAocC55IC0gKHYueSArIHQgKiAody55IC0gdi55KSkpKioyKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHNpbS5jYW52YXMub25tb3VzZW1vdmUgPSAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gc2ltLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbXggPSBlLmNsaWVudFggLSByZWN0LmxlZnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG15ID0gZS5jbGllbnRZIC0gcmVjdC50b3A7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZm91bmQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IG0gb2YgbWVtYmVycykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3RUb1NlZ21lbnQoe3g6bXgsIHk6bXl9LCBtLnAxLCBtLnAyKSA8IDEwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBtOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5ob3Zlck1lbWJlciA9IGZvdW5kOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1cHBvcnRzCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzdmOGM4ZCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCg5MCwgMjUwLCAyMCwgMTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDQ5MCwgMjUwLCAyMCwgMTAwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSA4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZUNhcCA9ICdyb3VuZCc7CgogICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXJzLmZvckVhY2gobSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0hvdmVyZWQgPSBzaW0uc3RhdGUuaG92ZXJNZW1iZXIgPT09IG07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKG0ucDEueCwgbS5wMS55KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8obS5wMi54LCBtLnAyLnkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzSG92ZXJlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IG0udHlwZSA9PT0gJ2NvbXByZXNzaW9uJyA/ICcjZTc0YzNjJyA6ICcjMzQ5OGRiJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyM5NWE1YTYnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzJjM2U1MCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpvaW50cyA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt4OjEwMCwgeToyNTB9LCB7eDoxNTAsIHk6MTUwfSwge3g6MjAwLCB5OjI1MH0sIHt4OjI1MCwgeToxNTB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAge3g6MzAwLCB5OjI1MH0sIHt4OjM1MCwgeToxNTB9LCB7eDo0MDAsIHk6MjUwfSwge3g6NDUwLCB5OjE1MH0sIHt4OjUwMCwgeToyNTB9CiAgICAgICAgICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgICAgICAgICAgIGpvaW50cy5mb3JFYWNoKGogPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKGoueCwgai55LCA2LCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW0uc3RhdGUuaG92ZXJNZW1iZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG0gPSBzaW0uc3RhdGUuaG92ZXJNZW1iZXI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlVGV4dCA9IG0udHlwZSA9PT0gJ2NvbXByZXNzaW9uJyA/ICJDb21wcmVzc2lvbiAoU3F1ZWV6ZSkiIDogIlRlbnNpb24gKFN0cmV0Y2gpIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9IGAke20ubGFiZWx9OiAke3R5cGVUZXh0fWA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykuY2xhc3NOYW1lID0gYG10LTMgdGV4dC1jZW50ZXIgZm9udC1ib2xkICR7bS50eXBlID09PSAnY29tcHJlc3Npb24nID8gJ3RleHQtcmVkLTUwMCcgOiAndGV4dC1ibHVlLTUwMCd9IG1pbi1oLVsxLjVyZW1dYDsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJIb3ZlciBvdmVyIG1lbWJlcnMgdG8gc2VlIGZvcmNlcy4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLmNsYXNzTmFtZSA9ICJtdC0zIHRleHQtY2VudGVyIGZvbnQtYm9sZCB0ZXh0LWJyYW5kLWRhcmsgbWluLWgtWzEuNXJlbV0iOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyAxMC4gQVJDSAogICAgICAgICAgICBhcmNoOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IGxvYWQ6IGZhbHNlLCBjaGFyaW90WDogNTAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0uY2FudmFzLm9uY2xpY2sgPSAoKSA9PiBzaW0uc3RhdGUubG9hZCA9ICFzaW0uc3RhdGUubG9hZDsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2t5CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzg3Q0VFQic7IGN0eC5maWxsUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdyb3VuZC9XYXRlcgogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzNDk4ZGInOyBjdHguZmlsbFJlY3QoMTUwLCAzMDAsIDMwMCwgNTApOyAvLyBXYXRlcgogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMyN2FlNjAnOyBjdHguZmlsbFJlY3QoMCwgMzAwLCAxNTAsIDUwKTsgY3R4LmZpbGxSZWN0KDQ1MCwgMzAwLCAxNTAsIDUwKTsgLy8gQmFua3MKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFidXRtZW50cwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM3ZjhjOGQnOyAKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDUwLCAxNTAsIDEwMCwgMTUwKTsgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCg0NTAsIDE1MCwgMTAwLCAxNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGFiZWxzIGZvciBBYnV0bWVudHMKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMmMzZTUwJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnYm9sZCAxNHB4IHNhbnMtc2VyaWYnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiQWJ1dG1lbnQiLCAxMDAsIDMyMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiQWJ1dG1lbnQiLCA1MDAsIDMyMCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBBcmNoCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjN2Y4YzhkJzsgY3R4LmxpbmVXaWR0aCA9IDIwOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoMzAwLCAzMDAsIDE1MCwgTWF0aC5QSSwgMCk7IGN0eC5zdHJva2UoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbGwgKFNwYW5kcmVscykKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjYmRjM2M3JzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKDE1MCwgMTUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyg0NTAsIDE1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oNDUwLCAzMDApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYXJjKDMwMCwgMzAwLCAxNTAsIDAsIE1hdGguUEksIHRydWUpOyAKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbygxNTAsIDMwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBsYXRmb3JtIChEZWNrKQogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM3ZjhjOGQnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoNTAsIDE0MCwgNTAwLCAxMCk7IAoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUm9tYW4gQ2hhcmlvdAogICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUuY2hhcmlvdFggPSAoc2ltLnN0YXRlLmNoYXJpb3RYICsgMSkgJSA1MDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW0uc3RhdGUuY2hhcmlvdFggPCA1MCkgc2ltLnN0YXRlLmNoYXJpb3RYID0gNTA7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjeCA9IHNpbS5zdGF0ZS5jaGFyaW90WDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3kgPSAxNDA7IAoKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShjeCwgY3kpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlZWwKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyM1ZDQwMzcnOyBjdHgubGluZVdpZHRoID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKDAsIC0xMCwgMTAsIDAsIE1hdGguUEkqMik7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDAsIC0xMCk7IGN0eC5saW5lVG8oMCwgLTIwKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCwgLTEwKTsgY3R4LmxpbmVUbygxMCwgLTEwKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCwgLTEwKTsgY3R4LmxpbmVUbygwLCAwKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCwgLTEwKTsgY3R4LmxpbmVUbygtMTAsIC0xMCk7IGN0eC5zdHJva2UoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJvZHkKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjYzAzOTJiJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KC0xNSwgLTI1LCAzMCwgMTUpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG9yc2UKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjOGQ2ZTYzJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDIwLCAtMjAsIDI1LCAxNSk7IAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoNDAsIC0zMCwgMTAsIDE1KTsgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgyMCwgLTUsIDUsIDEwKTsgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCg0MCwgLTUsIDUsIDEwKTsgCgogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcml2ZXIKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZjFjNDBmJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKDAsIC0zMCwgNSwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KC01LCAtMjUsIDEwLCAxMCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2ltLnN0YXRlLmxvYWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcmNlIFZlY3RvcnMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjZTc0YzNjJzsgY3R4LmxpbmVXaWR0aCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgZm9yY2VzIHRyYXZlbGluZyBkb3duIHRoZSBhcmNoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWdtZW50cyA9IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlZ21lbnRzOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMZWZ0IHNpZGU6IDI3MCBkZWcgKDEuNSBQSSkgZG93biB0byAxODAgZGVnIChQSSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RhcnRBbmdsZSA9IDEuNSAqIE1hdGguUEkgLSAoaSAvIHNlZ21lbnRzKSAqIDAuNSAqIE1hdGguUEk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVuZEFuZ2xlID0gMS41ICogTWF0aC5QSSAtICgoaSArIDAuNikgLyBzZWdtZW50cykgKiAwLjUgKiBNYXRoLlBJOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB4MSA9IDMwMCArIE1hdGguY29zKHN0YXJ0QW5nbGUpICogMTUwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB5MSA9IDMwMCArIE1hdGguc2luKHN0YXJ0QW5nbGUpICogMTUwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB4MiA9IDMwMCArIE1hdGguY29zKGVuZEFuZ2xlKSAqIDE1MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeTIgPSAzMDAgKyBNYXRoLnNpbihlbmRBbmdsZSkgKiAxNTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKHgxLCB5MSk7IGN0eC5saW5lVG8oeDIsIHkyKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFycm93aGVhZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbmdsZSA9IE1hdGguYXRhbjIoeTIgLSB5MSwgeDIgLSB4MSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKHgyLCB5Mik7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oeDIgLSAxMCAqIE1hdGguY29zKGFuZ2xlIC0gTWF0aC5QSSAvIDYpLCB5MiAtIDEwICogTWF0aC5zaW4oYW5nbGUgLSBNYXRoLlBJIC8gNikpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oeDIsIHkyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHgyIC0gMTAgKiBNYXRoLmNvcyhhbmdsZSArIE1hdGguUEkgLyA2KSwgeTIgLSAxMCAqIE1hdGguc2luKGFuZ2xlICsgTWF0aC5QSSAvIDYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJpZ2h0IHNpZGU6IDI3MCBkZWcgKDEuNSBQSSkgZG93biB0byAzNjAgZGVnICgyIFBJKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QW5nbGUgPSAxLjUgKiBNYXRoLlBJICsgKGkgLyBzZWdtZW50cykgKiAwLjUgKiBNYXRoLlBJOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZEFuZ2xlID0gMS41ICogTWF0aC5QSSArICgoaSArIDAuNikgLyBzZWdtZW50cykgKiAwLjUgKiBNYXRoLlBJOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHgxID0gMzAwICsgTWF0aC5jb3Moc3RhcnRBbmdsZSkgKiAxNTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTEgPSAzMDAgKyBNYXRoLnNpbihzdGFydEFuZ2xlKSAqIDE1MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4MiA9IDMwMCArIE1hdGguY29zKGVuZEFuZ2xlKSAqIDE1MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5MiA9IDMwMCArIE1hdGguc2luKGVuZEFuZ2xlKSAqIDE1MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oeDEsIHkxKTsgY3R4LmxpbmVUbyh4MiwgeTIpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXJyb3doZWFkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5nbGUgPSBNYXRoLmF0YW4yKHkyIC0geTEsIHgyIC0geDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyh4MiwgeTIpOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHgyIC0gMTAgKiBNYXRoLmNvcyhhbmdsZSAtIE1hdGguUEkgLyA2KSwgeTIgLSAxMCAqIE1hdGguc2luKGFuZ2xlIC0gTWF0aC5QSSAvIDYpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKHgyLCB5Mik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyh4MiAtIDEwICogTWF0aC5jb3MoYW5nbGUgKyBNYXRoLlBJIC8gNiksIHkyIC0gMTAgKiBNYXRoLnNpbihhbmdsZSArIE1hdGguUEkgLyA2KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExlZnQgVGhydXN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMTUwLCAzMDApOyBjdHgubGluZVRvKDEwMCwgMzAwKTsgY3R4LmxpbmVUbygxMTAsIDI5MCk7IGN0eC5tb3ZlVG8oMTAwLCAzMDApOyBjdHgubGluZVRvKDExMCwgMzEwKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZTc0YzNjJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiVGhydXN0IiwgMTAwLCAyODApOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJpZ2h0IFRocnVzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDQ1MCwgMzAwKTsgY3R4LmxpbmVUbyg1MDAsIDMwMCk7IGN0eC5saW5lVG8oNDkwLCAyOTApOyBjdHgubW92ZVRvKDUwMCwgMzAwKTsgY3R4LmxpbmVUbyg0OTAsIDMxMCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiVGhydXN0IiwgNTAwLCAyODApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMb2FkIGZyb20gQ2hhcmlvdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKGN4LCBjeSk7IGN0eC5saW5lVG8oY3gsIGN5KzQwKTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKGN4LTUsIGN5KzM1KTsgY3R4Lm1vdmVUbyhjeCwgY3krNDApOyBjdHgubGluZVRvKGN4KzUsIGN5KzM1KTsgY3R4LnN0cm9rZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJBcmNoIGRpcmVjdHMgbG9hZCBvdXR3YXJkIGFzIFRocnVzdC4iOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gIkNsaWNrIHRvIHNlZSBmb3JjZXMuIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzaW0ubG9vcCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gMTEuIEtFWVNUT05FCiAgICAgICAgICAgIGtleXN0b25lOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IGt5OiA1MCwgZHJhZ2dpbmc6IGZhbHNlIH07CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgc2ltLmNhbnZhcy5vbm1vdXNlZG93biA9IChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKE1hdGguYWJzKGUuY2xpZW50WCAtIHNpbS5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCAtIDMwMCkgPCAzMCkgc2ltLnN0YXRlLmRyYWdnaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5jYW52YXMub25tb3VzZW1vdmUgPSAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZihzaW0uc3RhdGUuZHJhZ2dpbmcpIHNpbS5zdGF0ZS5reSA9IE1hdGgubWF4KDUwLCBNYXRoLm1pbigxNTAsIGUuY2xpZW50WSAtIHNpbS5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wKSk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0uY2FudmFzLm9ubW91c2V1cCA9ICgpID0+IHNpbS5zdGF0ZS5kcmFnZ2luZyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBBcmNoIHNpZGVzCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzk1YTVhNic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygxNTAsIDMwMCk7IGN0eC5saW5lVG8oMjUwLCAxODApOyBjdHgubGluZVRvKDI3MCwgMjAwKTsgY3R4LmxpbmVUbygyMDAsIDMwMCk7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyg0NTAsIDMwMCk7IGN0eC5saW5lVG8oMzUwLCAxODApOyBjdHgubGluZVRvKDMzMCwgMjAwKTsgY3R4LmxpbmVUbyg0MDAsIDMwMCk7IGN0eC5maWxsKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBLZXlzdG9uZQogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlNzRjM2MnOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBreSA9IHNpbS5zdGF0ZS5reTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDI4MCwga3kpOyBjdHgubGluZVRvKDMyMCwga3kpOyBjdHgubGluZVRvKDMxMCwga3krNDApOyBjdHgubGluZVRvKDI5MCwga3krNDApOyBjdHguZmlsbCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoa3kgPj0gMTQwKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiQXJjaCBMb2NrZWQhIjsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiTG93ZXIgdGhlIEtleXN0b25lLiI7CgogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyAxMy4gU1VTUEVOU0lPTgogICAgICAgICAgICBzdXNwZW5zaW9uOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IHNhZzogNTAgfTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWNvbnRyb2xzJykuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCI+PHNwYW4gY2xhc3M9ImZvbnQtYm9sZCI+Q2FibGUgU2FnOjwvc3Bhbj48aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMjAiIG1heD0iMTUwIiB2YWx1ZT0iNTAiIGNsYXNzPSJmbGV4LTEiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLnN0YXRlLnNhZz1wYXJzZUludCh0aGlzLnZhbHVlKSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVG93ZXJzCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzM0NDk1ZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgxMDAsIDUwLCAyMCwgMjUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDQ4MCwgNTAsIDIwLCAyNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVjawogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM5NWE1YTYnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMjUwLCA2MDAsIDEwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1haW4gQ2FibGUKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNlNjdlMjInOyBjdHgubGluZVdpZHRoID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKDExMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgucXVhZHJhdGljQ3VydmVUbygzMDAsIDUwICsgc2ltLnN0YXRlLnNhZyAqIDIsIDQ5MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBTdXNwZW5kZXJzCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAxOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHg9MTMwOyB4PDQ4MDsgeCs9MjApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB5IG9mIHBhcmFib2xhIGF0IHgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgPSBhKHgtaCleMiArIGsuIFZlcnRleCAoMzAwLCA1MCtzYWcqMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDUwID0gYSgxMTAtMzAwKV4yICsgayA9PiBhIGFwcHJveAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9ICh4IC0gMTEwKSAvIDM4MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbXBsZSBsZXJwIGZvciB2aXN1YWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJlemllciBwb2ludCBjYWxjdWxhdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeSA9ICgxLXQpKigxLXQpKjUwICsgMiooMS10KSp0Kig1MCtzaW0uc3RhdGUuc2FnKjIpICsgdCp0KjUwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oeCwgeSk7IGN0eC5saW5lVG8oeCwgMjUwKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyAxNC4gVEVOU0lPTgogICAgICAgICAgICBzdXNwZW5zaW9uX3RlbnNpb246IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgd2VpZ2h0OiAxIH07CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jb250cm9scycpLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQiPjxzcGFuIGNsYXNzPSJmb250LWJvbGQiPkRlY2sgV2VpZ2h0Ojwvc3Bhbj48aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMSIgbWF4PSIxMCIgdmFsdWU9IjEiIGNsYXNzPSJmbGV4LTEiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLnN0YXRlLndlaWdodD1wYXJzZUludCh0aGlzLnZhbHVlKSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVG93ZXIKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMzQ0OTVlJzsgY3R4LmZpbGxSZWN0KDI5MCwgNTAsIDIwLCAyNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FibGUKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVuc2lvbiA9IHNpbS5zdGF0ZS53ZWlnaHQgKiAyOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSB0ZW5zaW9uID4gMTUgPyAnI2U3NGMzYycgOiAnIzI3YWU2MCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAzICsgc2ltLnN0YXRlLndlaWdodC8yOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMzAwLCA1MCk7IGN0eC5saW5lVG8oNTAsIDI1MCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDMwMCwgNTApOyBjdHgubGluZVRvKDU1MCwgMjUwKTsgY3R4LnN0cm9rZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gYENhYmxlIFRlbnNpb246ICR7dGVuc2lvbiAqIDEwMDB9IFRvbnNgOwoKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzaW0ubG9vcCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gMTYuIENBQkxFIFNUQVlFRAogICAgICAgICAgICBjYWJsZXN0YXk6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgdHlwZTogJ2ZhbicgfTsKICAgICAgICAgICAgICAgICAgICBzaW0uY2FudmFzLm9uY2xpY2sgPSAoKSA9PiBzaW0uc3RhdGUudHlwZSA9IHNpbS5zdGF0ZS50eXBlID09PSAnZmFuJyA/ICdoYXJwJyA6ICdmYW4nOwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBUb3dlcgogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzNDQ5NWUnOyBjdHguZmlsbFJlY3QoMjkwLCA1MCwgMjAsIDI1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlY2sKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDUwLCAyNTAsIDUwMCwgMTApOwoKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNmMzljMTInOyBjdHgubGluZVdpZHRoID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW0uc3RhdGUudHlwZSA9PT0gJ2ZhbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDU7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygzMDAsIDYwKTsgY3R4LmxpbmVUbygxMDAgKyBpKjQwLCAyNTApOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDMwMCwgNjApOyBjdHgubGluZVRvKDUwMCAtIGkqNDAsIDI1MCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJGYW4gRGVzaWduOiBDYWJsZXMgY29ubmVjdCB0byB0b3Agb2YgdG93ZXIuIjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDU7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygzMDAsIDYwICsgaSozMCk7IGN0eC5saW5lVG8oMTAwICsgaSo0MCwgMjUwKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygzMDAsIDYwICsgaSozMCk7IGN0eC5saW5lVG8oNTAwIC0gaSo0MCwgMjUwKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gIkhhcnAgRGVzaWduOiBDYWJsZXMgYXJlIHBhcmFsbGVsLiI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDE3LiBSRVNPTkFOQ0UKICAgICAgICAgICAgcmVzb25hbmNlOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IHdpbmQ6IDAsIHQ6IDAgfTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWNvbnRyb2xzJykuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCI+PHNwYW4gY2xhc3M9ImZvbnQtYm9sZCI+V2luZCBTcGVlZDo8L3NwYW4+PGlucHV0IHR5cGU9InJhbmdlIiBtaW49IjAiIG1heD0iMTAiIHZhbHVlPSIwIiBjbGFzcz0iZmxleC0xIiBvbmlucHV0PSJTaW11bGF0aW9ucy5zdGF0ZS53aW5kPXBhcnNlSW50KHRoaXMudmFsdWUpIj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS50ICs9IDAuMTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtcCA9IChzaW0uc3RhdGUud2luZCA9PT0gNSkgPyA0MCA6IHNpbS5zdGF0ZS53aW5kICogMjsgLy8gUmVzb25hbmNlIGF0IHdpbmQ9NQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMzNDQ5NWUnOyBjdHgubGluZVdpZHRoID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHg9NTA7IHg8NTUwOyB4KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSAxNzUgKyBNYXRoLnNpbih4KjAuMDIgKyBzaW0uc3RhdGUudCkgKiBhbXA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4PT09NTApIGN0eC5tb3ZlVG8oeCx5KTsgZWxzZSBjdHgubGluZVRvKHgseSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2ltLnN0YXRlLndpbmQgPT09IDUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJEQU5HRVIhIFJFU09OQU5DRSBERVRFQ1RFRCEiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLmNsYXNzTmFtZSA9ICJtdC0zIHRleHQtY2VudGVyIGZvbnQtYm9sZCB0ZXh0LXJlZC02MDAgYW5pbWF0ZS1wdWxzZSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiU3RhYmxlLiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykuY2xhc3NOYW1lID0gIm10LTMgdGV4dC1jZW50ZXIgZm9udC1ib2xkIHRleHQtYnJhbmQtZGFyayI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDE4LiBNQVRFUklBTFMKICAgICAgICAgICAgbWF0ZXJpYWxzOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IGNydXNoZWQ6IGZhbHNlIH07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICJweC00IHB5LTIgYmctYmx1ZS02MDAgdGV4dC13aGl0ZSByb3VuZGVkIGZvbnQtYm9sZCI7CiAgICAgICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gIlRlc3QgQ29uY3JldGUiOwogICAgICAgICAgICAgICAgICAgIGJ0bi5vbmNsaWNrID0gKCkgPT4gc2ltLnN0YXRlLmNydXNoZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tY29udHJvbHMnKS5hcHBlbmRDaGlsZChidG4pOwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmVzcwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmVzc1kgPSBzaW0uc3RhdGUuY3J1c2hlZCA/IDIwMCA6IDEwMDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMmMzZTUwJzsgY3R4LmZpbGxSZWN0KDI1MCwgMCwgMTAwLCBwcmVzc1kpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmxvY2sKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2ltLnN0YXRlLmNydXNoZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzk1YTVhNic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMjUwLCAzMDApOyBjdHgubGluZVRvKDM1MCwgMzAwKTsgY3R4LmxpbmVUbygzNjAsIDI4MCk7IGN0eC5saW5lVG8oMjQwLCAyODApOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gIkNvbmNyZXRlIGNydW1ibGVkIHVuZGVyIHRlbnNpb24vc2hlYXIhIjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2JkYzNjNyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMjUwLCAyMDAsIDEwMCwgMTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJDb25jcmV0ZSBCbG9jayBSZWFkeS4iOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyAxOS4gUElMRVMKICAgICAgICAgICAgcGlsZXM6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgZGVwdGg6IDAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0uY2FudmFzLm9uY2xpY2sgPSAoKSA9PiB7IGlmKHNpbS5zdGF0ZS5kZXB0aCA8IDE1MCkgc2ltLnN0YXRlLmRlcHRoICs9IDEwOyB9OwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBXYXRlcgogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzNDk4ZGInOyBjdHguZmlsbFJlY3QoMCwgMTAwLCA2MDAsIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE11ZAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM3OTU1NDgnOyBjdHguZmlsbFJlY3QoMCwgMjAwLCA2MDAsIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJvY2sKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjNDI0MjQyJzsgY3R4LmZpbGxSZWN0KDAsIDMwMCwgNjAwLCA1MCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBQaWxlCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2VjZjBmMSc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgyODAsIDEwMCwgNDAsIDEwMCArIHNpbS5zdGF0ZS5kZXB0aCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW1tZXIKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZTc0YzNjJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDI3MCwgNTAgKyAoTWF0aC5zaW4oRGF0ZS5ub3coKS8xMDApKjIwKSwgNjAsIDQwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNpbS5zdGF0ZS5kZXB0aCA+PSAxMDApIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJIaXQgQmVkcm9jayEgRm91bmRhdGlvbiBTZWN1cmUuIjsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiQ2xpY2sgdG8gZHJpdmUgcGlsZSBkZWVwZXIuIjsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDIwLiBDQU5USUxFVkVSCiAgICAgICAgICAgIGNhbnRpbGV2ZXI6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgY291bnRlcndlaWdodDogNTAsIHRydWNrWDogMCwgY29sbGFwc2VkOiBmYWxzZSB9OwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBjb250cm9scwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tY29udHJvbHMnKS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZmxleC1jb2wgZ2FwLTIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJmb250LWJvbGQgdy0zMiI+QW5jaG9yIFdlaWdodDo8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhbmdlIiBtaW49IjAiIG1heD0iMTAwIiB2YWx1ZT0iNTAiIGNsYXNzPSJmbGV4LTEiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLnN0YXRlLmNvdW50ZXJ3ZWlnaHQ9cGFyc2VJbnQodGhpcy52YWx1ZSkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLnN0YXRlLnRydWNrWD0wOyBTaW11bGF0aW9ucy5zdGF0ZS5jb2xsYXBzZWQ9ZmFsc2U7IiBjbGFzcz0icHgtNCBweS0yIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcm91bmRlZCBmb250LWJvbGQgc2VsZi1jZW50ZXIiPlNlbmQgVHJ1Y2s8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2F0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMzQ5OGRiJzsgY3R4LmZpbGxSZWN0KDAsIDMwMCwgNjAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBQaWVycwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM3ZjhjOGQnOyAKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDE0MCwgMjAwLCAyMCwgMTAwKTsgLy8gTGVmdCBQaWVyCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCg0NDAsIDIwMCwgMjAsIDEwMCk7IC8vIFJpZ2h0IFBpZXIKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBoeXNpY3MgTG9naWMKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWRlYWwgY291bnRlcndlaWdodCB0byBob2xkIHRoZSBzdXNwZW5kZWQgc3BhbiArIHRydWNrCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExldCdzIHNheSBzdXNwZW5kZWQgc3BhbiB3ZWlnaHMgMjAuIFRydWNrIHdlaWdocyAzMC4KICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXJtcyBhcmUgYmFsYW5jZWQgYnkgdGhlbXNlbHZlcy4KICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiB0cnVjayBpcyBpbiBjZW50ZXIgKHN1c3BlbmRlZCBzcGFuKSwgbG9hZCBpcyBoaWdoLgogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJ1Y2tMb2FkID0gKHNpbS5zdGF0ZS50cnVja1ggPiAyNTAgJiYgc2ltLnN0YXRlLnRydWNrWCA8IDM1MCkgPyAxIDogMDsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gTW9tZW50IGJhbGFuY2U6IAogICAgICAgICAgICAgICAgICAgICAgICAvLyBBbmNob3IgQXJtICogQ291bnRlcndlaWdodCA9IENhbnRpbGV2ZXIgQXJtICogKFNlbGYgKyBTcGFuLzIgKyBUcnVjay8yKQogICAgICAgICAgICAgICAgICAgICAgICAvLyBTaW1wbGlmaWVkOiBSZXF1aXJlZCBDVyBpbmNyZWFzZXMgYXMgdHJ1Y2sgbW92ZXMgdG8gY2VudGVyLgogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlcXVpcmVkQ1cgPSAzMDsgLy8gQmFzZSBmb3Igc3BhbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2ltLnN0YXRlLnRydWNrWCA+IDE1MCAmJiBzaW0uc3RhdGUudHJ1Y2tYIDwgNDUwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcnVjayBjb250cmlidXRlcyB0byBtb21lbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1heCByZXF1aXJlbWVudCB3aGVuIHRydWNrIGlzIGF0IHRpcCBvZiBjYW50aWxldmVyIG9yIG9uIHN1c3BlbmRlZCBzcGFuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZENXID0gNjA7IAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYW5nbGUgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2ltLnN0YXRlLmNvdW50ZXJ3ZWlnaHQgPCByZXF1aXJlZENXICYmIHNpbS5zdGF0ZS50cnVja1ggPiAxNTAgJiYgc2ltLnN0YXRlLnRydWNrWCA8IDQ1MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGlwcGluZyBpbndhcmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gKHJlcXVpcmVkQ1cgLSBzaW0uc3RhdGUuY291bnRlcndlaWdodCkgKiAwLjAwNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbmdsZSA+IDAuMikgc2ltLnN0YXRlLmNvbGxhcHNlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2ltLnN0YXRlLmNvdW50ZXJ3ZWlnaHQgPiA4MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRpcHBpbmcgb3V0d2FyZCAodG9vIG11Y2ggY291bnRlcndlaWdodCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IC0oc2ltLnN0YXRlLmNvdW50ZXJ3ZWlnaHQgLSA4MCkgKiAwLjAwNTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpbS5zdGF0ZS5jb2xsYXBzZWQpIGFuZ2xlID0gMC4zOyAvLyBGdWxseSBjb2xsYXBzZWQKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgTGVmdCBDYW50aWxldmVyCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoMTUwLCAyMDApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKGFuZ2xlKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRydXNzIHN0cnVjdHVyZSAoc2ltcGxpZmllZCkKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMyYzNlNTAnOyBjdHgubGluZVdpZHRoID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKC0xMDAsIDApOyBjdHgubGluZVRvKDEwMCwgMCk7IC8vIERlY2sgbGV2ZWwKICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygtMTAwLCAtNTApOyBjdHgubGluZVRvKDEwMCwgLTUwKTsgLy8gVG9wIGNob3JkCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oMTAwLCAwKTsgY3R4LmxpbmVUbygwLCAtODApOyBjdHgubGluZVRvKC0xMDAsIDApOyAvLyBUb3dlci9XZWIKICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygtMTAwLCAwKTsgY3R4LmxpbmVUbygtMTAwLCAtNTApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudGVyd2VpZ2h0IGJveAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlNjdlMjInOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjd1NpemUgPSAxMCArIHNpbS5zdGF0ZS5jb3VudGVyd2VpZ2h0IC8gMjsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KC0xMDAgLSBjd1NpemUvMiwgLTIwLCBjd1NpemUsIDQwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IFJpZ2h0IENhbnRpbGV2ZXIKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSg0NTAsIDIwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoLWFuZ2xlKTsgLy8gUm90YXRlcyBvcHBvc2l0ZSB3YXkKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMmMzZTUwJzsgY3R4LmxpbmVXaWR0aCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygtMTAwLCAwKTsgY3R4LmxpbmVUbygxMDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKC0xMDAsIC01MCk7IGN0eC5saW5lVG8oMTAwLCAtNTApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKDEwMCwgMCk7IGN0eC5saW5lVG8oMCwgLTgwKTsgY3R4LmxpbmVUbygtMTAwLCAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygxMDAsIDApOyBjdHgubGluZVRvKDEwMCwgLTUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygtMTAwLCAwKTsgY3R4LmxpbmVUbygtMTAwLCAtNTApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudGVyd2VpZ2h0IGJveAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlNjdlMjInOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMTAwIC0gY3dTaXplLzIsIC0yMCwgY3dTaXplLCA0MCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VzcGVuZGVkIFNwYW4gKENlbnRlcikKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUG9zaXRpb24gZGVwZW5kcyBvbiB0aXBzIG9mIGNhbnRpbGV2ZXJzCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExlZnQgdGlwOiAxNTAgKyAxMDAqY29zKGFuZ2xlKSwgMjAwICsgMTAwKnNpbihhbmdsZSkKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmlnaHQgdGlwOiA0NTAgLSAxMDAqY29zKGFuZ2xlKSwgMjAwICsgMTAwKnNpbihhbmdsZSkKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbHggPSAxNTAgKyAxMDAgKiBNYXRoLmNvcyhhbmdsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGx5ID0gMjAwICsgMTAwICogTWF0aC5zaW4oYW5nbGUpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByeCA9IDQ1MCAtIDEwMCAqIE1hdGguY29zKGFuZ2xlKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcnkgPSAyMDAgKyAxMDAgKiBNYXRoLnNpbihhbmdsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzI3YWU2MCc7IGN0eC5saW5lV2lkdGggPSA0OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8obHgsIGx5KTsgY3R4LmxpbmVUbyhyeCwgcnkpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBUcnVjawogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNpbS5zdGF0ZS5jb2xsYXBzZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS50cnVja1ggKz0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW0uc3RhdGUudHJ1Y2tYID4gNjUwKSBzaW0uc3RhdGUudHJ1Y2tYID0gLTUwOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgVHJ1Y2sgWSBiYXNlZCBvbiBicmlkZ2UgZ2VvbWV0cnkKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHR5ID0gMjAwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2ltLnN0YXRlLnRydWNrWCA8IDE1MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBwcm9hY2ggKGZsYXQpIC0gYXNzdW1pbmcgYWJ1dG1lbnQgZXhpc3RzIG9yIGp1c3QgZmx5aW5nIGluCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eSA9IDIwMDsgCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2ltLnN0YXRlLnRydWNrWCA+PSAxNTAgJiYgc2ltLnN0YXRlLnRydWNrWCA8PSAyNTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExlZnQgQ2FudGlsZXZlciBEZWNrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWxhdGl2ZSB4IGZyb20gcGl2b3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbFggPSBzaW0uc3RhdGUudHJ1Y2tYIC0gMTUwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHkgPSAyMDAgKyByZWxYICogTWF0aC5zaW4oYW5nbGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNpbS5zdGF0ZS50cnVja1ggPiAyNTAgJiYgc2ltLnN0YXRlLnRydWNrWCA8IDM1MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VzcGVuZGVkIFNwYW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludGVycG9sYXRlIGJldHdlZW4gdGlwcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IChzaW0uc3RhdGUudHJ1Y2tYIC0gMjUwKSAvIDEwMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5ID0gbHkgKyAocnkgLSBseSkgKiB0OwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNpbS5zdGF0ZS50cnVja1ggPj0gMzUwICYmIHNpbS5zdGF0ZS50cnVja1ggPD0gNDUwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSaWdodCBDYW50aWxldmVyIERlY2sKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbFggPSA0NTAgLSBzaW0uc3RhdGUudHJ1Y2tYOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHkgPSAyMDAgKyByZWxYICogTWF0aC5zaW4oYW5nbGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2ltLnN0YXRlLmNvbGxhcHNlZCkgdHkgKz0gNTA7IC8vIEZhbGwgaWYgY29sbGFwc2VkCgogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNjMDM5MmInOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3Qoc2ltLnN0YXRlLnRydWNrWCAtIDE1LCB0eSAtIDIwLCAzMCwgMTUpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoc2ltLnN0YXRlLnRydWNrWCAtIDEwLCB0eSAtIDUsIDUsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhzaW0uc3RhdGUudHJ1Y2tYICsgMTAsIHR5IC0gNSwgNSwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpbS5zdGF0ZS5jb2xsYXBzZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJCcmlkZ2UgQ29sbGFwc2VkISBJbmNyZWFzZSBDb3VudGVyd2VpZ2h0LiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykuY2xhc3NOYW1lID0gIm10LTMgdGV4dC1jZW50ZXIgZm9udC1ib2xkIHRleHQtcmVkLTYwMCI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoTWF0aC5hYnMoYW5nbGUpID4gMC4wNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gIlVuc3RhYmxlISI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykuY2xhc3NOYW1lID0gIm10LTMgdGV4dC1jZW50ZXIgZm9udC1ib2xkIHRleHQtb3JhbmdlLTUwMCI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiQnJpZGdlIFN0YWJsZS4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLmNsYXNzTmFtZSA9ICJtdC0zIHRleHQtY2VudGVyIGZvbnQtYm9sZCB0ZXh0LWdyZWVuLXByaW1hcnkiOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyAyMS4gQkFTQ1VMRQogICAgICAgICAgICBiYXNjdWxlOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IGFuZ2xlOiAwIH07CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jb250cm9scycpLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQiPjxzcGFuIGNsYXNzPSJmb250LWJvbGQiPkxpZnQ6PC9zcGFuPjxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPSIwIiBtYXg9IjQ1IiB2YWx1ZT0iMCIgY2xhc3M9ImZsZXgtMSIgb25pbnB1dD0iU2ltdWxhdGlvbnMuc3RhdGUuYW5nbGU9cGFyc2VJbnQodGhpcy52YWx1ZSkiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhdGVyCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzM0OThkYic7IGN0eC5maWxsUmVjdCgwLCAzMDAsIDYwMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBQaWVycwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM3ZjhjOGQnOyBjdHguZmlsbFJlY3QoMTAwLCAyNTAsIDUwLCAxMDApOyBjdHguZmlsbFJlY3QoNDUwLCAyNTAsIDUwLCAxMDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGVmdCBMZWFmCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoMTUwLCAyNTApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKC1zaW0uc3RhdGUuYW5nbGUgKiBNYXRoLlBJLzE4MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzJjM2U1MCc7IGN0eC5maWxsUmVjdCgwLCAtMTAsIDE1MCwgMjApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmlnaHQgTGVhZgogICAgICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKDQ1MCwgMjUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnJvdGF0ZShzaW0uc3RhdGUuYW5nbGUgKiBNYXRoLlBJLzE4MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzJjM2U1MCc7IGN0eC5maWxsUmVjdCgtMTUwLCAtMTAsIDE1MCwgMjApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2hpcAogICAgICAgICAgICAgICAgICAgICAgICBpZihzaW0uc3RhdGUuYW5nbGUgPiAzMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZTc0YzNjJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgyODAsIDI4MCwgNDAsIDIwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgyOTAsIDI2MCwgMjAsIDIwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJTaGlwIFBhc3NpbmcuIjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJCcmlkZ2UgQ2xvc2VkLiI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDIyLiBMT0FEIFRFU1QKICAgICAgICAgICAgbG9hZF90ZXN0OiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IGNhcnM6IDAsIGJyb2tlbjogZmFsc2UgfTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NOYW1lID0gInB4LTQgcHktMiBiZy1ncmVlbi02MDAgdGV4dC13aGl0ZSByb3VuZGVkIGZvbnQtYm9sZCI7CiAgICAgICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gIkFkZCBUcnVjayAoMTAgVG9ucykiOwogICAgICAgICAgICAgICAgICAgIGJ0bi5vbmNsaWNrID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZighc2ltLnN0YXRlLmJyb2tlbikgc2ltLnN0YXRlLmNhcnMrKzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2ltLnN0YXRlLmNhcnMgPiA1KSBzaW0uc3RhdGUuYnJva2VuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tY29udHJvbHMnKS5hcHBlbmRDaGlsZChidG4pOwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBCcmlkZ2UKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2ltLnN0YXRlLmJyb2tlbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDAsIDIwMCk7IGN0eC5saW5lVG8oMzAwLCAzMDApOyBjdHgubGluZVRvKDYwMCwgMjAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjZTc0YzNjJzsgY3R4LmxpbmVXaWR0aCA9IDEwOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiQlJJREdFIENPTExBUFNFRCEgVG9vIGhlYXZ5LiI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCwgMjAwKTsgY3R4LmxpbmVUbyg2MDAsIDIwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzJjM2U1MCc7IGN0eC5saW5lV2lkdGggPSAxMDsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IENhcnMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2YxYzQwZic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxzaW0uc3RhdGUuY2FyczsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDUwICsgaSo4MCwgMTgwLCA0MCwgMjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gYExvYWQ6ICR7c2ltLnN0YXRlLmNhcnMgKiAxMH0gVG9uc2A7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDIzLiBGVVRVUkUKICAgICAgICAgICAgZnV0dXJlOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IAogICAgICAgICAgICAgICAgICAgICAgICBsaW5lczogW10sCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRMaW5lOiAwLAogICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzczogMAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgVHJ1c3MgRGVzaWduIGZvciAzRCBQcmludGluZwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHlCYXNlID0gMjUwOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHlBcmNoVG9wID0gMTAwOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwYW4gPSA1MDA7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRYID0gNTA7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VnbWVudHMgPSAxMDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWdXaWR0aCA9IHNwYW4gLyBzZWdtZW50czsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBCb3R0b20gY2hvcmQKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUubGluZXMucHVzaCh7eDE6IHN0YXJ0WCwgeTE6IHlCYXNlLCB4Mjogc3RhcnRYICsgc3BhbiwgeTI6IHlCYXNlfSk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gQXJjaCAoVG9wIGNob3JkIHNlZ21lbnRzKSAmIFdlYiBtZW1iZXJzCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2V0SCA9ICh4KSA9PiAwLjAwMjQgKiBNYXRoLnBvdyh4IC0gMzAwLCAyKSArIHlBcmNoVG9wOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHNlZ21lbnRzOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeDEgPSBzdGFydFggKyBpICogc2VnV2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHgyID0gc3RhcnRYICsgKGkrMSkgKiBzZWdXaWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRvcCBjaG9yZCBzZWdtZW50CiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5saW5lcy5wdXNoKHt4MTogeDEsIHkxOiBnZXRIKHgxKSwgeDI6IHgyLCB5MjogZ2V0SCh4Mil9KTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVydGljYWwKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLmxpbmVzLnB1c2goe3gxOiB4MiwgeTE6IHlCYXNlLCB4MjogeDIsIHkyOiBnZXRIKHgyKX0pOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBEaWFnb25hbAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHNlZ21lbnRzLzIpIHNpbS5zdGF0ZS5saW5lcy5wdXNoKHt4MTogeDEsIHkxOiB5QmFzZSwgeDI6IHgyLCB5MjogZ2V0SCh4Mil9KTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBzaW0uc3RhdGUubGluZXMucHVzaCh7eDE6IHgxLCB5MTogZ2V0SCh4MSksIHgyOiB4MiwgeTI6IHlCYXNlfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IHZlcnRpY2FsCiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLmxpbmVzLnB1c2goe3gxOiBzdGFydFgsIHkxOiB5QmFzZSwgeDI6IHN0YXJ0WCwgeTI6IGdldEgoc3RhcnRYKX0pOwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBCYWNrZ3JvdW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzExMSc7IGN0eC5maWxsUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMjIyJzsgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDYwMDsgaSs9MjApIHsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKGksMCk7IGN0eC5saW5lVG8oaSwzNTApOyBjdHguc3Ryb2tlKCk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8MzUwOyBpKz0yMCkgeyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCxpKTsgY3R4LmxpbmVUbyg2MDAsaSk7IGN0eC5zdHJva2UoKTsgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBjb21wbGV0ZWQgbGluZXMKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMwMGZmZmYnOyBjdHgubGluZVdpZHRoID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSA1OyBjdHguc2hhZG93Q29sb3IgPSAnIzAwZmZmZic7IGN0eC5saW5lQ2FwID0gJ3JvdW5kJzsKCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHNpbS5zdGF0ZS5jdXJyZW50TGluZTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsID0gc2ltLnN0YXRlLmxpbmVzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKGwueDEsIGwueTEpOyBjdHgubGluZVRvKGwueDIsIGwueTIpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgY3VycmVudCBsaW5lCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW0uc3RhdGUuY3VycmVudExpbmUgPCBzaW0uc3RhdGUubGluZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsID0gc2ltLnN0YXRlLmxpbmVzW3NpbS5zdGF0ZS5jdXJyZW50TGluZV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkeCA9IGwueDIgLSBsLngxOyBjb25zdCBkeSA9IGwueTIgLSBsLnkxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuID0gTWF0aC5zcXJ0KGR4KmR4ICsgZHkqZHkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUucHJvZ3Jlc3MgKz0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW0uc3RhdGUucHJvZ3Jlc3MgPj0gbGVuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLnByb2dyZXNzID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUuY3VycmVudExpbmUrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHNpbS5zdGF0ZS5wcm9ncmVzcyAvIGxlbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjeCA9IGwueDEgKyBkeCAqIHQ7IGNvbnN0IGN5ID0gbC55MSArIGR5ICogdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8obC54MSwgbC55MSk7IGN0eC5saW5lVG8oY3gsIGN5KTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5venpsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zaGFkb3dCbHVyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZjAwZmYnOyBjdHguZmlsbFJlY3QoY3ggLSAzLCBjeSAtIDE1LCA2LCAxNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZpbGxSZWN0KGN4IC0gMTAsIGN5IC0gMzAsIDIwLCAxNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmZjAwJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKGN4LCBjeSwgMywgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW0uc3RhdGUucHJvZ3Jlc3MrKyA+IDEwMCkgeyBzaW0uc3RhdGUuY3VycmVudExpbmUgPSAwOyBzaW0uc3RhdGUucHJvZ3Jlc3MgPSAwOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc2hhZG93Qmx1ciA9IDA7IGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IGN0eC5mb250ID0gIjIwcHggc2Fucy1zZXJpZiI7IGN0eC50ZXh0QWxpZ24gPSAiY2VudGVyIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiQXV0b21hdGVkIENvbnN0cnVjdGlvbiBDb21wbGV0ZSIsIDMwMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiQXV0b25vbW91cyAzRCBQcmludGluZyBpbiBwcm9ncmVzcy4uLiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDI0LiBDRVJUSUZJQ0FURQogICAgICAgICAgICBjZXJ0aWZpY2F0ZTogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyBzdGFtcGVkOiBmYWxzZSB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5jYW52YXMub25jbGljayA9ICgpID0+IHNpbS5zdGF0ZS5zdGFtcGVkID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IGN0eC5maWxsUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjZjFjNDBmJzsgY3R4LmxpbmVXaWR0aCA9IDEwOyBjdHguc3Ryb2tlUmVjdCgyMCwgMjAsIDU2MCwgMzEwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzJjM2U1MCc7IGN0eC5mb250ID0gJzMwcHggc2VyaWYnOyBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiQ2VydGlmaWNhdGUgb2YgTWFzdGVyeSIsIDMwMCwgMTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnMjBweCBzYW5zLXNlcmlmJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJBd2FyZGVkIHRvIHRoZSBBcHByZW50aWNlIiwgMzAwLCAxNTApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIkZvciBleGNlbGxlbmNlIGluIEJyaWRnZSBFbmdpbmVlcmluZyIsIDMwMCwgMTgwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNpbS5zdGF0ZS5zdGFtcGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSg0NTAsIDI1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKC0wLjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKDAsMCw2MCwwLE1hdGguUEkqMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2MwMzkyYic7IGN0eC5saW5lV2lkdGggPSA1OyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMTkyLCA1NywgNDMsIDAuMSknOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjYzAzOTJiJzsgY3R4LmZvbnQgPSAnYm9sZCAyMHB4IHNhbnMtc2VyaWYnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJBUFBST1ZFRCIsIDAsIDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJDZXJ0aWZpZWQhIjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJDbGljayB0byBTdGFtcC4iOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyBGYWxsYmFjayBmb3Igc3RhdGljIHBhZ2VzCiAgICAgICAgICAgIGJlYW1fc3RhdGljOiB7IAogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7IAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gU2t5L0JhY2tncm91bmQKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmMGY4ZmYnOyBjdHguZmlsbFJlY3QoMCwwLDYwMCwzNTApOwoKICAgICAgICAgICAgICAgICAgICAvLyBHcm91bmQKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMyN2FlNjAnOyBjdHguZmlsbFJlY3QoMCwgMzAwLCA2MDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBXYXRlcgogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzM0OThkYic7IGN0eC5maWxsUmVjdCgxNTAsIDMxMCwgMzAwLCA0MCk7CgogICAgICAgICAgICAgICAgICAgIC8vIFBpZXJzCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjN2Y4YzhkJzsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMTIwLCAyMDAsIDMwLCAxMTApOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCg0NTAsIDIwMCwgMzAsIDExMCk7CgogICAgICAgICAgICAgICAgICAgIC8vIEJlYW0KICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlNzRjM2MnOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgxMjAsIDIwMCwgMzYwLCAyMCk7CgogICAgICAgICAgICAgICAgICAgIC8vIExhYmVscwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzJjM2U1MCc7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnYm9sZCAxNHB4IHNhbnMtc2VyaWYnOwogICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBGb3JjZSBBcnJvd3MKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzJjM2U1MCc7IGN0eC5saW5lV2lkdGggPSAyOwoKICAgICAgICAgICAgICAgICAgICAvLyBMb2FkIChHcmF2aXR5L1RyYWZmaWMpCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJMb2FkIChXZWlnaHQpIiwgMzAwLCAxNTApOwogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygzMDAsIDE2MCk7IGN0eC5saW5lVG8oMzAwLCAxOTUpOyAKICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKDI5NSwgMTkwKTsgY3R4Lm1vdmVUbygzMDAsIDE5NSk7IGN0eC5saW5lVG8oMzA1LCAxOTApOyBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgIC8vIFJlYWN0aW9ucyAoUGllcnMgcHVzaGluZyB1cCkKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIlJlYWN0aW9uIiwgMTM1LCAzMzApOwogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygxMzUsIDMxNSk7IGN0eC5saW5lVG8oMTM1LCAyMjUpOyAKICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKDEzMCwgMjMwKTsgY3R4Lm1vdmVUbygxMzUsIDIyNSk7IGN0eC5saW5lVG8oMTQwLCAyMzApOyBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiUmVhY3Rpb24iLCA0NjUsIDMzMCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDQ2NSwgMzE1KTsgY3R4LmxpbmVUbyg0NjUsIDIyNSk7IAogICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oNDYwLCAyMzApOyBjdHgubW92ZVRvKDQ2NSwgMjI1KTsgY3R4LmxpbmVUbyg0NzAsIDIzMCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBTcGFuIExhYmVsCiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDE1MCwgMjQwKTsgY3R4LmxpbmVUbyg0NTAsIDI0MCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIlNwYW4gKERpc3RhbmNlKSIsIDMwMCwgMjYwKTsKICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRydXNzX3N0YXRpYzogeyAKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgeyAKICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFNreS9CYWNrZ3JvdW5kCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZjBmOGZmJzsgY3R4LmZpbGxSZWN0KDAsMCw2MDAsMzUwKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gR3JvdW5kCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMjdhZTYwJzsgY3R4LmZpbGxSZWN0KDAsIDMwMCwgNjAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gV2F0ZXIKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzNDk4ZGInOyBjdHguZmlsbFJlY3QoMTUwLCAzMTAsIDMwMCwgNDApOwoKICAgICAgICAgICAgICAgICAgICAvLyBQaWVycwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzdmOGM4ZCc7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDEwMCwgMjAwLCAzMCwgMTEwKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoNDcwLCAyMDAsIDMwLCAxMTApOwoKICAgICAgICAgICAgICAgICAgICAvLyBUcnVzcyBTdHJ1Y3R1cmUKICAgICAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gNDsKICAgICAgICAgICAgICAgICAgICBjdHgubGluZUNhcCA9ICdyb3VuZCc7CiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVKb2luID0gJ3JvdW5kJzsKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzJjM2U1MCc7CgogICAgICAgICAgICAgICAgICAgIC8vIEJvdHRvbSBDaG9yZAogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygxMDAsIDIwMCk7IGN0eC5saW5lVG8oNTAwLCAyMDApOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gVG9wIENob3JkCiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDE1MCwgMTIwKTsgY3R4LmxpbmVUbyg0NTAsIDEyMCk7IGN0eC5zdHJva2UoKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gRGlhZ29uYWxzICYgVmVydGljYWxzCiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgIC8vIExlZnQgc2xvcGUKICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKDEwMCwgMjAwKTsgY3R4LmxpbmVUbygxNTAsIDEyMCk7CiAgICAgICAgICAgICAgICAgICAgLy8gUmlnaHQgc2xvcGUKICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKDUwMCwgMjAwKTsgY3R4LmxpbmVUbyg0NTAsIDEyMCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gWmlnLXphZ3MKICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKDE1MCwgMTIwKTsgY3R4LmxpbmVUbygyMDAsIDIwMCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbygyNTAsIDEyMCk7IGN0eC5saW5lVG8oMzAwLCAyMDApOwogICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oMzUwLCAxMjApOyBjdHgubGluZVRvKDQwMCwgMjAwKTsKICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKDQ1MCwgMTIwKTsKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgIC8vIEpvaW50cwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzM0NDk1ZSc7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgam9pbnRzID0gWwogICAgICAgICAgICAgICAgICAgICAgICB7eDoxMDAsIHk6MjAwfSwge3g6NTAwLCB5OjIwMH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHt4OjE1MCwgeToxMjB9LCB7eDo0NTAsIHk6MTIwfSwKICAgICAgICAgICAgICAgICAgICAgICAge3g6MjAwLCB5OjIwMH0sIHt4OjI1MCwgeToxMjB9LAogICAgICAgICAgICAgICAgICAgICAgICB7eDozMDAsIHk6MjAwfSwge3g6MzUwLCB5OjEyMH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHt4OjQwMCwgeToyMDB9CiAgICAgICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgICAgICAgICBqb2ludHMuZm9yRWFjaChqID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKGoueCwgai55LCA1LCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAvLyBMYWJlbHMKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMyYzNlNTAnOwogICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gJ2JvbGQgMTRweCBzYW5zLXNlcmlmJzsKICAgICAgICAgICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJUb3AgQ2hvcmQgKENvbXByZXNzaW9uKSIsIDMwMCwgMTAwKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIkJvdHRvbSBDaG9yZCAoVGVuc2lvbikiLCAzMDAsIDIzMCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gRm9yY2UgYXJyb3dzIG9uIG1lbWJlcnMgKHNpbXBsaWZpZWQgdmlzdWFsKQogICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjZTc0YzNjJzsgLy8gQ29tcHJlc3Npb24KICAgICAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMjsKICAgICAgICAgICAgICAgICAgICAvLyBBcnJvd3MgcG9pbnRpbmcgaW4gb24gdG9wIGNob3JkCiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDI4MCwgMTEwKTsgY3R4LmxpbmVUbygyOTAsIDExMCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMzIwLCAxMTApOyBjdHgubGluZVRvKDMxMCwgMTEwKTsgY3R4LnN0cm9rZSgpOwoKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzM0OThkYic7IC8vIFRlbnNpb24KICAgICAgICAgICAgICAgICAgICAvLyBBcnJvd3MgcG9pbnRpbmcgb3V0IG9uIGJvdHRvbSBjaG9yZAogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygyODAsIDIxMCk7IGN0eC5saW5lVG8oMjcwLCAyMTApOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDMyMCwgMjEwKTsgY3R4LmxpbmVUbygzMzAsIDIxMCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFyY2hfc3RhdGljOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFNreS9CYWNrZ3JvdW5kCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZjBmOGZmJzsgY3R4LmZpbGxSZWN0KDAsMCw2MDAsMzUwKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gR3JvdW5kCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMjdhZTYwJzsgY3R4LmZpbGxSZWN0KDAsIDMwMCwgNjAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gV2F0ZXIKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzNDk4ZGInOyBjdHguZmlsbFJlY3QoMTUwLCAzMTAsIDMwMCwgNDApOwoKICAgICAgICAgICAgICAgICAgICAvLyBBYnV0bWVudHMKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM3ZjhjOGQnOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCg1MCwgMjAwLCAxMDAsIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDQ1MCwgMjAwLCAxMDAsIDEwMCk7CgogICAgICAgICAgICAgICAgICAgIC8vIEFyY2gKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzk1YTVhNic7IGN0eC5saW5lV2lkdGggPSAyMDsKICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoMzAwLCAzMDAsIDE1MCwgTWF0aC5QSSwgMCk7IGN0eC5zdHJva2UoKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gRGVjawogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzdmOGM4ZCc7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDUwLCAxNDAsIDUwMCwgMTApOwoKICAgICAgICAgICAgICAgICAgICAvLyBTcGFuZHJlbHMgKGZpbGwpCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjYmRjM2M3JzsKICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygxNTAsIDE1MCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyg0NTAsIDE1MCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyg0NTAsIDMwMCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmFyYygzMDAsIDMwMCwgMTUwLCAwLCBNYXRoLlBJLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKDE1MCwgMzAwKTsKICAgICAgICAgICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gTGFiZWxzICYgRm9yY2VzCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMmMzZTUwJzsKICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICdib2xkIDE0cHggc2Fucy1zZXJpZic7CiAgICAgICAgICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiS2V5c3RvbmUiLCAzMDAsIDEzMCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJlc3Npb24gQXJyb3dzCiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNlNzRjM2MnOyBjdHgubGluZVdpZHRoID0gNDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBMZWZ0IHNpZGUgKGN1cnZlZCkKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydEwgPSAyNjAgKiBNYXRoLlBJIC8gMTgwOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZEwgPSAyMDAgKiBNYXRoLlBJIC8gMTgwOwogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYygzMDAsIDMwMCwgMTUwLCBzdGFydEwsIGVuZEwsIHRydWUpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgLy8gQXJyb3doZWFkIExlZnQKICAgICAgICAgICAgICAgICAgICBjb25zdCB4TCA9IDMwMCArIDE1MCAqIE1hdGguY29zKGVuZEwpOyBjb25zdCB5TCA9IDMwMCArIDE1MCAqIE1hdGguc2luKGVuZEwpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhbkwgPSBlbmRMIC0gTWF0aC5QSSAvIDI7CiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKHhMLCB5TCk7IGN0eC5saW5lVG8oeEwgKyAxNSAqIE1hdGguY29zKHRhbkwgKyAyLjYpLCB5TCArIDE1ICogTWF0aC5zaW4odGFuTCArIDIuNikpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKHhMLCB5TCk7IGN0eC5saW5lVG8oeEwgKyAxNSAqIE1hdGguY29zKHRhbkwgLSAyLjYpLCB5TCArIDE1ICogTWF0aC5zaW4odGFuTCAtIDIuNikpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gUmlnaHQgc2lkZSAoY3VydmVkKQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0UiA9IDI4MCAqIE1hdGguUEkgLyAxODA7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kUiA9IDM0MCAqIE1hdGguUEkgLyAxODA7CiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKDMwMCwgMzAwLCAxNTAsIHN0YXJ0UiwgZW5kUiwgZmFsc2UpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgLy8gQXJyb3doZWFkIFJpZ2h0CiAgICAgICAgICAgICAgICAgICAgY29uc3QgeFIgPSAzMDAgKyAxNTAgKiBNYXRoLmNvcyhlbmRSKTsgY29uc3QgeVIgPSAzMDAgKyAxNTAgKiBNYXRoLnNpbihlbmRSKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0YW5SID0gZW5kUiArIE1hdGguUEkgLyAyOwogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyh4UiwgeVIpOyBjdHgubGluZVRvKHhSICsgMTUgKiBNYXRoLmNvcyh0YW5SICsgMi42KSwgeVIgKyAxNSAqIE1hdGguc2luKHRhblIgKyAyLjYpKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyh4UiwgeVIpOyBjdHgubGluZVRvKHhSICsgMTUgKiBNYXRoLmNvcyh0YW5SIC0gMi42KSwgeVIgKyAxNSAqIE1hdGguc2luKHRhblIgLSAyLjYpKTsgY3R4LnN0cm9rZSgpOwoKICAgICAgICAgICAgICAgICAgICAvLyBOZXcgTGVmdCBBcnJvdyAoT3Bwb3NpdGUpCiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKDMwMCwgMzAwLCAxNTAsIGVuZEwsIHN0YXJ0TCwgZmFsc2UpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgLy8gQXJyb3doZWFkIE5ldyBMZWZ0CiAgICAgICAgICAgICAgICAgICAgY29uc3QgeEwyID0gMzAwICsgMTUwICogTWF0aC5jb3Moc3RhcnRMKTsgY29uc3QgeUwyID0gMzAwICsgMTUwICogTWF0aC5zaW4oc3RhcnRMKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0YW5MMiA9IHN0YXJ0TCArIE1hdGguUEkgLyAyOwogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyh4TDIsIHlMMik7IGN0eC5saW5lVG8oeEwyICsgMTUgKiBNYXRoLmNvcyh0YW5MMiArIDIuNiksIHlMMiArIDE1ICogTWF0aC5zaW4odGFuTDIgKyAyLjYpKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyh4TDIsIHlMMik7IGN0eC5saW5lVG8oeEwyICsgMTUgKiBNYXRoLmNvcyh0YW5MMiAtIDIuNiksIHlMMiArIDE1ICogTWF0aC5zaW4odGFuTDIgLSAyLjYpKTsgY3R4LnN0cm9rZSgpOwoKICAgICAgICAgICAgICAgICAgICAvLyBOZXcgUmlnaHQgQXJyb3cgKE9wcG9zaXRlKQogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYygzMDAsIDMwMCwgMTUwLCBlbmRSLCBzdGFydFIsIHRydWUpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgLy8gQXJyb3doZWFkIE5ldyBSaWdodAogICAgICAgICAgICAgICAgICAgIGNvbnN0IHhSMiA9IDMwMCArIDE1MCAqIE1hdGguY29zKHN0YXJ0Uik7IGNvbnN0IHlSMiA9IDMwMCArIDE1MCAqIE1hdGguc2luKHN0YXJ0Uik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFuUjIgPSBzdGFydFIgLSBNYXRoLlBJIC8gMjsKICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oeFIyLCB5UjIpOyBjdHgubGluZVRvKHhSMiArIDE1ICogTWF0aC5jb3ModGFuUjIgKyAyLjYpLCB5UjIgKyAxNSAqIE1hdGguc2luKHRhblIyICsgMi42KSk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oeFIyLCB5UjIpOyBjdHgubGluZVRvKHhSMiArIDE1ICogTWF0aC5jb3ModGFuUjIgLSAyLjYpLCB5UjIgKyAxNSAqIE1hdGguc2luKHRhblIyIC0gMi42KSk7IGN0eC5zdHJva2UoKTsKCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZTc0YzNjJzsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIkNvbXByZXNzaW9uIiwgMTgwLCAyMDApOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiQ29tcHJlc3Npb24iLCA0MjAsIDIwMCk7CgogICAgICAgICAgICAgICAgICAgIC8vIC8vIFRocnVzdAogICAgICAgICAgICAgICAgICAgIC8vIGN0eC5maWxsVGV4dCgiVGhydXN0IiwgMTAwLCAyODApOwogICAgICAgICAgICAgICAgICAgIC8vIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygxNTAsIDMwMCk7IGN0eC5saW5lVG8oMTAwLCAzMDApOyBjdHgubGluZVRvKDExMCwgMjkwKTsgY3R4Lm1vdmVUbygxMDAsIDMwMCk7IGN0eC5saW5lVG8oMTEwLCAzMTApOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gY3R4LmZpbGxUZXh0KCJUaHJ1c3QiLCA1MDAsIDI4MCk7CiAgICAgICAgICAgICAgICAgICAgLy8gY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDQ1MCwgMzAwKTsgY3R4LmxpbmVUbyg1MDAsIDMwMCk7IGN0eC5saW5lVG8oNDkwLCAyOTApOyBjdHgubW92ZVRvKDUwMCwgMzAwKTsgY3R4LmxpbmVUbyg0OTAsIDMxMCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3VzcGVuc2lvbl9zdGF0aWM6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gU2t5L0JhY2tncm91bmQKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmMGY4ZmYnOyBjdHguZmlsbFJlY3QoMCwwLDYwMCwzNTApOwoKICAgICAgICAgICAgICAgICAgICAvLyBXYXRlcgogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzM0OThkYic7IGN0eC5maWxsUmVjdCgwLCAzMDAsIDYwMCwgNTApOwoKICAgICAgICAgICAgICAgICAgICAvLyBBbmNob3JhZ2VzCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjOTVhNWE2JzsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMjIwLCA4MCwgODApOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCg1MjAsIDIyMCwgODAsIDgwKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gVG93ZXJzCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjN2Y4YzhkJzsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMTIwLCA1MCwgMjAsIDI1MCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDQ2MCwgNTAsIDIwLCAyNTApOwoKICAgICAgICAgICAgICAgICAgICAvLyBEZWNrCiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjYmRjM2M3JzsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMjUwLCA2MDAsIDEwKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gTWFpbiBDYWJsZQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHNhZyA9IDgwOwogICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjZTY3ZTIyJzsgY3R4LmxpbmVXaWR0aCA9IDM7CiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgIC8vIExlZnQgYW5jaG9yIHRvIHRvd2VyCiAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyg0MCwgMjIwKTsgY3R4LmxpbmVUbygxMjAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAvLyBNYWluIHNwYW4KICAgICAgICAgICAgICAgICAgICBjdHgucXVhZHJhdGljQ3VydmVUbygzMDAsIDUwICsgc2FnICogMiwgNDgwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgLy8gVG93ZXIgdG8gcmlnaHQgYW5jaG9yCiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyg1NjAsIDIyMCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwoKICAgICAgICAgICAgICAgICAgICAvLyBTdXNwZW5kZXJzCiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMyYzNlNTAnOwogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgeD0xNDA7IHg8NDYwOyB4Kz0yMCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gKHggLSAxMjApIC8gMzYwOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5ID0gKDEtdCkqKDEtdCkqNTAgKyAyKigxLXQpKnQqKDUwK3NhZyoyKSArIHQqdCo1MDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKHgsIHkpOyBjdHgubGluZVRvKHgsIDI1MCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIExhYmVscwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzJjM2U1MCc7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnYm9sZCAxNHB4IHNhbnMtc2VyaWYnOwogICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIk1haW4gQ2FibGUgKFRlbnNpb24pIiwgMzAwLCA4MCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJUb3dlciAoQ29tcHJlc3Npb24pIiwgMTMwLCA0MCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJUb3dlciAoQ29tcHJlc3Npb24pIiwgNDcwLCA0MCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJBbmNob3JhZ2UiLCA0MCwgMjEwKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIkFuY2hvcmFnZSIsIDU2MCwgMjEwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIC8vIEluaXRpYWxpemUKICAgICAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIEJvb2suaW5pdCgpOwogICAgICAgIH07CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+"))));</script>