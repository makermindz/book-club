<script>document.write(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+VGhlIFB5dGhvbmljIFF1ZXN0IC0gQSBDb2RpbmcgQWR2ZW50dXJlPC90aXRsZT4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi50YWlsd2luZGNzcy5jb20iPjwvc2NyaXB0PgogICAgPHNjcmlwdD4KICAgICAgICB0YWlsd2luZC5jb25maWcgPSB7CiAgICAgICAgICAgIHRoZW1lOiB7CiAgICAgICAgICAgICAgICBleHRlbmQ6IHsKICAgICAgICAgICAgICAgICAgICBjb2xvcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgJ3B5LWJsdWUnOiAnIzMwNjk5OCcsCiAgICAgICAgICAgICAgICAgICAgICAgICdweS15ZWxsb3cnOiAnI0ZGRDQzQicsCiAgICAgICAgICAgICAgICAgICAgICAgICdicmFuZC1kYXJrJzogJyMxZTI5M2InLAogICAgICAgICAgICAgICAgICAgICAgICAncGFwZXInOiAnI2ZkZmJmNycsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNhbnM6IFsnU2Vnb2UgVUknLCAnVGFob21hJywgJ0dlbmV2YScsICdWZXJkYW5hJywgJ3NhbnMtc2VyaWYnXSwKICAgICAgICAgICAgICAgICAgICAgICAgbW9ubzogWydDb25zb2xhcycsICdNb25hY28nLCAnQ291cmllciBOZXcnLCAnbW9ub3NwYWNlJ10sCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmlmOiBbJ0dlb3JnaWEnLCAnQ2FtYnJpYScsICdUaW1lcyBOZXcgUm9tYW4nLCAnVGltZXMnLCAnc2VyaWYnXSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGJveFNoYWRvdzogewogICAgICAgICAgICAgICAgICAgICAgICAnYm9vayc6ICcwIDIwcHggMzBweCAtMTBweCByZ2JhKDAsIDAsIDAsIDAuMyksIDAgMCAxMHB4IHJnYmEoMCwwLDAsMC4xKScsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBEaXNhYmxlIHJpZ2h0LWNsaWNrCiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBldmVudCA9PiBldmVudC5wcmV2ZW50RGVmYXVsdCgpKTsKCiAgLy8gRGlzYWJsZSBGMTIsIEN0cmwrU2hpZnQrSSwgQ3RybCtVCiAgZG9jdW1lbnQub25rZXlkb3duID0gZnVuY3Rpb24oZSkgewogICAgaWYoZXZlbnQua2V5Q29kZSA9PSAxMjMpIHJldHVybiBmYWxzZTsKICAgIGlmKGUuY3RybEtleSAmJiBlLnNoaWZ0S2V5ICYmIGUua2V5Q29kZSA9PSAnSScuY2hhckNvZGVBdCgwKSkgcmV0dXJuIGZhbHNlOwogICAgaWYoZS5jdHJsS2V5ICYmIGUua2V5Q29kZSA9PSAnVScuY2hhckNvZGVBdCgwKSkgcmV0dXJuIGZhbHNlOwogIH07CiAgICA8L3NjcmlwdD4KICAgIDxzdHlsZT4KICAgICAgICBib2R5IHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsKICAgICAgICAgICAgLyogYmFja2dyb3VuZC1pbWFnZTogcmFkaWFsLWdyYWRpZW50KCMzMzQxNTUgMXB4LCB0cmFuc3BhcmVudCAxcHgpOwogICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IDIwcHggMjBweDsgKi8KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmJvb2stY29udGFpbmVyIHsKICAgICAgICAgICAgcGVyc3BlY3RpdmU6IDE1MDBweDsKICAgICAgICB9CgogICAgICAgIC5ib29rLXBhZ2UgewogICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC44cyBjdWJpYy1iZXppZXIoMC42NDUsIDAuMDQ1LCAwLjM1NSwgMSk7CiAgICAgICAgICAgIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7CiAgICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IGxlZnQgY2VudGVyOwogICAgICAgIH0KCiAgICAgICAgLyogU2ltdWxhdGlvbiBDYW52YXMgU3R5bGVzICovCiAgICAgICAgY2FudmFzIHsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC41cmVtOwogICAgICAgICAgICBib3gtc2hhZG93OiBpbnNldCAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjEpOwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgfQoKICAgICAgICAuc2ltLWNvbnRyb2wtcGFuZWwgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjBmOWZmOwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMzA2OTk4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjVyZW07CiAgICAgICAgICAgIHBhZGRpbmc6IDFyZW07CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDFyZW07CiAgICAgICAgfQoKICAgICAgICAvKiBDdXN0b20gUmFuZ2UgU2xpZGVyICovCiAgICAgICAgaW5wdXRbdHlwZT1yYW5nZV0gewogICAgICAgICAgICBoZWlnaHQ6IDZweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2UyZThmMDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgIH0KICAgICAgICBpbnB1dFt0eXBlPXJhbmdlXTo6LXdlYmtpdC1zbGlkZXItdGh1bWIgewogICAgICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7CiAgICAgICAgICAgIGFwcGVhcmFuY2U6IG5vbmU7CiAgICAgICAgICAgIHdpZHRoOiAxOHB4OwogICAgICAgICAgICBoZWlnaHQ6IDE4cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzMwNjk5ODsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgIH0KCiAgICAgICAgY29kZSB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmMWY1Zjk7CiAgICAgICAgICAgIHBhZGRpbmc6IDAuMmVtIDAuNGVtOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtOwogICAgICAgICAgICBmb250LWZhbWlseTogJ0NvbnNvbGFzJywgJ01vbmFjbycsICdDb3VyaWVyIE5ldycsIG1vbm9zcGFjZTsKICAgICAgICAgICAgY29sb3I6ICNkNjMzODQ7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45ZW07CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keSBjbGFzcz0iaC1zY3JlZW4gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgb3ZlcmZsb3ctaGlkZGVuIj4KCiAgICA8ZGl2IGNsYXNzPSJib29rLWNvbnRhaW5lciB3LWZ1bGwgbWF4LXctNXhsIGgtWzkwdmhdIHJlbGF0aXZlIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIj4KICAgICAgICAKICAgICAgICAKICAgICAgICA8ZGl2IGNsYXNzPSJhYnNvbHV0ZSBpbnNldC0wIGJnLWJyYW5kLWRhcmsgcm91bmRlZC1yLTJ4bCBzaGFkb3ctMnhsIHRyYW5zZm9ybSB0cmFuc2xhdGUteC0yIHRyYW5zbGF0ZS15LTIiPjwvZGl2PgoKICAgICAgICAKICAgICAgICA8ZGl2IGlkPSJib29rLXBhZ2UiIGNsYXNzPSJib29rLXBhZ2UgcmVsYXRpdmUgdy1mdWxsIGgtZnVsbCBiZy1wYXBlciByb3VuZGVkLXIteGwgc2hhZG93LWJvb2sgZmxleCBmbGV4LWNvbCBtZDpmbGV4LXJvdyBvdmVyZmxvdy1oaWRkZW4gYm9yZGVyLWwtOCBib3JkZXItZ3JheS0yMDAiPgogICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9InctZnVsbCBtZDp3LTEvMyBwLTggbWQ6cC0xMiBmbGV4IGZsZXgtY29sIGp1c3RpZnktY2VudGVyIGJvcmRlci1yIGJvcmRlci1ncmF5LTEwMCBiZy13aGl0ZSByZWxhdGl2ZSI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhYnNvbHV0ZSB0b3AtMCBsZWZ0LTAgdy1mdWxsIGgtMiBiZy1ncmFkaWVudC10by1yIGZyb20tcHktYmx1ZSB0by1weS15ZWxsb3ciPjwvZGl2PgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtYi00IHRleHQtcHktYmx1ZSBmb250LWJvbGQgdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCB0ZXh0LXhzIj4KICAgICAgICAgICAgICAgICAgICBQYWdlIDxzcGFuIGlkPSJwYWdlLW51bSI+MTwvc3Bhbj4gb2YgPHNwYW4gaWQ9InRvdGFsLXBhZ2VzIj4yNDwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8aDIgaWQ9InN0b3J5LXRpdGxlIiBjbGFzcz0idGV4dC0zeGwgZm9udC1zZXJpZiBmb250LWJvbGQgdGV4dC1icmFuZC1kYXJrIG1iLTYgbGVhZGluZy10aWdodCI+PC9oMj4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPGRpdiBpZD0ic3RvcnktdGV4dCIgY2xhc3M9InByb3NlIHRleHQtZ3JheS02MDAgbGVhZGluZy1yZWxheGVkIG1iLTggdGV4dC1zbSBvdmVyZmxvdy15LWF1dG8gbWF4LWgtWzQwdmhdIHByLTIiPgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibXQtYXV0byBmbGV4IGdhcC00Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IkJvb2sucHJldlBhZ2UoKSIgaWQ9ImJ0bi1wcmV2IiBjbGFzcz0iZmxleC0xIHB4LTQgcHktMyByb3VuZGVkLWxnIGJvcmRlci0yIGJvcmRlci1ncmF5LTIwMCB0ZXh0LWdyYXktNTAwIGZvbnQtYm9sZCBob3Zlcjpib3JkZXItYnJhbmQtZGFyayBob3Zlcjp0ZXh0LWJyYW5kLWRhcmsgdHJhbnNpdGlvbiBkaXNhYmxlZDpvcGFjaXR5LTMwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgIOKGkCBQcmV2aW91cwogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iQm9vay5uZXh0UGFnZSgpIiBpZD0iYnRuLW5leHQiIGNsYXNzPSJmbGV4LTEgcHgtNCBweS0zIHJvdW5kZWQtbGcgYmctcHktYmx1ZSB0ZXh0LXdoaXRlIGZvbnQtYm9sZCBob3ZlcjpiZy1za3ktNzAwIHNoYWRvdy1sZyB0cmFuc2l0aW9uIHRyYW5zZm9ybSBob3ZlcjotdHJhbnNsYXRlLXktMSBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgIE5leHQgPGJyPiDihpIKICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LWZ1bGwgbWQ6dy0yLzMgYmctc2xhdGUtNTAgcmVsYXRpdmUgcC02IGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFic29sdXRlIHRvcC00IHJpZ2h0LTQgdGV4dC1ibGFjayB0ZXh0LXMgZm9udC1zYW5zIHotMjAiPgogICAgICAgICAgICAgICAgICAgICZjb3B5OyBNYWtlciBNaW5kegogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhYnNvbHV0ZSB0b3AtNiByaWdodC02IHRleHQtYnJhbmQtZGFyayBvcGFjaXR5LTEwIHRleHQtOXhsIGZvbnQtc2VyaWYgZm9udC1ib2xkIHNlbGVjdC1ub25lIj4KICAgICAgICAgICAgICAgICAgICDwn5CNCiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPGRpdiBpZD0ic2ltLWNvbnRhaW5lciIgY2xhc3M9InctZnVsbCBtYXgtdy0yeGwgei0xMCI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYmctd2hpdGUgcC0yIHJvdW5kZWQteGwgc2hhZG93LWxnIGJvcmRlciBib3JkZXItZ3JheS0yMDAiPgogICAgICAgICAgICAgICAgICAgICAgICA8Y2FudmFzIGlkPSJzaW0tY2FudmFzIiB3aWR0aD0iNjAwIiBoZWlnaHQ9IjM1MCIgY2xhc3M9InctZnVsbCBoLWF1dG8gYmctZ3JheS01MCByb3VuZGVkLWxnIj48L2NhbnZhcz4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJzaW0tY29udHJvbHMiIGNsYXNzPSJzaW0tY29udHJvbC1wYW5lbCBzaGFkb3ctc20gbWluLWgtWzgwcHhdIGZsZXggZmxleC1jb2wganVzdGlmeS1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJzaW0tZmVlZGJhY2siIGNsYXNzPSJtdC0zIHRleHQtY2VudGVyIGZvbnQtYm9sZCB0ZXh0LWJyYW5kLWRhcmsgbWluLWgtWzEuNXJlbV0iPjwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxzY3JpcHQ+CiAgICAgICAgLy8gLS0tIEJPT0sgQ09OVEVOVCAmIExPR0lDIC0tLQogICAgICAgIAogICAgICAgIGNvbnN0IFBhZ2VzID0gWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRoZSBQeXRob25pYyBRdWVzdCIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiV2VsY29tZSwgVHJhdmVsZXIhIFlvdSBhcmUgYWJvdXQgdG8gZW50ZXIgdGhlIFJlYWxtIG9mIFB5dGhvbiwgYSBsYW5kIHdoZXJlIHdvcmRzIGJlY29tZSBtYWdpYyBzcGVsbHMgKGNvZGUpIHRoYXQgY29udHJvbCB0aGUgd29ybGQgYXJvdW5kIHlvdS4gWW91ciBqb3VybmV5IHRvIGJlY29tZSBhIENvZGluZyBXaXphcmQgc3RhcnRzIG5vdyEiLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImNvdmVyIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiQ2xpY2sgJ05leHQgUGFnZScgdG8gYmVnaW4geW91ciBhZHZlbnR1cmUuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRoZSBGaXJzdCBTcGVsbDogUHJpbnQiLAogICAgICAgICAgICAgICAgdGV4dDogIkluIFB5dGhvbiwgdGhlIDxjb2RlPnByaW50KCk8L2NvZGU+IGZ1bmN0aW9uIGlzIHlvdXIgdm9pY2UuIEl0IGFsbG93cyB5b3UgdG8gZGlzcGxheSBtZXNzYWdlcyB0byB0aGUgd29ybGQuIFRvIGNhc3QgaXQsIHlvdSBzaW1wbHkgd3JhcCB5b3VyIHRleHQgaW4gcXVvdGVzIGluc2lkZSB0aGUgcGFyZW50aGVzZXMuIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJwcmludCIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkNsaWNrIHRoZSBidXR0b24gdG8gZXhlY3V0ZTogcHJpbnQoJ0hlbGxvIFdvcmxkJykiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVmFyaWFibGVzOiBUaGUgTWFnaWMgQm94ZXMiLAogICAgICAgICAgICAgICAgdGV4dDogIkEgPGI+VmFyaWFibGU8L2I+IGlzIGxpa2UgYSBsYWJlbGVkIGJveCB3aGVyZSB5b3UgY2FuIHN0b3JlIGluZm9ybWF0aW9uLiBZb3UgZ2l2ZSB0aGUgYm94IGEgbmFtZSAobGlrZSA8Y29kZT5zY29yZTwvY29kZT4gb3IgPGNvZGU+bmFtZTwvY29kZT4pIGFuZCBwdXQgYSB2YWx1ZSBpbnNpZGUgaXQgdXNpbmcgdGhlIDxjb2RlPj08L2NvZGU+IHNpZ24uIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJ2YXJpYWJsZXMiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJDbGljayB0byBhc3NpZ24gdGhlIHZhbHVlICdHZW0nIHRvIHRoZSB2YXJpYWJsZSAndHJlYXN1cmUnLiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJEYXRhIFR5cGVzOiBUaGUgU2hhcGVzIG9mIE1hZ2ljIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJOb3QgYWxsIG1hZ2ljIGlzIHRoZSBzYW1lLiA8Yj5JbnRlZ2VyczwvYj4gYXJlIHdob2xlIG51bWJlcnMgKDUpLiA8Yj5GbG9hdHM8L2I+IGFyZSBkZWNpbWFscyAoNS41KS4gPGI+U3RyaW5nczwvYj4gYXJlIHRleHQgKCdIZWxsbycpLiBQeXRob24gbmVlZHMgdG8ga25vdyB3aGF0IHR5cGUgb2YgZGF0YSBpcyBpbiB0aGUgYm94LiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAiZGF0YXR5cGVzIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiQ2xpY2sgdGhlIHNoYXBlcyB0byBpZGVudGlmeSB0aGVpciB0eXBlLiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJTdHJpbmdzOiBXZWF2aW5nIFdvcmRzIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJTdHJpbmdzIGFyZSBjaGFpbnMgb2YgY2hhcmFjdGVycy4gWW91IGNhbiBzdGl0Y2ggdGhlbSB0b2dldGhlciB1c2luZyB0aGUgPGNvZGU+KzwvY29kZT4gb3BlcmF0b3IuIFRoaXMgaXMgY2FsbGVkIDxiPmNvbmNhdGVuYXRpb248L2I+LiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAic3RyaW5ncyIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkNvbWJpbmUgJ1N1cGVyJyArICdQeXRob24nIHRvIGNyZWF0ZSBhIG5ldyBzdHJpbmcuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIk51bWJlcnM6IFRoZSBDYWxjdWxhdG9yIEdvbGVtIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJQeXRob24gaXMgYSBwb3dlcmZ1bCBjYWxjdWxhdG9yLiBZb3UgY2FuIGFkZCA8Y29kZT4rPC9jb2RlPiwgc3VidHJhY3QgPGNvZGU+LTwvY29kZT4sIG11bHRpcGx5IDxjb2RlPio8L2NvZGU+LCBhbmQgZGl2aWRlIDxjb2RlPi88L2NvZGU+LiBUaGUgR29sZW0gb2JleXMgeW91ciBtYXRoIGNvbW1hbmRzLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAibWF0aCIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkFkanVzdCB0aGUgc2xpZGVycyB0byBhZGQgdHdvIG51bWJlcnMuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkJvb2xlYW5zOiBUaGUgVG9yY2ggb2YgVHJ1dGgiLAogICAgICAgICAgICAgICAgdGV4dDogIkEgPGI+Qm9vbGVhbjwvYj4gaXMgYSBzaW1wbGUgdHlwZSB0aGF0IGNhbiBvbmx5IGJlIDxjb2RlPlRydWU8L2NvZGU+IG9yIDxjb2RlPkZhbHNlPC9jb2RlPi4gSXQncyBsaWtlIGEgbGlnaHQgc3dpdGNoIC0gaXQncyBlaXRoZXIgT04gb3IgT0ZGLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAiYm9vbGVhbnMiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJUb2dnbGUgdGhlIHN3aXRjaCB0byBjaGFuZ2UgdGhlIEJvb2xlYW4gdmFsdWUuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkNvbXBhcmlzb25zOiBUaGUgU2NhbGVzIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJXZSB1c2UgY29tcGFyaXNvbiBvcGVyYXRvcnMgdG8gY29tcGFyZSB2YWx1ZXMuIDxjb2RlPj09PC9jb2RlPiBjaGVja3MgaWYgZXF1YWwsIDxjb2RlPj48L2NvZGU+IGNoZWNrcyBpZiBncmVhdGVyLCBhbmQgPGNvZGU+PDwvY29kZT4gY2hlY2tzIGlmIHNtYWxsZXIuIFRoZSByZXN1bHQgaXMgYWx3YXlzIGEgQm9vbGVhbi4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImNvbXBhcmlzb24iLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJDb21wYXJlIHRoZSB3ZWlnaHRzIG9uIHRoZSBzY2FsZS4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiSWYgU3RhdGVtZW50czogVGhlIEZvcmsgaW4gdGhlIFJvYWQiLAogICAgICAgICAgICAgICAgdGV4dDogIkNvZGUgY2FuIG1ha2UgZGVjaXNpb25zISBBbiA8Y29kZT5pZjwvY29kZT4gc3RhdGVtZW50IGNoZWNrcyBhIGNvbmRpdGlvbi4gSWYgaXQncyBUcnVlLCB0aGUgY29kZSBibG9jayBydW5zLiBJZiBGYWxzZSwgaXQgc2tpcHMgaXQuIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJpZl9zdGF0ZW1lbnQiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJTZXQgdGhlIGNvbmRpdGlvbiB0byBUcnVlIHRvIGxldCB0aGUgaGVybyBwYXNzLiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJFbHNlOiBUaGUgT3RoZXIgUGF0aCIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiV2hhdCBpZiB0aGUgY29uZGl0aW9uIGlzIEZhbHNlPyBUaGUgPGNvZGU+ZWxzZTwvY29kZT4ga2V5d29yZCBkZWZpbmVzIGFuIGFsdGVybmF0aXZlIHBhdGguIElmIHRoZSBmaXJzdCBjb25kaXRpb24gZmFpbHMsIHRoZSBjb2RlIGp1bXBzIHRvIHRoZSBlbHNlIGJsb2NrLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAiZWxzZV9zdGF0ZW1lbnQiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJUb2dnbGUgdGhlIHN3aXRjaCB0byBjaG9vc2UgYmV0d2VlbiB0aGUgRm9yZXN0IG9yIHRoZSBDYXZlLiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJMaXN0czogVGhlIEludmVudG9yeSIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiQSA8Yj5MaXN0PC9iPiBpcyBhIGNvbGxlY3Rpb24gb2YgaXRlbXMgaW4gYSBzcGVjaWZpYyBvcmRlci4gWW91IGRlZmluZSBpdCB3aXRoIHNxdWFyZSBicmFja2V0cyA8Y29kZT5bXTwvY29kZT4uIFlvdSBjYW4gc3RvcmUgbWFueSBpdGVtcyBpbiBvbmUgdmFyaWFibGUhIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJsaXN0cyIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkNsaWNrICdBZGQnIHRvIHB1dCBpdGVtcyBpbnRvIHlvdXIgaW52ZW50b3J5IGxpc3QuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkxpc3QgSW5kZXhpbmc6IFRoZSBTaGVsZiIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiVG8gZ2V0IGFuIGl0ZW0gZnJvbSBhIGxpc3QsIHlvdSB1c2UgaXRzIDxiPkluZGV4PC9iPi4gV2FybmluZzogUHl0aG9uIHN0YXJ0cyBjb3VudGluZyBhdCAwISBUaGUgZmlyc3QgaXRlbSBpcyBhdCBpbmRleCAwLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAiaW5kZXhpbmciLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJTZWxlY3QgSW5kZXggMSB0byBncmFiIHRoZSBzZWNvbmQgcG90aW9uLiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJGb3IgTG9vcHM6IFRoZSBSZXBlYXRpbmcgUnVuZSIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiQSA8Y29kZT5mb3I8L2NvZGU+IGxvb3AgYWxsb3dzIHlvdSB0byBpdGVyYXRlIG92ZXIgYSBsaXN0LCBydW5uaW5nIHRoZSBzYW1lIGNvZGUgZm9yIGVhY2ggaXRlbS4gSXQncyBncmVhdCBmb3IgcHJvY2Vzc2luZyBpbnZlbnRvcnkgb3IgcmVwZWF0aW5nIGFjdGlvbnMuIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJmb3JfbG9vcCIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIlJ1biB0aGUgbG9vcCB0byB2aXNpdCBldmVyeSBpc2xhbmQuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlJhbmdlKCk6IFRoZSBDb3VudGVyIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJUaGUgPGNvZGU+cmFuZ2UoKTwvY29kZT4gZnVuY3Rpb24gZ2VuZXJhdGVzIGEgc2VxdWVuY2Ugb2YgbnVtYmVycy4gPGNvZGU+Zm9yIGkgaW4gcmFuZ2UoNSk6PC9jb2RlPiB3aWxsIHJ1biB0aGUgbG9vcCA1IHRpbWVzLCB3aXRoIDxjb2RlPmk8L2NvZGU+IGdvaW5nIGZyb20gMCB0byA0LiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAicmFuZ2UiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJEcmFnIHRoZSBzbGlkZXIgdG8gc2V0IHRoZSByYW5nZSBsaW1pdC4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiV2hpbGUgTG9vcHM6IFRoZSBFbmR1cmFuY2UgVHJpYWwiLAogICAgICAgICAgICAgICAgdGV4dDogIkEgPGNvZGU+d2hpbGU8L2NvZGU+IGxvb3Aga2VlcHMgcnVubmluZyBhcyBsb25nIGFzIGEgY29uZGl0aW9uIGlzIFRydWUuIEJlIGNhcmVmdWwhIElmIHRoZSBjb25kaXRpb24gbmV2ZXIgYmVjb21lcyBGYWxzZSwgeW91IGdldCBhbiBJbmZpbml0ZSBMb29wISIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAid2hpbGVfbG9vcCIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkZpbGwgdGhlIGJ1Y2tldCB3aGlsZSBpdCBpcyBub3QgZnVsbC4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiRnVuY3Rpb25zOiBUaGUgU3BlbGxib29rIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJBIDxiPkZ1bmN0aW9uPC9iPiBpcyBhIGJsb2NrIG9mIHJldXNhYmxlIGNvZGUuIFlvdSBkZWZpbmUgaXQgb25jZSB3aXRoIDxjb2RlPmRlZjwvY29kZT4sIGFuZCB0aGVuIHlvdSBjYW4gJ2NhbGwnIGl0IGJ5IG5hbWUgd2hlbmV2ZXIgeW91IG5lZWQgaXQuIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJmdW5jdGlvbnMiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJDYWxsIHRoZSAnQ2FzdCBGaXJlYmFsbCcgZnVuY3Rpb24uIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlBhcmFtZXRlcnM6IEluZ3JlZGllbnRzIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJGdW5jdGlvbnMgY2FuIHRha2UgaW5wdXRzIGNhbGxlZCA8Yj5QYXJhbWV0ZXJzPC9iPi4gVGhpcyBtYWtlcyB0aGVtIGZsZXhpYmxlLiBBIDxjb2RlPmdyZWV0KG5hbWUpPC9jb2RlPiBmdW5jdGlvbiBjYW4gc2F5IGhlbGxvIHRvIGFueW9uZSB5b3UgcGFzcyB0byBpdC4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogInBhcmFtZXRlcnMiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJDaGFuZ2UgdGhlIHBhcmFtZXRlciB0byBjaGFuZ2UgdGhlIHNwZWxsIGNvbG9yLiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJSZXR1cm46IFRoZSBHb2xkZW4gQm9vbWVyYW5nIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJBIGZ1bmN0aW9uIGNhbiBzZW5kIGEgdmFsdWUgYmFjayB0byB3aGVyZSBpdCB3YXMgY2FsbGVkIHVzaW5nIHRoZSA8Y29kZT5yZXR1cm48L2NvZGU+IGtleXdvcmQuIFRoaXMgbGV0cyB5b3UgdXNlIHRoZSByZXN1bHQgaW4gb3RoZXIgcGFydHMgb2YgeW91ciBjb2RlLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAicmV0dXJuIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiQ2FsbCB0aGUgZnVuY3Rpb24gdG8gY2FsY3VsYXRlIGFuZCByZXR1cm4gdGhlIGdvbGQuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkRpY3Rpb25hcmllczogVGhlIEtleW1hc3RlciIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiQSA8Yj5EaWN0aW9uYXJ5PC9iPiBzdG9yZXMgZGF0YSBpbiBLZXktVmFsdWUgcGFpcnMgPGNvZGU+eydrZXknOiAndmFsdWUnfTwvY29kZT4uIEl0J3MgbGlrZSBhIHJlYWwgZGljdGlvbmFyeTogeW91IGxvb2sgdXAgYSB3b3JkIChLZXkpIHRvIGZpbmQgaXRzIGRlZmluaXRpb24gKFZhbHVlKS4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImRpY3Rpb25hcmllcyIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkVudGVyIGEgS2V5IHRvIHVubG9jayB0aGUgY29ycmVzcG9uZGluZyBWYWx1ZS4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiTW9kdWxlczogVGhlIExpYnJhcnkiLAogICAgICAgICAgICAgICAgdGV4dDogIlB5dGhvbiBoYXMgYSBtYXNzaXZlIGxpYnJhcnkgb2YgcHJlLXdyaXR0ZW4gY29kZSBjYWxsZWQgPGI+TW9kdWxlczwvYj4uIFlvdSBjYW4gPGNvZGU+aW1wb3J0PC9jb2RlPiB0aGVtIHRvIGFkZCBwb3dlcnMgbGlrZSByYW5kb20gbnVtYmVycywgbWF0aCwgb3IgdGltZSBmdW5jdGlvbnMuIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJtb2R1bGVzIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiSW1wb3J0IHRoZSAncmFuZG9tJyBtb2R1bGUgdG8gcm9sbCBhIGRpZS4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiQ2xhc3NlczogVGhlIEJsdWVwcmludCIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiPGI+T2JqZWN0LU9yaWVudGVkIFByb2dyYW1taW5nPC9iPiB1c2VzIENsYXNzZXMuIEEgQ2xhc3MgaXMgYSBibHVlcHJpbnQgZm9yIGNyZWF0aW5nIE9iamVjdHMuIEZvciBleGFtcGxlLCBhICdSb2JvdCcgY2xhc3MgZGVmaW5lcyBob3cgYWxsIHJvYm90cyBsb29rIGFuZCBhY3QuIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJjbGFzc2VzIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiVXNlIHRoZSBibHVlcHJpbnQgdG8gYnVpbGQgYSBSb2JvdCBpbnN0YW5jZS4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiT2JqZWN0czogVGhlIEFybXkiLAogICAgICAgICAgICAgICAgdGV4dDogIk9uY2UgeW91IGhhdmUgYSBDbGFzcywgeW91IGNhbiBjcmVhdGUgbWFueSA8Yj5PYmplY3RzPC9iPiAoaW5zdGFuY2VzKSBmcm9tIGl0LiBFYWNoIG9iamVjdCBoYXMgaXRzIG93biBkYXRhIGJ1dCBmb2xsb3dzIHRoZSBzYW1lIHN0cnVjdHVyZS4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogIm9iamVjdHMiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJDcmVhdGUgbXVsdGlwbGUgcm9ib3Qgb2JqZWN0cyB3aXRoIGRpZmZlcmVudCBjb2xvcnMuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIkRlYnVnZ2luZzogVGhlIEJ1ZyBIdW50IiwKICAgICAgICAgICAgICAgIHRleHQ6ICJFcnJvcnMgKGJ1Z3MpIGFyZSBwYXJ0IG9mIGNvZGluZy4gU3ludGF4IGVycm9ycywgbG9naWMgZXJyb3JzLCBhbmQgZXhjZXB0aW9ucyBoYXBwZW4gdG8gZXZlcnlvbmUuIFJlYWRpbmcgZXJyb3IgbWVzc2FnZXMgaXMgYSBzdXBlcnBvd2VyLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAiZGVidWdnaW5nIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiRmluZCBhbmQgZml4IHRoZSBzeW50YXggZXJyb3IgaW4gdGhlIGNvZGUuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRlc3QgWW91ciBLbm93bGVkZ2UiLAogICAgICAgICAgICAgICAgdGV4dDogIlRvIGVhcm4geW91ciB0aXRsZSwgeW91IG11c3QgcHJvdmUgeW91ciBza2lsbHMuIENvbXBsZXRlIHRoZSBjb2RpbmcgY2hhbGxlbmdlcyBiZWxvdy4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImRyYWdfZHJvcF9jb2RlIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiRHJhZyBibG9ja3MgdG8gdGhlIENvZGUgQXJlYSB0byBtYXRjaCB0aGUgZ29hbC4iCiAgICAgICAgICAgIH0KICAgICAgICBdOwoKICAgICAgICBjb25zdCBCb29rID0gewogICAgICAgICAgICBjdXJyZW50UGFnZTogMCwKICAgICAgICAgICAgCiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJQYWdlKCk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBuZXh0UGFnZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA8IFBhZ2VzLmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlKys7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJQYWdlKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAwOwogICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyUGFnZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgcHJldlBhZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZS0tOwogICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyUGFnZSgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgcmVuZGVyUGFnZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBjb25zdCBwYWdlID0gUGFnZXNbdGhpcy5jdXJyZW50UGFnZV07CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBUZXh0CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFnZS1udW0nKS50ZXh0Q29udGVudCA9IHRoaXMuY3VycmVudFBhZ2UgKyAxOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvdGFsLXBhZ2VzJykudGV4dENvbnRlbnQgPSBQYWdlcy5sZW5ndGg7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RvcnktdGl0bGUnKS50ZXh0Q29udGVudCA9IHBhZ2UudGl0bGU7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RvcnktdGV4dCcpLmlubmVySFRNTCA9IGA8cD4ke3BhZ2UudGV4dH08L3A+PHAgY2xhc3M9Im10LTQgdGV4dC1zbSBmb250LWJvbGQgdGV4dC1weS1ibHVlIGl0YWxpYyI+VGFzazogJHtwYWdlLmluc3RydWN0aW9ufTwvcD5gOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgQnV0dG9ucwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1wcmV2JykuZGlzYWJsZWQgPSB0aGlzLmN1cnJlbnRQYWdlID09PSAwOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0JykuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlID09PSBQYWdlcy5sZW5ndGggLSAxKSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1uZXh0JykudGV4dENvbnRlbnQgPSAiUmVzdGFydCI7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tbmV4dCcpLmlubmVySFRNTCA9ICJOZXh0IDxicj4g4oaSIjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBMb2FkIFNpbXVsYXRpb24KICAgICAgICAgICAgICAgIFNpbXVsYXRpb25zLmxvYWQocGFnZS5zaW1UeXBlKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGNvbnN0IFNpbXVsYXRpb25zID0gewogICAgICAgICAgICBjYW52YXM6IG51bGwsCiAgICAgICAgICAgIGN0eDogbnVsbCwKICAgICAgICAgICAgYW5pbUlkOiBudWxsLAogICAgICAgICAgICBhY3RpdmVUeXBlOiBudWxsLAogICAgICAgICAgICBzdGF0ZToge30sCgogICAgICAgICAgICBsb2FkOiBmdW5jdGlvbih0eXBlKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5hbmltSWQpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbUlkKTsKICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlVHlwZSA9IHR5cGU7CiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tY2FudmFzJyk7CiAgICAgICAgICAgICAgICAvLyBSZXNldCBldmVudCBsaXN0ZW5lcnMKICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NhbnZhcyA9IHRoaXMuY2FudmFzLmNsb25lTm9kZSh0cnVlKTsKICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld0NhbnZhcywgdGhpcy5jYW52YXMpOwogICAgICAgICAgICAgICAgdGhpcy5jYW52YXMgPSBuZXdDYW52YXM7CiAgICAgICAgICAgICAgICB0aGlzLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFJlc2V0IGNvbnRyb2xzCiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWNvbnRyb2xzJykuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAnJzsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS5jbGFzc05hbWUgPSAibXQtMyB0ZXh0LWNlbnRlciBmb250LWJvbGQgdGV4dC1icmFuZC1kYXJrIG1pbi1oLVsxLjVyZW1dIjsKCiAgICAgICAgICAgICAgICAvLyBJbml0aWFsaXplIHNwZWNpZmljIHNpbXVsYXRpb24KICAgICAgICAgICAgICAgIGlmICh0aGlzW3R5cGVdKSB0aGlzW3R5cGVdLmluaXQodGhpcyk7CiAgICAgICAgICAgICAgICBlbHNlIHRoaXMucGxhY2Vob2xkZXIuaW5pdCh0aGlzKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgc2ltLmN0eC5maWxsU3R5bGUgPSAiI2JkYzNjNyI7CiAgICAgICAgICAgICAgICAgICAgc2ltLmN0eC5mb250ID0gIjIwcHggc2Fucy1zZXJpZiI7CiAgICAgICAgICAgICAgICAgICAgc2ltLmN0eC50ZXh0QWxpZ24gPSAiY2VudGVyIjsKICAgICAgICAgICAgICAgICAgICBzaW0uY3R4LmZpbGxUZXh0KCJJbnRlcmFjdGl2ZSBWaXN1YWwgQ29taW5nIFNvb24iLCAzMDAsIDE3NSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyAxLiBDT1ZFUgogICAgICAgICAgICBjb3ZlcjogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyB0OiAwIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS50ICs9IDAuMDU7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzFlMjkzYic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCA2MDAsIDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IFB5dGhvbiBMb2dvLWlzaCBzbmFrZXMKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSgzMDAsIDE3NSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yb3RhdGUoTWF0aC5zaW4oc2ltLnN0YXRlLnQpICogMC4xKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsdWUgU25ha2UKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMzA2OTk4JzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKC0yMCwgLTIwLCA0MCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KC00MCwgLTIwLCA0MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoMCwgNDAsIDIwLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gWWVsbG93IFNuYWtlCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI0ZGRDQzQic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYygyMCwgMjAsIDQwLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgLTQwLCA0MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoMCwgLTQwLCAyMCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnOyBjdHguZm9udCA9ICdib2xkIDMwcHggc2Fucy1zZXJpZic7IGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJUaGUgUHl0aG9uaWMgUXVlc3QiLCAzMDAsIDMyMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyAyLiBQUklOVAogICAgICAgICAgICBwcmludDogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyBwcmludGVkOiBmYWxzZSB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc05hbWUgPSAicHgtNCBweS0yIGJnLWdyZWVuLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgZm9udC1ib2xkIGZvbnQtbW9ubyI7CiAgICAgICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gIlJ1biBDb2RlIOKWtiI7CiAgICAgICAgICAgICAgICAgICAgYnRuLm9uY2xpY2sgPSAoKSA9PiBzaW0uc3RhdGUucHJpbnRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jb250cm9scycpLmFwcGVuZENoaWxkKGJ0bik7CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRlcm1pbmFsIFdpbmRvdwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZmlsbFJlY3QoNTAsIDUwLCA1MDAsIDI1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzMzMyc7IGN0eC5maWxsUmVjdCg1MCwgNTAsIDUwMCwgMzApOyAvLyBCYXIKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZvbnQgPSAnMTRweCBtb25vc3BhY2UnOyBjdHgudGV4dEFsaWduID0gJ2xlZnQnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIlRlcm1pbmFsIiwgNjAsIDcwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzBmMCc7IGN0eC5mb250ID0gJzIwcHggbW9ub3NwYWNlJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCI+IHByaW50KCdIZWxsbyBXb3JsZCcpIiwgNzAsIDEyMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZihzaW0uc3RhdGUucHJpbnRlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiSGVsbG8gV29ybGQiLCA3MCwgMTYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJPdXRwdXQgc3VjY2Vzc2Z1bCEiOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyAzLiBWQVJJQUJMRVMKICAgICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IGhhc1ZhbHVlOiBmYWxzZSB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5jYW52YXMub25jbGljayA9ICgpID0+IHNpbS5zdGF0ZS5oYXNWYWx1ZSA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJveAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlNjdlMjInOyBjdHguZmlsbFJlY3QoMjUwLCAxNTAsIDEwMCwgMTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNkMzU0MDAnOyBjdHgubGluZVdpZHRoID0gNDsgY3R4LnN0cm9rZVJlY3QoMjUwLCAxNTAsIDEwMCwgMTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZvbnQgPSAnYm9sZCAxNnB4IHNhbnMtc2VyaWYnOyBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgidHJlYXN1cmUiLCAzMDAsIDI4MCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBWYWx1ZQogICAgICAgICAgICAgICAgICAgICAgICBpZihzaW0uc3RhdGUuaGFzVmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzliNTliNic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoMzAwLCAyMDAsIDMwLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZpbGxUZXh0KCInR2VtJyIsIDMwMCwgMjA1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJ0cmVhc3VyZSA9ICdHZW0nIjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzliNTliNic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoMTAwLCAyMDAsIDMwLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZpbGxUZXh0KCInR2VtJyIsIDEwMCwgMjA1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJDbGljayB0byBhc3NpZ24uIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzaW0ubG9vcCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gNC4gREFUQSBUWVBFUwogICAgICAgICAgICBkYXRhdHlwZXM6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgeDogMTUwLCB5OiAxMDAsIHR5cGU6ICdpbnQnLCB2YWw6ICc0MicsIGNvbG9yOiAnI2U3NGMzYycsIHNoYXBlOiAnc3F1YXJlJywgcmV2ZWFsZWQ6IGZhbHNlIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHg6IDQ1MCwgeTogMTAwLCB0eXBlOiAnZmxvYXQnLCB2YWw6ICczLjE0JywgY29sb3I6ICcjMzQ5OGRiJywgc2hhcGU6ICdjaXJjbGUnLCByZXZlYWxlZDogZmFsc2UgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgeDogMTUwLCB5OiAyNTAsIHR5cGU6ICdzdHInLCB2YWw6ICciSGkiJywgY29sb3I6ICcjZjFjNDBmJywgc2hhcGU6ICdyZWN0JywgcmV2ZWFsZWQ6IGZhbHNlIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHg6IDQ1MCwgeTogMjUwLCB0eXBlOiAnYm9vbCcsIHZhbDogJ1RydWUnLCBjb2xvcjogJyM5YjU5YjYnLCBzaGFwZTogJ2RpYW1vbmQnLCByZXZlYWxlZDogZmFsc2UgfQogICAgICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmNhbnZhcy5vbmNsaWNrID0gKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHNpbS5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG14ID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBteSA9IGUuY2xpZW50WSAtIHJlY3QudG9wOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLml0ZW1zLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMobXggLSBpdGVtLngpIDwgNTAgJiYgTWF0aC5hYnMobXkgLSBpdGVtLnkpIDwgNTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnJldmVhbGVkID0gIWl0ZW0ucmV2ZWFsZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5pdGVtcy5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGl0ZW0uY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLnNoYXBlID09PSAnc3F1YXJlJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdChpdGVtLnggLSA0MCwgaXRlbS55IC0gNDAsIDgwLCA4MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uc2hhcGUgPT09ICdjaXJjbGUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKGl0ZW0ueCwgaXRlbS55LCA0NSwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5zaGFwZSA9PT0gJ3JlY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KGl0ZW0ueCAtIDUwLCBpdGVtLnkgLSAzMCwgMTAwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uc2hhcGUgPT09ICdkaWFtb25kJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhpdGVtLngsIGl0ZW0ueS01MCk7IGN0eC5saW5lVG8oaXRlbS54KzUwLCBpdGVtLnkpOyBjdHgubGluZVRvKGl0ZW0ueCwgaXRlbS55KzUwKTsgY3R4LmxpbmVUbyhpdGVtLngtNTAsIGl0ZW0ueSk7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gJ2JvbGQgMjBweCBtb25vc3BhY2UnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5yZXZlYWxlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGl0ZW0udHlwZSwgaXRlbS54LCBpdGVtLnkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoaXRlbS52YWwsIGl0ZW0ueCwgaXRlbS55KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2ltLnN0YXRlLml0ZW1zLmV2ZXJ5KGkgPT4gaS5yZXZlYWxlZCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJBbGwgdHlwZXMgcmV2ZWFsZWQhIEdyZWF0IGpvYiEiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLmNsYXNzTmFtZSA9ICJtdC0zIHRleHQtY2VudGVyIGZvbnQtYm9sZCB0ZXh0LWdyZWVuLTYwMCBtaW4taC1bMS41cmVtXSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiQ2xpY2sgc2hhcGVzIHRvIHJldmVhbCB0eXBlcy4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLmNsYXNzTmFtZSA9ICJtdC0zIHRleHQtY2VudGVyIGZvbnQtYm9sZCB0ZXh0LWJyYW5kLWRhcmsgbWluLWgtWzEuNXJlbV0iOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyA1LiBTVFJJTkdTCiAgICAgICAgICAgIHN0cmluZ3M6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgam9pbmVkOiBmYWxzZSB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc05hbWUgPSAicHgtNCBweS0yIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcm91bmRlZCBmb250LWJvbGQiOwogICAgICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICJDb25jYXRlbmF0ZSAoKykiOwogICAgICAgICAgICAgICAgICAgIGJ0bi5vbmNsaWNrID0gKCkgPT4gc2ltLnN0YXRlLmpvaW5lZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jb250cm9scycpLmFwcGVuZENoaWxkKGJ0bik7CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNpbS5zdGF0ZS5qb2luZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzJlY2M3MSc7IGN0eC5maWxsUmVjdCgyMDAsIDE1MCwgMjAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnOyBjdHguZm9udCA9ICcyNHB4IG1vbm9zcGFjZSc7IGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiJ1N1cGVyUHl0aG9uJyIsIDMwMCwgMTgyKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzM0OThkYic7IGN0eC5maWxsUmVjdCgxNTAsIDE1MCwgMTAwLCA1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnOyBjdHguZm9udCA9ICcyNHB4IG1vbm9zcGFjZSc7IGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiJ1N1cGVyJyIsIDIwMCwgMTgyKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmMWM0MGYnOyBjdHguZmlsbFJlY3QoMzUwLCAxNTAsIDEwMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIidQeXRob24nIiwgNDAwLCAxODIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZmlsbFRleHQoIisiLCAzMDAsIDE4Mik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzaW0ubG9vcCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gNi4gTUFUSAogICAgICAgICAgICBtYXRoOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IGE6IDUsIGI6IDMgfTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWNvbnRyb2xzJykuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGdhcC00IGp1c3RpZnktY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPSIxIiBtYXg9IjEwIiB2YWx1ZT0iNSIgb25pbnB1dD0iU2ltdWxhdGlvbnMuc3RhdGUuYT1wYXJzZUludCh0aGlzLnZhbHVlKSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZm9udC1ib2xkIHRleHQteGwiPis8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMSIgbWF4PSIxMCIgdmFsdWU9IjMiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLnN0YXRlLmI9cGFyc2VJbnQodGhpcy52YWx1ZSkiPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBHb2xlbSBCb2R5CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzdmOGM4ZCc7IGN0eC5maWxsUmVjdCgyNTAsIDEwMCwgMTAwLCAxNTApOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBTY3JlZW4KICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgY3R4LmZpbGxSZWN0KDI2MCwgMTIwLCA4MCwgNDApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwZjAnOyBjdHguZm9udCA9ICcyNHB4IG1vbm9zcGFjZSc7IGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KHNpbS5zdGF0ZS5hICsgc2ltLnN0YXRlLmIsIDMwMCwgMTQ4KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElucHV0cwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzNDk4ZGInOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoMjAwLCAyMDAsIDMwLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnOyBjdHguZmlsbFRleHQoc2ltLnN0YXRlLmEsIDIwMCwgMjA4KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2U3NGMzYyc7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyg0MDAsIDIwMCwgMzAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IGN0eC5maWxsVGV4dChzaW0uc3RhdGUuYiwgNDAwLCAyMDgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzaW0ubG9vcCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gNy4gQk9PTEVBTlMKICAgICAgICAgICAgYm9vbGVhbnM6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgaXNPbjogZmFsc2UgfTsKICAgICAgICAgICAgICAgICAgICBzaW0uY2FudmFzLm9uY2xpY2sgPSAoKSA9PiBzaW0uc3RhdGUuaXNPbiA9ICFzaW0uc3RhdGUuaXNPbjsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQnVsYgogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gc2ltLnN0YXRlLmlzT24gPyAnI2YxYzQwZicgOiAnIzM0NDk1ZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYygzMDAsIDE1MCwgNjAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNpbS5zdGF0ZS5pc09uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc2hhZG93Qmx1ciA9IDUwOyBjdHguc2hhZG93Q29sb3IgPSAnI2YxYzQwZic7IGN0eC5zdHJva2UoKTsgY3R4LnNoYWRvd0JsdXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBCYXNlCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzdmOGM4ZCc7IGN0eC5maWxsUmVjdCgyODAsIDIxMCwgNDAsIDQwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRleHQKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgY3R4LmZvbnQgPSAnYm9sZCAzMHB4IG1vbm9zcGFjZSc7IGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KHNpbS5zdGF0ZS5pc09uID8gIlRydWUiIDogIkZhbHNlIiwgMzAwLCAzMDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzaW0ubG9vcCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gOC4gQ09NUEFSSVNPTlMKICAgICAgICAgICAgY29tcGFyaXNvbjogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyBsZWZ0OiA1LCByaWdodDogNSB9OwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tY29udHJvbHMnKS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggZ2FwLTQgdy1mdWxsIGp1c3RpZnktY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtY2VudGVyIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImJsb2NrIGZvbnQtYm9sZCB0ZXh0LXB5LWJsdWUiPkxlZnQgV2VpZ2h0PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMSIgbWF4PSIxMCIgdmFsdWU9IjUiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLnN0YXRlLmxlZnQ9cGFyc2VJbnQodGhpcy52YWx1ZSkiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImNvbXAtbC12YWwiPjU8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGV4dC1jZW50ZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iYmxvY2sgZm9udC1ib2xkIHRleHQtcmVkLTYwMCI+UmlnaHQgV2VpZ2h0PC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iMSIgbWF4PSIxMCIgdmFsdWU9IjUiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLnN0YXRlLnJpZ2h0PXBhcnNlSW50KHRoaXMudmFsdWUpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJjb21wLXItdmFsIj41PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbCA9IHNpbS5zdGF0ZS5sZWZ0OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gc2ltLnN0YXRlLnJpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIGxhYmVscwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsVmFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbXAtbC12YWwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgclZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wLXItdmFsJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxWYWwpIGxWYWwudGV4dENvbnRlbnQgPSBsOwogICAgICAgICAgICAgICAgICAgICAgICBpZihyVmFsKSByVmFsLnRleHRDb250ZW50ID0gcjsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aWx0CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbmdsZSA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsID4gcikgYW5nbGUgPSAtMC4yOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyID4gbCkgYW5nbGUgPSAwLjI7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IFNjYWxlCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoMzAwLCAyMDApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmFzZQogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM3ZjhjOGQnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoLTEwLCAwLCAyMCwgMTAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKC0zMCwgMTAwKTsgY3R4LmxpbmVUbygzMCwgMTAwKTsgY3R4LmxpbmVUbygwLCAwKTsgY3R4LmZpbGwoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJlYW0KICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnJvdGF0ZShhbmdsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzk1YTVhNic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgtMTUwLCAtNSwgMzAwLCAxMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBQbGF0ZXMKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMzNDQ5NWUnOyBjdHgubGluZVdpZHRoID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGVmdCBQbGF0ZQogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oLTE0MCwgMCk7IGN0eC5saW5lVG8oLTE0MCwgNTApOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2VjZjBmMSc7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYygtMTQwLCA2MCwgMzAsIDAsIE1hdGguUEksIGZhbHNlKTsgY3R4LmZpbGwoKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBSaWdodCBQbGF0ZQogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMTQwLCAwKTsgY3R4LmxpbmVUbygxNDAsIDUwKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlY2YwZjEnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoMTQwLCA2MCwgMzAsIDAsIE1hdGguUEksIGZhbHNlKTsgY3R4LmZpbGwoKTsgY3R4LnN0cm9rZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2VpZ2h0cwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzMDY5OTgnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoLTE0MCwgNjAgLSAobCoyKSwgbCozLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnOyBjdHguZm9udCA9ICcxMnB4IHNhbnMtc2VyaWYnOyBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7IGN0eC5maWxsVGV4dChsLCAtMTQwLCA2NSAtIChsKjIpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2U3NGMzYyc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYygxNDAsIDYwIC0gKHIqMiksIHIqMywgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZpbGxUZXh0KHIsIDE0MCwgNjUgLSAocioyKSk7CgogICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyaXNvbiBUZXh0CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7IGN0eC5mb250ID0gJ2JvbGQgMjRweCBtb25vc3BhY2UnOyBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb21wID0gIj09IjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGwgPiByKSB7IGNvbXAgPSAiPiI7IH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAobCA8IHIpIHsgY29tcCA9ICI8IjsgfQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGAke2x9ICR7Y29tcH0gJHtyfWAsIDMwMCwgODApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmVlZGJhY2sKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGwgPT0gcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gIkVxdWFsIHdlaWdodHMgYmFsYW5jZSB0aGUgc2NhbGUuIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS5jbGFzc05hbWUgPSAibXQtMyB0ZXh0LWNlbnRlciBmb250LWJvbGQgdGV4dC1ncmVlbi02MDAgbWluLWgtWzEuNXJlbV0iOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gIlVuZXF1YWwgd2VpZ2h0cyB0aWx0IHRoZSBzY2FsZS4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLmNsYXNzTmFtZSA9ICJtdC0zIHRleHQtY2VudGVyIGZvbnQtYm9sZCB0ZXh0LWJyYW5kLWRhcmsgbWluLWgtWzEuNXJlbV0iOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyA5LiBJRiBTVEFURU1FTlQKICAgICAgICAgICAgaWZfc3RhdGVtZW50OiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IGNvbmRpdGlvbjogZmFsc2UsIGNoYXJYOiA1MCwgZ2F0ZUdhcDogMCB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc05hbWUgPSAicHgtNCBweS0yIGJnLXB1cnBsZS02MDAgdGV4dC13aGl0ZSByb3VuZGVkIGZvbnQtYm9sZCI7CiAgICAgICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gIlRvZ2dsZSBDb25kaXRpb24iOwogICAgICAgICAgICAgICAgICAgIGJ0bi5vbmNsaWNrID0gKCkgPT4gc2ltLnN0YXRlLmNvbmRpdGlvbiA9ICFzaW0uc3RhdGUuY29uZGl0aW9uOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tY29udHJvbHMnKS5hcHBlbmRDaGlsZChidG4pOwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBQYXRoCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2VjZjBmMSc7IGN0eC5maWxsUmVjdCgwLCAyMDAsIDYwMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIEdhdGUgR2FwCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW0uc3RhdGUuY29uZGl0aW9uICYmIHNpbS5zdGF0ZS5nYXRlR2FwIDwgNDApIHNpbS5zdGF0ZS5nYXRlR2FwICs9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2ltLnN0YXRlLmNvbmRpdGlvbiAmJiBzaW0uc3RhdGUuZ2F0ZUdhcCA+IDApIHNpbS5zdGF0ZS5nYXRlR2FwIC09IDI7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBHYXRlICgyIFJlY3RhbmdsZXMpCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBzaW0uc3RhdGUuY29uZGl0aW9uID8gJyMyZWNjNzEnIDogJyNlNzRjM2MnOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBUb3AgcGFydAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMzAwLCAxNTAgLSBzaW0uc3RhdGUuZ2F0ZUdhcCwgMjAsIDc1KTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQm90dG9tIHBhcnQKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDMwMCwgMjI1ICsgc2ltLnN0YXRlLmdhdGVHYXAsIDIwLCA3NSk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgaWYoKHNpbS5zdGF0ZS5jb25kaXRpb24gJiYgc2ltLnN0YXRlLmdhdGVHYXAgPj0gMzApIHx8IHNpbS5zdGF0ZS5jaGFyWCA8IDI4MCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLmNoYXJYICs9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2ltLnN0YXRlLmNoYXJYID4gNjAwKSBzaW0uc3RhdGUuY2hhclggPSAwOwoKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMzQ5OGRiJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHNpbS5zdGF0ZS5jaGFyWCwgMjI1LCAxNSwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvZGUKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgY3R4LmZvbnQgPSAnMTZweCBtb25vc3BhY2UnOyBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChgZ2F0ZV9vcGVuID0gJHtzaW0uc3RhdGUuY29uZGl0aW9uID8gJ1RydWUnIDogJ0ZhbHNlJ31gLCAzMDAsIDQwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJpZiBnYXRlX29wZW46IiwgMzAwLCA2NSk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2ltLnN0YXRlLmNvbmRpdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMmVjYzcxJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiICAgIG1vdmUoKSIsIDMwMCwgODUpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjOTVhNWE2JzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiICAgIG1vdmUoKSIsIDMwMCwgODUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZTc0YzNjJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiZWxzZToiLCAzMDAsIDEwNSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIiAgICBzdG9wKCkiLCAzMDAsIDEyNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDEwLiBFTFNFIFNUQVRFTUVOVAogICAgICAgICAgICBlbHNlX3N0YXRlbWVudDogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyBwYXRoOiAnZm9yZXN0JywgY2hhclg6IDUwIH07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICJweC00IHB5LTIgYmctYmx1ZS02MDAgdGV4dC13aGl0ZSByb3VuZGVkIGZvbnQtYm9sZCI7CiAgICAgICAgICAgICAgICAgICAgYnRuLnRleHRDb250ZW50ID0gIlRvZ2dsZSBQYXRoIjsKICAgICAgICAgICAgICAgICAgICBidG4ub25jbGljayA9ICgpID0+IHNpbS5zdGF0ZS5wYXRoID0gc2ltLnN0YXRlLnBhdGggPT09ICdmb3Jlc3QnID8gJ2NhdmUnIDogJ2ZvcmVzdCc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jb250cm9scycpLmFwcGVuZENoaWxkKGJ0bik7CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcmsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZWNmMGYxJzsgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAxNTAsIDMwMCwgNTApOyAvLyBNYWluCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygzMDAsIDE1MCk7IGN0eC5saW5lVG8oNjAwLCA1MCk7IGN0eC5saW5lVG8oNjAwLCAxMDApOyBjdHgubGluZVRvKDMwMCwgMjAwKTsgY3R4LmZpbGwoKTsgLy8gVG9wIChGb3Jlc3QpCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygzMDAsIDE1MCk7IGN0eC5saW5lVG8oNjAwLCAyNTApOyBjdHgubGluZVRvKDYwMCwgMzAwKTsgY3R4LmxpbmVUbygzMDAsIDIwMCk7IGN0eC5maWxsKCk7IC8vIEJvdHRvbSAoQ2F2ZSkKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExhYmVscwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMyN2FlNjAnOyBjdHguZm9udCA9ICdib2xkIDIwcHggc2Fucy1zZXJpZic7IGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsgY3R4LmZpbGxUZXh0KCJGb3Jlc3QiLCA1MDAsIDgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjOGU0NGFkJzsgY3R4LmZpbGxUZXh0KCJDYXZlIiwgNTAwLCAyODApOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5jaGFyWCArPSAyOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzaW0uc3RhdGUuY2hhclggPiA2MDApIHNpbS5zdGF0ZS5jaGFyWCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hhclkgPSAxNzU7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW0uc3RhdGUuY2hhclggPiAzMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW0uc3RhdGUucGF0aCA9PT0gJ2ZvcmVzdCcpIGNoYXJZID0gMTc1IC0gKHNpbS5zdGF0ZS5jaGFyWCAtIDMwMCkgKiAwLjMzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBjaGFyWSA9IDE3NSArIChzaW0uc3RhdGUuY2hhclggLSAzMDApICogMC4zMzsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZTc0YzNjJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHNpbS5zdGF0ZS5jaGFyWCwgY2hhclksIDE1LCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29kZQogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZm9udCA9ICcxNnB4IG1vbm9zcGFjZSc7IGN0eC50ZXh0QWxpZ24gPSAnbGVmdCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChgcGF0aCA9ICcke3NpbS5zdGF0ZS5wYXRofSdgLCAyMCwgNDApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoImlmIHBhdGggPT0gJ2ZvcmVzdCc6IiwgMjAsIDY1KTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHNpbS5zdGF0ZS5wYXRoID09PSAnZm9yZXN0JyA/ICcjMmVjYzcxJyA6ICcjOTVhNWE2JzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCIgICAgZ29fZm9yZXN0KCkiLCA0MCwgODUpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoImVsc2U6IiwgMjAsIDEwNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBzaW0uc3RhdGUucGF0aCA9PT0gJ2NhdmUnID8gJyMyZWNjNzEnIDogJyM5NWE1YTYnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIiAgICBnb19jYXZlKCkiLCA0MCwgMTI1KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDExLiBMSVNUUwogICAgICAgICAgICBsaXN0czogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyBpdGVtczogW10gfTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NOYW1lID0gIm1sLTIgcHgtNCBweS0yIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcm91bmRlZCBmb250LWJvbGQiOwogICAgICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICJBZGQgSXRlbSI7CiAgICAgICAgICAgICAgICAgICAgYnRuLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNpbS5zdGF0ZS5pdGVtcy5sZW5ndGggPCA1KSBzaW0uc3RhdGUuaXRlbXMucHVzaChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwKSk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWNvbnRyb2xzJykuYXBwZW5kQ2hpbGQoYnRuKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25zdCBidG4yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICAgICAgICAgICAgYnRuMi5jbGFzc05hbWUgPSAibWwtMiBweC00IHB5LTIgYmctcmVkLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgZm9udC1ib2xkIjsKICAgICAgICAgICAgICAgICAgICBidG4yLnRleHRDb250ZW50ID0gIlBvcCBJdGVtIjsKICAgICAgICAgICAgICAgICAgICBidG4yLm9uY2xpY2sgPSAoKSA9PiBzaW0uc3RhdGUuaXRlbXMucG9wKCk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jb250cm9scycpLmFwcGVuZENoaWxkKGJ0bjIpOwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBMaXN0IEJyYWNrZXRzCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7IGN0eC5mb250ID0gJ2JvbGQgNjBweCBtb25vc3BhY2UnOyBjdHgudGV4dEFsaWduID0gJ2xlZnQnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIlsiLCA1MCwgMjAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJdIiwgNTAgKyAoc2ltLnN0YXRlLml0ZW1zLmxlbmd0aCAqIDgwKSArIDIwLCAyMDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXRlbXMKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLml0ZW1zLmZvckVhY2goKGl0ZW0sIGkpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2YxYzQwZic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoODAgKyBpKjgwLCAxNTAsIDYwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZm9udCA9ICcyMHB4IG1vbm9zcGFjZSc7IGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChpdGVtLCAxMTAgKyBpKjgwLCAxOTApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmRleAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjN2Y4YzhkJzsgY3R4LmZvbnQgPSAnMTRweCBtb25vc3BhY2UnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGksIDExMCArIGkqODAsIDIzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzaW0ubG9vcCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gMTIuIElOREVYSU5HCiAgICAgICAgICAgIGluZGV4aW5nOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IHNlbGVjdGVkOiBudWxsIH07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbXMgPSBbIlJlZCBQb3Rpb24iLCAiQmx1ZSBQb3Rpb24iLCAiR3JlZW4gUG90aW9uIiwgIlllbGxvdyBQb3Rpb24iXTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xvcnMgPSBbIiNlZjQ0NDQiLCAiIzNiODJmNiIsICIjMjJjNTVlIiwgIiNlYWIzMDgiXTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWNvbnRyb2xzJyk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGJ1dHRvbnMgZm9yIGluZGljZXMKICAgICAgICAgICAgICAgICAgICBjb25zdCBidG5Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgICAgICBidG5Db250YWluZXIuY2xhc3NOYW1lID0gImZsZXggZ2FwLTIganVzdGlmeS1jZW50ZXIiOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0sIGkpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc05hbWUgPSAicHgtNCBweS0yIGJnLWdyYXktMjAwIGhvdmVyOmJnLWdyYXktMzAwIHJvdW5kZWQgZm9udC1ib2xkIGZvbnQtbW9ubyI7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9IGBbJHtpfV1gOwogICAgICAgICAgICAgICAgICAgICAgICBidG4ub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5zZWxlY3RlZCA9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSBgaW52ZW50b3J5WyR7aX1dID09ICcke2l0ZW19J2A7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykuY2xhc3NOYW1lID0gIm10LTMgdGV4dC1jZW50ZXIgZm9udC1ib2xkIHRleHQtcHktYmx1ZSBtaW4taC1bMS41cmVtXSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bkNvbnRhaW5lci5hcHBlbmRDaGlsZChidG4pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChidG5Db250YWluZXIpOwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IFNoZWxmCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzhCNDUxMyc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCg1MCwgMjUwLCA1MDAsIDIwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgSXRlbXMKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSwgaSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeCA9IDExMCArIGkgKiAxMjA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5ID0gMjAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIaWdobGlnaHQgc2VsZWN0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2ltLnN0YXRlLnNlbGVjdGVkID09PSBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwgMjEyLCA1OSwgMC4zKSc7IC8vIHB5LXllbGxvdyB0cmFuc3BhcmVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh4IC0gNTAsIHkgLSA2MCwgMTAwLCAxMjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjRkZENDNCJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlUmVjdCh4IC0gNTAsIHkgLSA2MCwgMTAwLCAxMjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBvdGlvbiBCb3R0bGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcnNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmFyYyh4LCB5ICsgMjAsIDI1LCAwLCBNYXRoLlBJKjIpOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoeCAtIDEwLCB5IC0gMzAsIDIwLCA1MCk7IC8vIE5lY2sKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IC8vIENvcmsvSGlnaGxpZ2h0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoeCAtIDEyLCB5IC0gMzUsIDI0LCAxMCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5kZXggTGFiZWwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICdib2xkIDIwcHggbW9ub3NwYWNlJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChpLCB4LCAzMDApOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gJzE2cHggc2Fucy1zZXJpZic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgiSW5kaWNlcyBzdGFydCBhdCAwISIsIDMwMCwgMzMwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDEzLiBGT1IgTE9PUAogICAgICAgICAgICBmb3JfbG9vcDogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyBpZHg6IDAsIHQ6IDAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IGlkeDogMCwgdDogMCwgcnVubmluZzogZmFsc2UgfTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpc2xhbmRzID0gWzEwMCwgMjAwLCAzMDAsIDQwMCwgNTAwXTsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICJweC00IHB5LTIgYmctZ3JlZW4tNjAwIHRleHQtd2hpdGUgcm91bmRlZCBmb250LWJvbGQiOwogICAgICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICJTdGFydCBMb29wIjsKICAgICAgICAgICAgICAgICAgICBidG4ub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLnJ1bm5pbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBidG4uZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS01MCcsICdjdXJzb3Itbm90LWFsbG93ZWQnKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tY29udHJvbHMnKS5hcHBlbmRDaGlsZChidG4pOwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNpbS5zdGF0ZS5ydW5uaW5nKSBzaW0uc3RhdGUudCArPSAwLjA1OwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSXNsYW5kcwogICAgICAgICAgICAgICAgICAgICAgICBpc2xhbmRzLmZvckVhY2goKHgsIGkpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBpID09PSBNYXRoLmZsb29yKHNpbS5zdGF0ZS5pZHgpID8gJyMyZWNjNzEnIDogJyM5NWE1YTYnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHgsIDI1MCwgMzAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnOyBjdHguZm9udCA9ICcxNnB4IG1vbm9zcGFjZSc7IGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChpLCB4LCAyNTUpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50WCA9IGlzbGFuZHNbTWF0aC5mbG9vcihzaW0uc3RhdGUuaWR4KV07CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2U3NGMzYyc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhjdXJyZW50WCwgMjAwICsgTWF0aC5zaW4oc2ltLnN0YXRlLnQqNSkqMTAsIDE1LCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gTG9naWMKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2ltLnN0YXRlLnQgPiAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUudCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUuaWR4ID0gKHNpbS5zdGF0ZS5pZHggKyAxKSAlIGlzbGFuZHMubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZm9udCA9ICcyMHB4IG1vbm9zcGFjZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChgZm9yIGkgaW4gaXNsYW5kczogdmlzaXQoaXNsYW5kWyR7TWF0aC5mbG9vcihzaW0uc3RhdGUuaWR4KX1dKWAsIDMwMCwgMTAwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDE0LiBSQU5HRQogICAgICAgICAgICByYW5nZTogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyBuOiA1IH07CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jb250cm9scycpLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgdy1mdWxsIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iZm9udC1ib2xkIHRleHQtZ3JheS03MDAgbWItMiBmb250LW1vbm8iPnJhbmdlKDxzcGFuIGlkPSJybmctdmFsIj41PC9zcGFuPik8L2xhYmVsPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhbmdlIiBtaW49IjEiIG1heD0iMTAiIHZhbHVlPSI1IiBjbGFzcz0idy1mdWxsIG1heC13LXhzIiBvbmlucHV0PSJTaW11bGF0aW9ucy5zdGF0ZS5uPXBhcnNlSW50KHRoaXMudmFsdWUpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm5nLXZhbCcpLnRleHRDb250ZW50PXRoaXMudmFsdWU7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHNpbS5zdGF0ZS5uOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydFggPSA1MDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3BhY2luZyA9IDUwMCAvIE1hdGgubWF4KG4sIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnMjBweCBtb25vc3BhY2UnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IGdlbmVyYXRlZCBudW1iZXJzCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPG47IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeCA9IHN0YXJ0WCArIGkgKiBzcGFjaW5nICsgc3BhY2luZy8yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeSA9IDE3NTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQm94CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzMDY5OTgnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHggLSAyMCwgeSAtIDIwLCA0MCwgNDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOdW1iZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoaSwgeCwgeSArIDcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb25uZWN0aW9uIGxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpIDwgbiAtIDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI0ZGRDQzQic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oeCArIDIwLCB5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHggKyBzcGFjaW5nIC0gMjAsIHkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29kZSBkaXNwbGF5CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gJzI0cHggbW9ub3NwYWNlJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGBsaXN0KHJhbmdlKCR7bn0pKWAsIDMwMCwgODApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjNTU1JzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAnMThweCBtb25vc3BhY2UnOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBBcnJheS5mcm9tKHtsZW5ndGg6IG59LCAoXywgaSkgPT4gaSkuam9pbignLCAnKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGBbJHtyZXN1bHR9XWAsIDMwMCwgMjgwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDE1LiBXSElMRSBMT09QCiAgICAgICAgICAgIHdoaWxlX2xvb3A6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgbGV2ZWw6IDAgfTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NOYW1lID0gInB4LTQgcHktMiBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgZm9udC1ib2xkIjsKICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAiUmVzZXQgQnVja2V0IjsKICAgICAgICAgICAgICAgICAgICBidG4ub25jbGljayA9ICgpID0+IHNpbS5zdGF0ZS5sZXZlbCA9IDA7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jb250cm9scycpLmFwcGVuZENoaWxkKGJ0bik7CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJ1Y2tldAogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzM0NDk1ZSc7IGN0eC5saW5lV2lkdGggPSA1OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlUmVjdCgyNTAsIDE5MCwgMTAwLCAxNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2F0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2ltLnN0YXRlLmxldmVsIDwgMTUwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUubGV2ZWwgKz0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZsb3dpbmcgd2F0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzM0OThkYic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMjkwLCA5MCwgMjAsIDI1MCAtIHNpbS5zdGF0ZS5sZXZlbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzM0OThkYic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgyNTAsIDM0MCAtIHNpbS5zdGF0ZS5sZXZlbCwgMTAwLCBzaW0uc3RhdGUubGV2ZWwpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29kZQogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZm9udCA9ICcxNnB4IG1vbm9zcGFjZSc7IGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJ3aGlsZSBidWNrZXRfZnVsbCA9PSBGYWxzZToiLCAzMDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCIgICAgYWRkX3dhdGVyKCkiLCAzMDAsIDcwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDE2LiBGVU5DVElPTlMKICAgICAgICAgICAgZnVuY3Rpb25zOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IHNwZWxsczogW10gfTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb25zdCBjcmVhdGVCdG4gPSAobmFtZSwgY29sb3IpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc05hbWUgPSBgcHgtMyBweS0yIG0tMSB0ZXh0LXdoaXRlIHJvdW5kZWQgZm9udC1ib2xkIHNoYWRvdyBob3ZlcjpvcGFjaXR5LTkwYDsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yOwogICAgICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSBgJHtuYW1lfSgpYDsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUuc3BlbGxzLnB1c2goeyB0eXBlOiBuYW1lLCB4OiA5MCwgeTogMjAwLCB0OiAwLCBjb2xvcjogY29sb3IgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSBgRXhlY3V0ZWQ6ICR7bmFtZX0oKWA7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tY29udHJvbHMnKS5hcHBlbmRDaGlsZChidG4pOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGNyZWF0ZUJ0bignZmlyZWJhbGwnLCAnI2U3NGMzYycpOwogICAgICAgICAgICAgICAgICAgIGNyZWF0ZUJ0bignaGVhbCcsICcjMmVjYzcxJyk7CiAgICAgICAgICAgICAgICAgICAgY3JlYXRlQnRuKCdzaGllbGQnLCAnIzM0OThkYicpOwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBXaXphcmQKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjOGU0NGFkJzsgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCg1MCwgMjAwLCA0MCwgODApOyAvLyBCb2R5CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyg3MCwgMTkwLCAyMCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgLy8gSGVhZAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM1ZTMzNzAnOyAvLyBIYXQKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDUwLCAxODApOyBjdHgubGluZVRvKDkwLCAxODApOyBjdHgubGluZVRvKDcwLCAxMzApOyBjdHguZmlsbCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3BlbGxzCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBzaW0uc3RhdGUuc3BlbGxzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcyA9IHNpbS5zdGF0ZS5zcGVsbHNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnQrKzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMudHlwZSA9PT0gJ2ZpcmViYWxsJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMueCArPSA4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBzLmNvbG9yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhzLngsIHMueSwgMTAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHMueCA+IDY1MCkgc2ltLnN0YXRlLnNwZWxscy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMudHlwZSA9PT0gJ2hlYWwnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy55IC09IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHMuY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSAiMjRweCBzYW5zLXNlcmlmIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIuKcmiIsIDcwLCBzLnkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzLnQgPiA1MCkgc2ltLnN0YXRlLnNwZWxscy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMudHlwZSA9PT0gJ3NoaWVsZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzLmNvbG9yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSA0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyg3MCwgMjQwLCA1MCwgTWF0aC5QSSwgMCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocy50ID4gNTApIHNpbS5zdGF0ZS5zcGVsbHMuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBDb2RlIEJsb2NrCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7IGN0eC5mb250ID0gJzE2cHggbW9ub3NwYWNlJzsgY3R4LnRleHRBbGlnbiA9ICdsZWZ0JzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJkZWYgZmlyZWJhbGwoKTogYXR0YWNrKCkiLCAzNTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJkZWYgaGVhbCgpOiByZWNvdmVyKCkiLCAzNTAsIDc1KTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJkZWYgc2hpZWxkKCk6IHByb3RlY3QoKSIsIDM1MCwgMTAwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDE3LiBQQVJBTUVURVJTCiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgY29sb3I6ICcjYmRjM2M3JywgbmFtZTogJ05vbmUnLCBidWJibGVzOiBbXSB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jb250cm9scycpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZ3JlZGllbnRzID0gWwogICAgICAgICAgICAgICAgICAgICAgICB7IG5hbWU6ICInZnJvZ19sZWcnIiwgbGFiZWw6ICJGcm9nIExlZyIsIGNvbG9yOiAiIzJlY2M3MSIgfSwKICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lOiAiJ2JhdF93aW5nJyIsIGxhYmVsOiAiQmF0IFdpbmciLCBjb2xvcjogIiM5YjU5YjYiIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHsgbmFtZTogIidmaXJlX2R1c3QnIiwgbGFiZWw6ICJGaXJlIER1c3QiLCBjb2xvcjogIiNlNzRjM2MiIH0KICAgICAgICAgICAgICAgICAgICBdOwoKICAgICAgICAgICAgICAgICAgICBpbmdyZWRpZW50cy5mb3JFYWNoKGluZyA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NOYW1lID0gInB4LTMgcHktMSBtLTEgdGV4dC13aGl0ZSByb3VuZGVkIGZvbnQtYm9sZCBzaGFkb3ctc20gaG92ZXI6b3BhY2l0eS05MCI7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBpbmcuY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9IGluZy5sYWJlbDsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUuY29sb3IgPSBpbmcuY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUubmFtZSA9IGluZy5uYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGJ1YmJsZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDU7IGkrKykgc2ltLnN0YXRlLmJ1YmJsZXMucHVzaCh7eDogMzAwICsgKE1hdGgucmFuZG9tKCktMC41KSo0MCwgeTogMjIwLCByOiBNYXRoLnJhbmRvbSgpKjUrMiwgczogTWF0aC5yYW5kb20oKSsxfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xzLmFwcGVuZENoaWxkKGJ0bik7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhdWxkcm9uCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzM0NDk1ZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYygzMDAsIDI1MCwgNjAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7IC8vIEJvd2wKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDI0MCwgMjAwLCAxMjAsIDUwKTsgLy8gVG9wCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBMaXF1aWQKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHNpbS5zdGF0ZS5jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguZWxsaXBzZSgzMDAsIDIxMCwgNTAsIDgsIDAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBCdWJibGVzCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT1zaW0uc3RhdGUuYnViYmxlcy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYiA9IHNpbS5zdGF0ZS5idWJibGVzW2ldOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYi55IC09IGIuczsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBzaW0uc3RhdGUuY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoYi54LCBiLnksIGIuciwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDEuMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGIueSA8IDE1MCkgc2ltLnN0YXRlLmJ1YmJsZXMuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBSaW0gZnJvbnQgKHRvIGNvdmVyIGxpcXVpZCkKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMyYzNlNTAnOyBjdHgubGluZVdpZHRoID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguZWxsaXBzZSgzMDAsIDIwMCwgNjAsIDEwLCAwLCAwLCBNYXRoLlBJKjIpOyBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBDb2RlCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7IGN0eC5mb250ID0gJzIwcHggbW9ub3NwYWNlJzsgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2ltLnN0YXRlLm5hbWUgIT09ICdOb25lJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGBicmV3X3BvdGlvbigke3NpbS5zdGF0ZS5uYW1lfSlgLCAzMDAsIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoYGJyZXdfcG90aW9uKC4uLilgLCAzMDAsIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDE4LiBSRVRVUk4KICAgICAgICAgICAgcmV0dXJuOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IHBoYXNlOiAnaWRsZScsIGJ4OiA1MCwgZ29sZDogZmFsc2UgfTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NOYW1lID0gInB4LTQgcHktMiBiZy15ZWxsb3ctNTAwIHRleHQtd2hpdGUgcm91bmRlZCBmb250LWJvbGQgc2hhZG93LWxnIGhvdmVyOmJnLXllbGxvdy02MDAiOwogICAgICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICJHZXQgR29sZCI7CiAgICAgICAgICAgICAgICAgICAgYnRuLm9uY2xpY2sgPSAoKSA9PiB7IGlmKHNpbS5zdGF0ZS5waGFzZSA9PT0gJ2lkbGUnKSBzaW0uc3RhdGUucGhhc2UgPSAnb3V0JzsgfTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWNvbnRyb2xzJykuYXBwZW5kQ2hpbGQoYnRuKTsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGVybyAmIENoZXN0CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzM0NDk1ZSc7IGN0eC5maWxsUmVjdCgyMCwgMjAwLCAzMCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNkMzU0MDAnOyBjdHguZmlsbFJlY3QoNTAwLCAyMjAsIDYwLCA0MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBMb2dpYwogICAgICAgICAgICAgICAgICAgICAgICBpZihzaW0uc3RhdGUucGhhc2UgPT09ICdvdXQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUuYnggKz0gMTU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzaW0uc3RhdGUuYnggPj0gNTAwKSB7IHNpbS5zdGF0ZS5waGFzZSA9ICdiYWNrJzsgc2ltLnN0YXRlLmdvbGQgPSB0cnVlOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihzaW0uc3RhdGUucGhhc2UgPT09ICdiYWNrJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLmJ4IC09IDE1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2ltLnN0YXRlLmJ4IDw9IDUwKSB7IHNpbS5zdGF0ZS5waGFzZSA9ICdpZGxlJzsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gIlJldHVybmVkOiAxMDAgR29sZCI7IH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQm9vbWVyYW5nCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7IGN0eC50cmFuc2xhdGUoc2ltLnN0YXRlLmJ4LCAyMjApOyBjdHgucm90YXRlKERhdGUubm93KCkvNTApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmMWM0MGYnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5lbGxpcHNlKDAsIDAsIDIwLCA1LCAwLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzaW0uc3RhdGUuZ29sZCAmJiBzaW0uc3RhdGUucGhhc2UgIT09ICdpZGxlJykgeyBjdHguZmlsbFN0eWxlPScjZmZmJzsgY3R4LmZpbGxUZXh0KCLwn5KwIiwgLTEwLCA1KTsgfQogICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29kZQogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZm9udCA9ICcxOHB4IG1vbm9zcGFjZSc7IGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJkZWYgZ2V0X2xvb3QoKTogcmV0dXJuIDEwMCIsIDMwMCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzaW0uc3RhdGUucGhhc2UgPT09ICdpZGxlJyAmJiBzaW0uc3RhdGUuZ29sZCkgY3R4LmZpbGxUZXh0KCJteV9nb2xkID0gMTAwIiwgMzAwLCAxMDApOwoKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzaW0ubG9vcCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gMTkuIERJQ1RJT05BUklFUwogICAgICAgICAgICBkaWN0aW9uYXJpZXM6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsga2V5OiAnJyB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICAgICAgICAgICAgICBpbnB1dC50eXBlID0gJ3RleHQnOwogICAgICAgICAgICAgICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gIkVudGVyIEtleSAoYXBwbGUsIGJhbmFuYSkiOwogICAgICAgICAgICAgICAgICAgIGlucHV0LmNsYXNzTmFtZSA9ICJwLTIgYm9yZGVyIHJvdW5kZWQgbXItMiI7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICJweC00IHB5LTIgYmctZ3JlZW4tNjAwIHRleHQtd2hpdGUgcm91bmRlZCBmb250LWJvbGQiOwogICAgICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9ICJMb29rdXAiOwogICAgICAgICAgICAgICAgICAgIGJ0bi5vbmNsaWNrID0gKCkgPT4gc2ltLnN0YXRlLmtleSA9IGlucHV0LnZhbHVlLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jb250cm9scycpOwogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbnB1dCk7CiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGJ0bik7CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7ICdhcHBsZSc6ICfwn5S0JywgJ2JhbmFuYSc6ICfwn42MJywgJ2dyYXBlJzogJ/CfjYcnIH07CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgRGljdGlvbmFyeQogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzNDQ5NWUnOyBjdHguZmlsbFJlY3QoMTAwLCAxMDAsIDQwMCwgMTUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZvbnQgPSAnMjBweCBtb25vc3BhY2UnOyBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dCgieyAnYXBwbGUnOiAn8J+UtCcsICdiYW5hbmEnOiAn8J+NjCcgfSIsIDMwMCwgMTgwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc3VsdAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSBkYXRhW3NpbS5zdGF0ZS5rZXldOwogICAgICAgICAgICAgICAgICAgICAgICBpZih2YWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gJzYwcHggc2VyaWYnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KHZhbCwgMzAwLCAzMjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gYEZvdW5kIHZhbHVlIGZvciBrZXkgJyR7c2ltLnN0YXRlLmtleX0nYDsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaW0uc3RhdGUua2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICcyMHB4IHNhbnMtc2VyaWYnOyBjdHguZmlsbFN0eWxlID0gJyNlNzRjM2MnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJLZXlFcnJvciIsIDMwMCwgMzIwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJLZXkgbm90IGZvdW5kLiI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDIwLiBNT0RVTEVTCiAgICAgICAgICAgIG1vZHVsZXM6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgaW1wb3J0ZWQ6IGZhbHNlLCBkaWVWYWx1ZTogbnVsbCB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0bkltcG9ydCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgICAgICAgICAgIGJ0bkltcG9ydC5jbGFzc05hbWUgPSAicHgtNCBweS0yIGJnLXB1cnBsZS02MDAgdGV4dC13aGl0ZSByb3VuZGVkIGZvbnQtYm9sZCBtci0yIjsKICAgICAgICAgICAgICAgICAgICBidG5JbXBvcnQudGV4dENvbnRlbnQgPSAiaW1wb3J0IHJhbmRvbSI7CiAgICAgICAgICAgICAgICAgICAgYnRuSW1wb3J0Lm9uY2xpY2sgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5pbXBvcnRlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bkltcG9ydC5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bkltcG9ydC5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LTUwJywgJ2N1cnNvci1ub3QtYWxsb3dlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJSb2xsQnV0dG9uKCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWNvbnRyb2xzJykuYXBwZW5kQ2hpbGQoYnRuSW1wb3J0KTsKCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVuZGVyUm9sbEJ1dHRvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuUm9sbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgICAgICAgICAgICAgICBidG5Sb2xsLmNsYXNzTmFtZSA9ICJweC00IHB5LTIgYmctZ3JlZW4tNjAwIHRleHQtd2hpdGUgcm91bmRlZCBmb250LWJvbGQiOwogICAgICAgICAgICAgICAgICAgICAgICBidG5Sb2xsLnRleHRDb250ZW50ID0gInJhbmRvbS5yYW5kaW50KDEsIDYpIjsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuUm9sbC5vbmNsaWNrID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJvbGxzID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5kaWVWYWx1ZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYpICsgMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xscysrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb2xscyA+IDEwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSBgUm9sbGVkOiAke3NpbS5zdGF0ZS5kaWVWYWx1ZX1gOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jb250cm9scycpLmFwcGVuZENoaWxkKGJ0blJvbGwpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGlicmFyeSBTaGVsZgogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM1RDQwMzcnOyBjdHguZmlsbFJlY3QoNTAsIDUwLCA1MDAsIDI1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzhCNDUxMyc7IGN0eC5maWxsUmVjdCg2MCwgNjAsIDQ4MCwgMjMwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjQTA1MjJEJzsgY3R4LmZpbGxSZWN0KDYwLCAxMzAsIDQ4MCwgMTApOyBjdHguZmlsbFJlY3QoNjAsIDIxMCwgNDgwLCAxMCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBCb29rcwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBib29rcyA9IFsnbWF0aCcsICd0aW1lJywgJ29zJywgJ3N5cycsICdqc29uJ107CiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2tzLmZvckVhY2goKGIsIGkpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBgaHNsKCR7aSAqIDYwfSwgNjAlLCA0MCUpYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCg4MCArIGkqNDAsIDcwLCAzMCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZvbnQgPSAnMTBweCBtb25vc3BhY2UnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsgY3R4LnRyYW5zbGF0ZSg5NSArIGkqNDAsIDEyMCk7IGN0eC5yb3RhdGUoLU1hdGguUEkvMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoYiwgMCwgMCk7IGN0eC5yZXN0b3JlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpbS5zdGF0ZS5pbXBvcnRlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjOGU0NGFkJzsgY3R4LmZpbGxSZWN0KDMwMCwgMTgwLCA2MCwgODApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZvbnQgPSAnMTJweCBtb25vc3BhY2UnOyBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoInJhbmRvbSIsIDMzMCwgMjIwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpbS5zdGF0ZS5kaWVWYWx1ZSAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IGN0eC5maWxsUmVjdCg0MDAsIDE4MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlUmVjdCg0MDAsIDE4MCwgNjAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZm9udCA9ICc0MHB4IHNhbnMtc2VyaWYnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChzaW0uc3RhdGUuZGllVmFsdWUsIDQzMCwgMjI1KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyAyMS4gQ0xBU1NFUwogICAgICAgICAgICBjbGFzc2VzOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IHJvYm90czogW10gfTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NOYW1lID0gInB4LTQgcHktMiBiZy1ncmF5LTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgZm9udC1ib2xkIjsKICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAicm9ib3QgPSBSb2JvdCgpIjsKICAgICAgICAgICAgICAgICAgICBidG4ub25jbGljayA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2ltLnN0YXRlLnJvYm90cy5sZW5ndGggPCA1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUucm9ib3RzLnB1c2goe3g6IDUwICsgc2ltLnN0YXRlLnJvYm90cy5sZW5ndGggKiAxMDAsIGNvbG9yOiAnIzk1YTVhNid9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jb250cm9scycpLmFwcGVuZENoaWxkKGJ0bik7CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsdWVwcmludAogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzM0OThkYic7IGN0eC5saW5lV2lkdGggPSAyOyBjdHguc2V0TGluZURhc2goWzUsNV0pOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlUmVjdCgyNTAsIDIwLCAxMDAsIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzM0OThkYic7IGN0eC5mb250ID0gJzE0cHggc2Fucy1zZXJpZic7IGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJDbGFzcyBSb2JvdCIsIDMwMCwgNzUpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc2V0TGluZURhc2goW10pOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5zdGFuY2VzCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5yb2JvdHMuZm9yRWFjaChyID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSByLmNvbG9yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHIueCwgMjAwLCA2MCwgODApOyAvLyBCb2R5CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3Qoci54ICsgMTUsIDE3MCwgMzAsIDMwKTsgLy8gSGVhZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhyLnggKyAyNSwgMTg1LCAzLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHIueCArIDM1LCAxODUsIDMsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzaW0ubG9vcCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gMjIuIE9CSkVDVFMKICAgICAgICAgICAgb2JqZWN0czogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyByb2JvdHM6IFtdIH07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3JzID0gWydyZWQnLCAnYmx1ZScsICdncmVlbicsICdwdXJwbGUnXTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBjb2xvcnMuZm9yRWFjaChjb2xvciA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NOYW1lID0gYHB4LTMgcHktMSBtLTEgdGV4dC13aGl0ZSByb3VuZGVkIGZvbnQtYm9sZCBjYXBpdGFsaXplIHNoYWRvdy1zbSBob3ZlcjpvcGFjaXR5LTkwYDsKICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yID09PSAncmVkJyA/ICcjZWY0NDQ0JyA6IChjb2xvciA9PT0gJ2JsdWUnID8gJyMzYjgyZjYnIDogKGNvbG9yID09PSAnZ3JlZW4nID8gJyMyMmM1NWUnIDogJyNhODU1ZjcnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi50ZXh0Q29udGVudCA9IGBSb2JvdCgnJHtjb2xvcn0nKWA7CiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5vbmNsaWNrID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2ltLnN0YXRlLnJvYm90cy5sZW5ndGggPCA4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLnJvYm90cy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogNTAgKyBNYXRoLnJhbmRvbSgpICogNTAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiAyMDAgKyBNYXRoLnJhbmRvbSgpICogNTAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBidG4uc3R5bGUuYmFja2dyb3VuZENvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogMC41ICsgTWF0aC5yYW5kb20oKSAqIDAuNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW0uc3RhdGUucm9ib3RzLmxlbmd0aCA+PSA4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tY29udHJvbHMnKS5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25zLmZvckVhY2goYiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktNTAnLCAnY3Vyc29yLW5vdC1hbGxvd2VkJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tY29udHJvbHMnKS5hcHBlbmRDaGlsZChidG4pOwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNiZGMzYzcnOyBjdHguZmlsbFJlY3QoMCwgMjUwLCA2MDAsIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUucm9ib3RzLmZvckVhY2gociA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByLnggKz0gci5zcGVlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHIueCA8IDIwIHx8IHIueCA+IDU4MCkgci5zcGVlZCAqPSAtMTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShyLngsIHIueSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc2NhbGUoci5zY2FsZSwgci5zY2FsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSByLmNvbG9yOyBjdHguZmlsbFJlY3QoLTIwLCAtNDAsIDQwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM5NWE1YTYnOyBjdHguZmlsbFJlY3QoLTE1LCAtNjAsIDMwLCAyMCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoLTcsIC01MCwgNSwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyg3LCAtNTAsIDUsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKC03LCAtNTAsIDIsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoNywgLTUwLCAyLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzdmOGM4ZCc7IGN0eC5saW5lV2lkdGggPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKC0yMCwgLTMwKTsgY3R4LmxpbmVUbygtMzUsIC0xMCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygyMCwgLTMwKTsgY3R4LmxpbmVUbygzNSwgLTEwKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM3ZjhjOGQnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KC0xNSwgMjAsIDEwLCAzMCk7IGN0eC5maWxsUmVjdCg1LCAyMCwgMTAsIDMwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDIzLiBERUJVR0dJTkcKICAgICAgICAgICAgZGVidWdnaW5nOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IGZpeGVkOiBmYWxzZSwgYnVnOiB7eDogMCwgeTogMCwgdDogMH0gfTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBzaW0uY2FudmFzLm9uY2xpY2sgPSAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gc2ltLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbXggPSBlLmNsaWVudFggLSByZWN0LmxlZnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG15ID0gZS5jbGllbnRZIC0gcmVjdC50b3A7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkeCA9IG14IC0gc2ltLnN0YXRlLmJ1Zy54OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkeSA9IG15IC0gc2ltLnN0YXRlLmJ1Zy55OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNpbS5zdGF0ZS5maXhlZCAmJiBNYXRoLnNxcnQoZHgqZHggKyBkeSpkeSkgPCAzMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLmZpeGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJCdWcgU3F1YXNoZWQhIFN5bnRheCBFcnJvciBGaXhlZC4iOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLmNsYXNzTmFtZSA9ICJtdC0zIHRleHQtY2VudGVyIGZvbnQtYm9sZCB0ZXh0LWdyZWVuLTYwMCBtaW4taC1bMS41cmVtXSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBFZGl0b3IgV2luZG93CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzI4MmMzNCc7IGN0eC5maWxsUmVjdCg1MCwgMjAsIDUwMCwgMjAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExpbmUgbnVtYmVycwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM0YjUyNjMnOyBjdHguZm9udCA9ICcyMHB4IG1vbm9zcGFjZSc7IGN0eC50ZXh0QWxpZ24gPSAncmlnaHQnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIjEiLCA4MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIjIiLCA4MCwgOTApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIjMiLCA4MCwgMTIwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvZGUKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdsZWZ0JzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjYzY3OGRkJzsgY3R4LmZpbGxUZXh0KCJkZWYiLCAxMDAsIDYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjNjFhZmVmJzsgY3R4LmZpbGxUZXh0KCJncmVldCIsIDE0MCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNhYmIyYmYnOyBjdHguZmlsbFRleHQoIihuYW1lKSIsIDIwMCwgNjApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpbS5zdGF0ZS5maXhlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjYWJiMmJmJzsgY3R4LmZpbGxUZXh0KCI6IiwgMjcwLCA2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2UwNmM3NSc7IGN0eC5maWxsVGV4dCgicHJpbnQiLCAxNDAsIDkwKTsgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2FiYjJiZic7IGN0eC5maWxsVGV4dCgiKCIsIDIwMCwgOTApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM5OGMzNzknOyBjdHguZmlsbFRleHQoIidIZWxsbyAnIiwgMjEwLCA5MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2FiYjJiZic7IGN0eC5maWxsVGV4dCgiKyBuYW1lKSIsIDMwMCwgOTApOwoKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjNjFhZmVmJzsgY3R4LmZpbGxUZXh0KCJncmVldCIsIDEwMCwgMTIwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjYWJiMmJmJzsgY3R4LmZpbGxUZXh0KCIoJ0FsZXgnKSIsIDE2MCwgMTIwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnNvbGUvRXJyb3IgT3V0cHV0CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzFlMjkzYic7IGN0eC5maWxsUmVjdCg1MCwgMjMwLCA1MDAsIDEwMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gJzE0cHggbW9ub3NwYWNlJzsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2ltLnN0YXRlLmZpeGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcnJvciBNZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlMDZjNzUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJTeW50YXhFcnJvcjogZXhwZWN0ZWQgJzonIiwgNjAsIDI2MCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIiAgTGluZSAxOiBkZWYgZ3JlZXQobmFtZSkiLCA2MCwgMjgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjZTA2Yzc1JzsgY3R4LmxpbmVXaWR0aCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygyNzAsIDY1KTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTwxMDsgaSsrKSBjdHgubGluZVRvKDI3MCtpKjIsIDY1ICsgKGklMj09MD8yOi0yKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBCdWcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5idWcudCArPSAwLjE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBieCA9IDI4MCArIE1hdGguc2luKHNpbS5zdGF0ZS5idWcudCkqMTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBieSA9IDU1ICsgTWF0aC5jb3Moc2ltLnN0YXRlLmJ1Zy50KjAuNykqMTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUuYnVnLnggPSBieDsgc2ltLnN0YXRlLmJ1Zy55ID0gYnk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZTc0YzNjJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhieCwgYnksIDgsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMwMDAnOyBjdHgubGluZVdpZHRoID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDM7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhieC01LCBieS01K2kqNSk7IGN0eC5saW5lVG8oYngtMTIsIGJ5LTgraSo1ICsgTWF0aC5zaW4oc2ltLnN0YXRlLmJ1Zy50KjIpKjIpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKGJ4KzUsIGJ5LTUraSo1KTsgY3R4LmxpbmVUbyhieCsxMiwgYnktOCtpKjUgKyBNYXRoLmNvcyhzaW0uc3RhdGUuYnVnLnQqMikqMik7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZvbnQgPSAnMTJweCBzYW5zLXNlcmlmJzsgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJDbGljayB0aGUgYnVnISIsIGJ4LCBieSAtIDE1KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN1Y2Nlc3MgT3V0cHV0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM5OGMzNzknOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCI+IEhlbGxvIEFsZXgiLCA2MCwgMjYwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIlByb2dyYW0gZXhpdGVkIHdpdGggY29kZSAwIiwgNjAsIDI4MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDI0LiBEUkFHICYgRFJPUCBDT0RFCiAgICAgICAgICAgIGRyYWdfZHJvcF9jb2RlOiB7CiAgICAgICAgICAgICAgICBibG9ja3M6IFtdLAogICAgICAgICAgICAgICAgZHJhZ2dpbmc6IG51bGwsCiAgICAgICAgICAgICAgICBvZmZzZXQ6IHt4OjAsIHk6MH0sCiAgICAgICAgICAgICAgICBpc0NvcnJlY3Q6IGZhbHNlLAogICAgICAgICAgICAgICAgY3VycmVudENoYWxsZW5nZTogMCwKICAgICAgICAgICAgICAgIGNoYWxsZW5nZXM6IFsKICAgICAgICAgICAgICAgICAgICB7IGdvYWw6ICJwcmludCgnUHl0aG9uJykiLCBibG9ja3M6IFsicHJpbnQiLCAiKCIsICInUHl0aG9uJyIsICIpIl0gfSwKICAgICAgICAgICAgICAgICAgICB7IGdvYWw6ICJ4ID0gMTAiLCBibG9ja3M6IFsieCIsICI9IiwgIjEwIl0gfSwKICAgICAgICAgICAgICAgICAgICB7IGdvYWw6ICJ5ID0geCArIDUiLCBibG9ja3M6IFsieSIsICI9IiwgIngiLCAiKyIsICI1Il0gfSwKICAgICAgICAgICAgICAgICAgICB7IGdvYWw6ICJpZiBUcnVlOiIsIGJsb2NrczogWyJpZiIsICJUcnVlIiwgIjoiXSB9LAogICAgICAgICAgICAgICAgICAgIHsgZ29hbDogIndoaWxlIHggPiAwOiIsIGJsb2NrczogWyJ3aGlsZSIsICJ4IiwgIj4iLCAiMCIsICI6Il0gfSwKICAgICAgICAgICAgICAgICAgICB7IGdvYWw6ICJmb3IgaSBpbiByYW5nZSg1KToiLCBibG9ja3M6IFsiZm9yIiwgImkiLCAiaW4iLCAicmFuZ2UiLCAiKCIsICI1IiwgIikiLCAiOiJdIH0sCiAgICAgICAgICAgICAgICAgICAgeyBnb2FsOiAiTCA9IFsxLCAyLCAzXSIsIGJsb2NrczogWyJMIiwgIj0iLCAiWyIsICIxIiwgIiwiLCAiMiIsICIsIiwgIjMiLCAiXSJdIH0sCiAgICAgICAgICAgICAgICAgICAgeyBnb2FsOiAiZGVmIGZ1bmMoKToiLCBibG9ja3M6IFsiZGVmIiwgImZ1bmMiLCAiKCIsICIpIiwgIjoiXSB9LAogICAgICAgICAgICAgICAgICAgIHsgZ29hbDogInJldHVybiB4ICogMiIsIGJsb2NrczogWyJyZXR1cm4iLCAieCIsICIqIiwgIjIiXSB9LAogICAgICAgICAgICAgICAgICAgIHsgZ29hbDogImltcG9ydCBtYXRoIiwgYmxvY2tzOiBbImltcG9ydCIsICJtYXRoIl0gfQogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NvcnJlY3QgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNvbHZlZENoYWxsZW5nZXMgPSBuZXcgU2V0KCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dHMgPSBbInByaW50IiwgIigiLCAiJ1B5dGhvbiciLCAiKSJdOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tzID0gdGV4dHMubWFwKCh0LCBpKSA9PiAoewogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0LAogICAgICAgICAgICAgICAgICAgICAgICB4OiA1MCArIGkgKiAxMjAsCiAgICAgICAgICAgICAgICAgICAgICAgIHk6IDI1MCwKICAgICAgICAgICAgICAgICAgICAgICAgdzogdC5sZW5ndGggKiAxNCArIDIwLAogICAgICAgICAgICAgICAgICAgICAgICBoOiA0MCwKICAgICAgICAgICAgICAgICAgICAgICAgaW5Db2RlQXJlYTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3Q6IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgIC8vIFNodWZmbGUgcG9zaXRpb25zCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ibG9ja3Muc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKChiLCBpKSA9PiB7IGIueCA9IDUwICsgaSAqIDEzMDsgYi55ID0gMjUwOyB9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDaGFsbGVuZ2UgPSAwOwoKICAgICAgICAgICAgICAgICAgICAvLyBBZGQgUnVuIGJ1dHRvbgogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0blJ1biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOwogICAgICAgICAgICAgICAgICAgIGJ0blJ1bi5jbGFzc05hbWUgPSAidy1mdWxsIHB4LTQgcHktMiBiZy1ncmVlbi02MDAgdGV4dC13aGl0ZSByb3VuZGVkIGZvbnQtYm9sZCBob3ZlcjpiZy1ncmVlbi03MDAgdHJhbnNpdGlvbiBtYi0yIjsKICAgICAgICAgICAgICAgICAgICBidG5SdW4udGV4dENvbnRlbnQgPSAiUnVuIENvZGUiOwogICAgICAgICAgICAgICAgICAgIGJ0blJ1bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5jaGVjayhzaW0pOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tY29udHJvbHMnKS5hcHBlbmRDaGlsZChidG5SdW4pOwoKICAgICAgICAgICAgICAgICAgICAvLyBBZGQgU29sdmUgYnV0dG9uCiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuU29sdmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgICAgICAgICBidG5Tb2x2ZS5jbGFzc05hbWUgPSAidy1mdWxsIHB4LTQgcHktMiBiZy15ZWxsb3ctNTAwIHRleHQtd2hpdGUgcm91bmRlZCBmb250LWJvbGQgaG92ZXI6YmcteWVsbG93LTYwMCB0cmFuc2l0aW9uIG1iLTIiOwogICAgICAgICAgICAgICAgICAgIGJ0blNvbHZlLnRleHRDb250ZW50ID0gIlNvbHZlIENoYWxsZW5nZSI7CiAgICAgICAgICAgICAgICAgICAgYnRuU29sdmUub25jbGljayA9ICgpID0+IHRoaXMuc29sdmUoc2ltKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWNvbnRyb2xzJykuYXBwZW5kQ2hpbGQoYnRuU29sdmUpOwoKICAgICAgICAgICAgICAgICAgICAvLyBBZGQgTW9yZSBPcHRpb25zIGJ1dHRvbgogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0bk1vcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICAgICAgICAgICAgICBidG5Nb3JlLmNsYXNzTmFtZSA9ICJ3LWZ1bGwgcHgtNCBweS0yIGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcm91bmRlZCBmb250LWJvbGQgaG92ZXI6YmctYmx1ZS03MDAgdHJhbnNpdGlvbiI7CiAgICAgICAgICAgICAgICAgICAgYnRuTW9yZS50ZXh0Q29udGVudCA9ICJUcnkgTW9yZSBDb2RpbmcgT3B0aW9ucyI7CiAgICAgICAgICAgICAgICAgICAgYnRuTW9yZS5vbmNsaWNrID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDaGFsbGVuZ2UgPSAodGhpcy5jdXJyZW50Q2hhbGxlbmdlICsgMSkgJSB0aGlzLmNoYWxsZW5nZXMubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRDaGFsbGVuZ2Uoc2ltKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tY29udHJvbHMnKS5hcHBlbmRDaGlsZChidG5Nb3JlKTsKCiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkQ2hhbGxlbmdlKHNpbSk7CgogICAgICAgICAgICAgICAgICAgIC8vIENhbnZhcyBldmVudHMKICAgICAgICAgICAgICAgICAgICBzaW0uY2FudmFzLm9ubW91c2Vkb3duID0gKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHNpbS5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHggPSBlLmNsaWVudFggLSByZWN0LmxlZnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSBlLmNsaWVudFkgLSByZWN0LnRvcDsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuYmxvY2tzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiID0gdGhpcy5ibG9ja3NbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeCA+PSBiLnggJiYgeCA8PSBiLnggKyBiLncgJiYgeSA+PSBiLnkgJiYgeSA8PSBiLnkgKyBiLmgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdnaW5nID0gYjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9mZnNldCA9IHt4OiB4IC0gYi54LCB5OiB5IC0gYi55fTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlIHRvIHRvcCBvZiBzdGFjawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tzLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2Nrcy5wdXNoKGIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuaW5Db2RlQXJlYSA9IGZhbHNlOyAvLyBUZW1wb3JhcmlseSByZW1vdmUgZnJvbSBjb2RlIGFyZWEgbG9naWMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ29ycmVjdCA9IGZhbHNlOyAvLyBSZXNldCBjb3JyZWN0bmVzcyBvbiBkcmFnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ibG9ja3MuZm9yRWFjaChibCA9PiBibC5jb3JyZWN0ID0gZmFsc2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJEcmFnIGJsb2NrcyBpbnRvIHRoZSBDb2RlIEFyZWEgYW5kIGNsaWNrICdSdW4gQ29kZScuIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykuaW5uZXJIVE1MID0gYEdvYWw6IDxjb2RlPiR7dGhpcy5jaGFsbGVuZ2VzW3RoaXMuY3VycmVudENoYWxsZW5nZV0uZ29hbH08L2NvZGU+YDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykuY2xhc3NOYW1lID0gIm10LTMgdGV4dC1jZW50ZXIgZm9udC1ib2xkIHRleHQtYnJhbmQtZGFyayBtaW4taC1bMS41cmVtXSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBzaW0uY2FudmFzLm9ubW91c2Vtb3ZlID0gKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZHJhZ2dpbmcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBzaW0uY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnZ2luZy54ID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0IC0gdGhpcy5vZmZzZXQueDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmcueSA9IGUuY2xpZW50WSAtIHJlY3QudG9wIC0gdGhpcy5vZmZzZXQueTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHNpbS5jYW52YXMub25tb3VzZXVwID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZHJhZ2dpbmcpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRyYWdnaW5nLnkgPCAxNTApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmcuaW5Db2RlQXJlYSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdnaW5nLmluQ29kZUFyZWEgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdnaW5nID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbmFwQW5kT3JkZXIoKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCA2MDAsIDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBab25lcwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlMmU4ZjAnOyBjdHguZmlsbFJlY3QoMjAsIDIwLCA1NjAsIDEyMCk7IC8vIENvZGUgQXJlYQogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzk0YTNiOCc7IGN0eC5saW5lV2lkdGggPSAyOyBjdHguc3Ryb2tlUmVjdCgyMCwgMjAsIDU2MCwgMTIwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjOTRhM2I4JzsgY3R4LmZvbnQgPSAnMTZweCBzYW5zLXNlcmlmJzsgY3R4LnRleHRBbGlnbiA9ICdsZWZ0JzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYmxvY2tzLmZpbHRlcihiID0+IGIuaW5Db2RlQXJlYSkubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIi8vIERyYWcgYmxvY2tzIGhlcmUgdG8gYnVpbGQgeW91ciBjb2RlIiwgMzAsIDQ1KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZjhmYWZjJzsgY3R4LmZpbGxSZWN0KDIwLCAyMDAsIDU2MCwgMTMwKTsgLy8gVG9vbGJveAogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlUmVjdCgyMCwgMjAwLCA1NjAsIDEzMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzY0NzQ4Yic7IGN0eC5maWxsVGV4dCgiVG9vbGJveCIsIDMwLCAyMjUpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmxvY2tzCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tzLmZvckVhY2goYiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYi5jb3JyZWN0ID8gJyMyN2FlNjAnIDogJyMzMDY5OTgnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KGIueCwgYi55LCBiLncsIGIuaCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBiLmNvcnJlY3QgPyAnI0ZGRDQzQicgOiAnIzFlMjkzYic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gYi5jb3JyZWN0ID8gNCA6IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlUmVjdChiLngsIGIueSwgYi53LCBiLmgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZvbnQgPSAnYm9sZCAyMHB4IG1vbm9zcGFjZSc7IGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsgY3R4LnRleHRCYXNlbGluZSA9ICdtaWRkbGUnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGIudGV4dCwgYi54ICsgYi53LzIsIGIueSArIGIuaC8yKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBDb25zb2xlIG91dHB1dCBvbiBzdWNjZXNzCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQ29ycmVjdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMWUyOTNiJzsgY3R4LmZpbGxSZWN0KDIwLCAxNTAsIDU2MCwgNDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMGYwJzsgY3R4LmZvbnQgPSAnMTZweCBtb25vc3BhY2UnOyBjdHgudGV4dEFsaWduID0gJ2xlZnQnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCI+ICIgKyB0aGlzLmNoYWxsZW5nZXNbdGhpcy5jdXJyZW50Q2hhbGxlbmdlXS5nb2FsLCAzMCwgMTc1KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzaW0ubG9vcCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCgpOwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBsb2FkQ2hhbGxlbmdlOiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ29ycmVjdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYWxsZW5nZSA9IHRoaXMuY2hhbGxlbmdlc1t0aGlzLmN1cnJlbnRDaGFsbGVuZ2VdOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRzID0gY2hhbGxlbmdlLmJsb2NrczsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykuaW5uZXJIVE1MID0gYEdvYWw6IDxjb2RlPiR7Y2hhbGxlbmdlLmdvYWx9PC9jb2RlPmA7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLmNsYXNzTmFtZSA9ICJtdC0zIHRleHQtY2VudGVyIGZvbnQtYm9sZCB0ZXh0LWJyYW5kLWRhcmsgbWluLWgtWzEuNXJlbV0iOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2NrcyA9IHRleHRzLm1hcCgodCwgaSkgPT4gKHsKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdCwKICAgICAgICAgICAgICAgICAgICAgICAgeDogMCwKICAgICAgICAgICAgICAgICAgICAgICAgeTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgdzogdC5sZW5ndGggKiAxMiArIDIwLAogICAgICAgICAgICAgICAgICAgICAgICBoOiA0MCwKICAgICAgICAgICAgICAgICAgICAgICAgaW5Db2RlQXJlYTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3Q6IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAvLyBTaHVmZmxlIGFuZCBwb3NpdGlvbgogICAgICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tzLnNvcnQoKCkgPT4gTWF0aC5yYW5kb20oKSAtIDAuNSk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRYID0gNDA7CiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRZID0gMjQwOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhc1dpZHRoID0gNTgwOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKGIgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFggKyBiLncgPiBjYW52YXNXaWR0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFggPSA0MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRZICs9IDUwOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGIueCA9IGN1cnJlbnRYOwogICAgICAgICAgICAgICAgICAgICAgICBiLnkgPSBjdXJyZW50WTsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFggKz0gYi53ICsgMTA7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIHNvbHZlOiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFsbGVuZ2UgPSB0aGlzLmNoYWxsZW5nZXNbdGhpcy5jdXJyZW50Q2hhbGxlbmdlXTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3JyZWN0T3JkZXIgPSBjaGFsbGVuZ2UuYmxvY2tzOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGxldCBuZXdCbG9ja3MgPSBbXTsKICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcEJsb2NrcyA9IFsuLi50aGlzLmJsb2Nrc107CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgY29ycmVjdE9yZGVyLmZvckVhY2godGV4dCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IHRlbXBCbG9ja3MuZmluZEluZGV4KGIgPT4gYi50ZXh0ID09PSB0ZXh0KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld0Jsb2Nrcy5wdXNoKHRlbXBCbG9ja3NbaWR4XSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wQmxvY2tzLnNwbGljZShpZHgsIDEpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ibG9ja3MgPSBuZXdCbG9ja3M7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRYID0gNDA7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc25hcFkgPSA2NTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmJsb2Nrcy5mb3JFYWNoKGIgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBiLmluQ29kZUFyZWEgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBiLnggPSBjdXJyZW50WDsKICAgICAgICAgICAgICAgICAgICAgICAgYi55ID0gc25hcFk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRYICs9IGIudyArIDEwOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2soc2ltKTsKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgc25hcEFuZE9yZGVyOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2RlQXJlYUJsb2NrcyA9IHRoaXMuYmxvY2tzLmZpbHRlcihiID0+IGIuaW5Db2RlQXJlYSk7CiAgICAgICAgICAgICAgICAgICAgY29kZUFyZWFCbG9ja3Muc29ydCgoYSwgYikgPT4gYS54IC0gYi54KTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudFggPSA0MDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzbmFwWSA9IDY1OwogICAgICAgICAgICAgICAgICAgIGNvZGVBcmVhQmxvY2tzLmZvckVhY2goYiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGIueCA9IGN1cnJlbnRYOwogICAgICAgICAgICAgICAgICAgICAgICBiLnkgPSBzbmFwWTsKICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFggKz0gYi53ICsgMTA7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpbkFyZWEgPSB0aGlzLmJsb2Nrcy5maWx0ZXIoYiA9PiBiLmluQ29kZUFyZWEpOwogICAgICAgICAgICAgICAgICAgIGluQXJlYS5zb3J0KChhLCBiKSA9PiBhLnggLSBiLngpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBpbkFyZWEubWFwKGIgPT4gYi50ZXh0KS5qb2luKCIiKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjbGVhbkNvZGUgPSBjb2RlLnJlcGxhY2UoL1xzKy9nLCAnJyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2xlYW5Hb2FsID0gdGhpcy5jaGFsbGVuZ2VzW3RoaXMuY3VycmVudENoYWxsZW5nZV0uZ29hbC5yZXBsYWNlKC9ccysvZywgJycpOwoKICAgICAgICAgICAgICAgICAgICBjb25zdCBmYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ29ycmVjdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYmxvY2tzLmZvckVhY2goYiA9PiBiLmNvcnJlY3QgPSBmYWxzZSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChjbGVhbkNvZGUgPT09IGNsZWFuR29hbCkgewogICAgICAgICAgICAgICAgICAgICAgICBmYi50ZXh0Q29udGVudCA9ICJTdWNjZXNzISBDb2RlIGV4ZWN1dGVkIGNvcnJlY3RseS4iOwogICAgICAgICAgICAgICAgICAgICAgICBmYi5jbGFzc05hbWUgPSAibXQtMyB0ZXh0LWNlbnRlciBmb250LWJvbGQgdGV4dC1ncmVlbi02MDAgbWluLWgtWzEuNXJlbV0iOwogICAgICAgICAgICAgICAgICAgICAgICBpbkFyZWEuZm9yRWFjaChiID0+IGIuY29ycmVjdCA9IHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ29ycmVjdCA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvbHZlZENoYWxsZW5nZXMuYWRkKHRoaXMuY3VycmVudENoYWxsZW5nZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNvbHZlZENoYWxsZW5nZXMuc2l6ZSA9PT0gdGhpcy5jaGFsbGVuZ2VzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmIudGV4dENvbnRlbnQgPSAiQ29uZ3JhdHVsYXRpb25zISBZb3UgYXJlIGEgUHl0aG9uIFdpeiEiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmIuY2xhc3NOYW1lID0gIm10LTMgdGV4dC1jZW50ZXIgZm9udC1ib2xkIHRleHQtcHVycGxlLTYwMCB0ZXh0LXhsIGFuaW1hdGUtYm91bmNlIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5BcmVhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgZmIudGV4dENvbnRlbnQgPSAiVGhhdCdzIG5vdCBxdWl0ZSByaWdodC4gVHJ5IGFnYWluISI7CiAgICAgICAgICAgICAgICAgICAgICAgIGZiLmNsYXNzTmFtZSA9ICJtdC0zIHRleHQtY2VudGVyIGZvbnQtYm9sZCB0ZXh0LXJlZC01MDAgbWluLWgtWzEuNXJlbV0iOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZiLnRleHRDb250ZW50ID0gIkRyYWcgYmxvY2tzIGludG8gdGhlIENvZGUgQXJlYSBhbmQgY2xpY2sgJ1J1biBDb2RlJy4iOwogICAgICAgICAgICAgICAgICAgICAgICBmYi5pbm5lckhUTUwgPSBgR29hbDogPGNvZGU+JHt0aGlzLmNoYWxsZW5nZXNbdGhpcy5jdXJyZW50Q2hhbGxlbmdlXS5nb2FsfTwvY29kZT5gOwogICAgICAgICAgICAgICAgICAgICAgICBmYi5jbGFzc05hbWUgPSAibXQtMyB0ZXh0LWNlbnRlciBmb250LWJvbGQgdGV4dC1icmFuZC1kYXJrIG1pbi1oLVsxLjVyZW1dIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIC8vIEluaXRpYWxpemUKICAgICAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIEJvb2suaW5pdCgpOwogICAgICAgIH07CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+"))));</script>