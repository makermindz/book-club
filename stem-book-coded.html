<script>document.write(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+VGhlIFF1ZXN0IGZvciB0aGUgTG9zdCBTcGFyayAtIEEgU1RFTSBBZHZlbnR1cmU8L3RpdGxlPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLnRhaWx3aW5kY3NzLmNvbSI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0PgogICAgICAgIHRhaWx3aW5kLmNvbmZpZyA9IHsKICAgICAgICAgICAgdGhlbWU6IHsKICAgICAgICAgICAgICAgIGV4dGVuZDogewogICAgICAgICAgICAgICAgICAgIGNvbG9yczogewogICAgICAgICAgICAgICAgICAgICAgICAnZ3JlZW4tcHJpbWFyeSc6ICcjMjdhZTYwJywKICAgICAgICAgICAgICAgICAgICAgICAgJ2dyZWVuLXNlY29uZGFyeSc6ICcjMmVjYzcxJywKICAgICAgICAgICAgICAgICAgICAgICAgJ2dyZWVuLWxpZ2h0JzogJyNmNGZmZjQnLAogICAgICAgICAgICAgICAgICAgICAgICAnYnJhbmQtZGFyayc6ICcjMmMzZTUwJywKICAgICAgICAgICAgICAgICAgICAgICAgJ3BhcGVyJzogJyNmZGZiZjcnLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseTogewogICAgICAgICAgICAgICAgICAgICAgICBzYW5zOiBbJ1NlZ29lIFVJJywgJ1RhaG9tYScsICdHZW5ldmEnLCAnVmVyZGFuYScsICdzYW5zLXNlcmlmJ10sCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmlmOiBbJ0dlb3JnaWEnLCAnQ2FtYnJpYScsICdUaW1lcyBOZXcgUm9tYW4nLCAnVGltZXMnLCAnc2VyaWYnXSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGJveFNoYWRvdzogewogICAgICAgICAgICAgICAgICAgICAgICAnYm9vayc6ICcwIDIwcHggMzBweCAtMTBweCByZ2JhKDAsIDAsIDAsIDAuMyksIDAgMCAxMHB4IHJnYmEoMCwwLDAsMC4xKScsCiAgICAgICAgICAgICAgICAgICAgICAgICdwYWdlJzogJ2luc2V0IDAgMCAzMHB4IHJnYmEoMCwwLDAsMC4wNSknLAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgIC8vIERpc2FibGUgcmlnaHQtY2xpY2sKICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGV2ZW50ID0+IGV2ZW50LnByZXZlbnREZWZhdWx0KCkpOwoKICAvLyBEaXNhYmxlIEYxMiwgQ3RybCtTaGlmdCtJLCBDdHJsK1UKICBkb2N1bWVudC5vbmtleWRvd24gPSBmdW5jdGlvbihlKSB7CiAgICBpZihldmVudC5rZXlDb2RlID09IDEyMykgcmV0dXJuIGZhbHNlOwogICAgaWYoZS5jdHJsS2V5ICYmIGUuc2hpZnRLZXkgJiYgZS5rZXlDb2RlID09ICdJJy5jaGFyQ29kZUF0KDApKSByZXR1cm4gZmFsc2U7CiAgICBpZihlLmN0cmxLZXkgJiYgZS5rZXlDb2RlID09ICdVJy5jaGFyQ29kZUF0KDApKSByZXR1cm4gZmFsc2U7CiAgfTsKICAKICAgIDwvc2NyaXB0PgogICAgPHN0eWxlPgogICAgICAgIGJvZHkgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOwogICAgICAgICAgICAvKiBiYWNrZ3JvdW5kLWltYWdlOiByYWRpYWwtZ3JhZGllbnQoIzM0NDk1ZSAxcHgsIHRyYW5zcGFyZW50IDFweCk7CiAgICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogMjBweCAyMHB4OyAqLwogICAgICAgIH0KICAgICAgICAKICAgICAgICAuYm9vay1jb250YWluZXIgewogICAgICAgICAgICBwZXJzcGVjdGl2ZTogMTUwMHB4OwogICAgICAgIH0KCiAgICAgICAgLmJvb2stcGFnZSB7CiAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjhzIGN1YmljLWJlemllcigwLjY0NSwgMC4wNDUsIDAuMzU1LCAxKTsKICAgICAgICAgICAgdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDsKICAgICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogbGVmdCBjZW50ZXI7CiAgICAgICAgfQoKICAgICAgICAucGFnZS1jb250ZW50IHsKICAgICAgICAgICAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuOwogICAgICAgIH0KCiAgICAgICAgLyogU2ltdWxhdGlvbiBDYW52YXMgU3R5bGVzICovCiAgICAgICAgY2FudmFzIHsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC41cmVtOwogICAgICAgICAgICBib3gtc2hhZG93OiBpbnNldCAwIDJweCA0cHggcmdiYSgwLDAsMCwwLjEpOwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgfQoKICAgICAgICAuc2ltLWNvbnRyb2wtcGFuZWwgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjRmZmY0OwogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMmVjYzcxOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjVyZW07CiAgICAgICAgICAgIHBhZGRpbmc6IDFyZW07CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDFyZW07CiAgICAgICAgfQoKICAgICAgICAvKiBDdXN0b20gUmFuZ2UgU2xpZGVyICovCiAgICAgICAgaW5wdXRbdHlwZT1yYW5nZV0gewogICAgICAgICAgICBoZWlnaHQ6IDZweDsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2UyZThmMDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OwogICAgICAgICAgICBvdXRsaW5lOiBub25lOwogICAgICAgIH0KICAgICAgICBpbnB1dFt0eXBlPXJhbmdlXTo6LXdlYmtpdC1zbGlkZXItdGh1bWIgewogICAgICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7CiAgICAgICAgICAgIGFwcGVhcmFuY2U6IG5vbmU7CiAgICAgICAgICAgIHdpZHRoOiAxOHB4OwogICAgICAgICAgICBoZWlnaHQ6IDE4cHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzI3YWU2MDsKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOwogICAgICAgIH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHkgY2xhc3M9Imgtc2NyZWVuIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG92ZXJmbG93LWhpZGRlbiI+CgogICAgPGRpdiBjbGFzcz0iYm9vay1jb250YWluZXIgdy1mdWxsIG1heC13LTV4bCBoLVs5MHZoXSByZWxhdGl2ZSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciI+CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0iYWJzb2x1dGUgaW5zZXQtMCBiZy1icmFuZC1kYXJrIHJvdW5kZWQtci0yeGwgc2hhZG93LTJ4bCB0cmFuc2Zvcm0gdHJhbnNsYXRlLXgtMiB0cmFuc2xhdGUteS0yIj48L2Rpdj4KCiAgICAgICAgCiAgICAgICAgPGRpdiBpZD0iYm9vay1wYWdlIiBjbGFzcz0iYm9vay1wYWdlIHJlbGF0aXZlIHctZnVsbCBoLWZ1bGwgYmctcGFwZXIgcm91bmRlZC1yLXhsIHNoYWRvdy1ib29rIGZsZXggZmxleC1jb2wgbWQ6ZmxleC1yb3cgb3ZlcmZsb3ctaGlkZGVuIGJvcmRlci1sLTggYm9yZGVyLWdyYXktMjAwIj4KICAgICAgICAgICAgCiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LWZ1bGwgbWQ6dy0xLzMgcC04IG1kOnAtMTIgZmxleCBmbGV4LWNvbCBqdXN0aWZ5LWNlbnRlciBib3JkZXItciBib3JkZXItZ3JheS0xMDAgYmctd2hpdGUgcmVsYXRpdmUiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iYWJzb2x1dGUgdG9wLTAgbGVmdC0wIHctZnVsbCBoLTIgYmctZ3JhZGllbnQtdG8tciBmcm9tLWdyZWVuLXByaW1hcnkgdG8tZ3JlZW4tc2Vjb25kYXJ5Ij48L2Rpdj4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibWItNCB0ZXh0LWdyZWVuLXByaW1hcnkgZm9udC1ib2xkIHVwcGVyY2FzZSB0cmFja2luZy13aWRlc3QgdGV4dC14cyI+CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgUGFnZSA8c3BhbiBpZD0icGFnZS1udW0iPjE8L3NwYW4+IG9mIDxzcGFuIGlkPSJ0b3RhbC1wYWdlcyI+MTM8L3NwYW4+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPGgyIGlkPSJzdG9yeS10aXRsZSIgY2xhc3M9InRleHQtM3hsIGZvbnQtc2VyaWYgZm9udC1ib2xkIHRleHQtYnJhbmQtZGFyayBtYi02IGxlYWRpbmctdGlnaHQiPjwvaDI+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDxkaXYgaWQ9InN0b3J5LXRleHQiIGNsYXNzPSJwcm9zZSB0ZXh0LWdyYXktNjAwIGxlYWRpbmctcmVsYXhlZCBtYi04Ij4KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im10LWF1dG8gZmxleCBnYXAtNCI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJCb29rLnByZXZQYWdlKCkiIGlkPSJidG4tcHJldiIgY2xhc3M9ImZsZXgtMSBweC00IHB5LTMgcm91bmRlZC1sZyBib3JkZXItMiBib3JkZXItZ3JheS0yMDAgdGV4dC1ncmF5LTUwMCBmb250LWJvbGQgaG92ZXI6Ym9yZGVyLWJyYW5kLWRhcmsgaG92ZXI6dGV4dC1icmFuZC1kYXJrIHRyYW5zaXRpb24gZGlzYWJsZWQ6b3BhY2l0eS0zMCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWQiPgogICAgICAgICAgICAgICAgICAgICAgICDihpAgUHJldmlvdXMKICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IkJvb2submV4dFBhZ2UoKSIgaWQ9ImJ0bi1uZXh0IiBjbGFzcz0iZmxleC0xIHB4LTQgcHktMyByb3VuZGVkLWxnIGJnLWdyZWVuLXByaW1hcnkgdGV4dC13aGl0ZSBmb250LWJvbGQgaG92ZXI6YmctZ3JlZW4tc2Vjb25kYXJ5IHNoYWRvdy1sZyB0cmFuc2l0aW9uIHRyYW5zZm9ybSBob3ZlcjotdHJhbnNsYXRlLXktMSBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCI+CiAgICAgICAgICAgICAgICAgICAgICAgIE5leHQgPGJyPiDihpIKICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ3LWZ1bGwgbWQ6dy0yLzMgYmctZ3JlZW4tbGlnaHQgcmVsYXRpdmUgcC02IGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFic29sdXRlIHRvcC00IHJpZ2h0LTQgdGV4dC1ibGFjayB0ZXh0LXMgZm9udC1zYW5zIHotMjAiPgogICAgICAgICAgICAgICAgICAgICZjb3B5OyBNYWtlciBNaW5kegogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJhYnNvbHV0ZSB0b3AtNiByaWdodC02IHRleHQtYnJhbmQtZGFyayBvcGFjaXR5LTEwIHRleHQtOXhsIGZvbnQtc2VyaWYgZm9udC1ib2xkIHNlbGVjdC1ub25lIj4KICAgICAgICAgICAgICAgICAgICDimqEKICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJzaW0tY29udGFpbmVyIiBjbGFzcz0idy1mdWxsIG1heC13LTJ4bCB6LTEwIj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJiZy13aGl0ZSBwLTIgcm91bmRlZC14bCBzaGFkb3ctbGcgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxjYW52YXMgaWQ9InNpbS1jYW52YXMiIHdpZHRoPSI2MDAiIGhlaWdodD0iMzUwIiBjbGFzcz0idy1mdWxsIGgtYXV0byBiZy1ncmF5LTUwIHJvdW5kZWQtbGciPjwvY2FudmFzPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InNpbS1jb250cm9scyIgY2xhc3M9InNpbS1jb250cm9sLXBhbmVsIHNoYWRvdy1zbSI+CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9InNpbS1mZWVkYmFjayIgY2xhc3M9Im10LTMgdGV4dC1jZW50ZXIgZm9udC1ib2xkIHRleHQtYnJhbmQtZGFyayBtaW4taC1bMS41cmVtXSI+PC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPHNjcmlwdD4KICAgICAgICAvLyAtLS0gQk9PSyBDT05URU5UICYgTE9HSUMgLS0tCiAgICAgICAgCiAgICAgICAgY29uc3QgUGFnZXMgPSBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGhlIFF1ZXN0IGZvciB0aGUgTG9zdCBTcGFyayIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiV2VsY29tZSB0byBhIHdvcmxkIHBvd2VyZWQgYnkgU2NpZW5jZSwgVGVjaG5vbG9neSwgRW5naW5lZXJpbmcsIGFuZCBNYXRoLiBKb2luIEFsZXggb24gaGVyIGpvdXJuZXkgdG8gcmVzdG9yZSBlbmVyZ3kgdG8gVGVjaG5vcG9saXMuIFRoaXMgaW50ZXJhY3RpdmUgYm9vayB3aWxsIHRlc3QgeW91ciBrbm93bGVkZ2UgYW5kIHNraWxscyEiLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImNvdmVyIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiRW5qb3kgdGhlIHZpZXcgYW5kIGNsaWNrICdOZXh0JyB0byBiZWdpbi4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGhlIFF1ZXN0IEJlZ2lucyIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiQWxleCwgYSB5b3VuZyBpbnZlbnRvciBpbiBUZWNobm9wb2xpcywgZm91bmQgdGhlIGNpdHkgZGFyayBhbmQgc2lsZW50LiBUaGUgR3JlYXQgU3BhcmsgaGFkIGZhZGVkLiBJbiBoZXIgZ3JhbmRmYXRoZXIncyB3b3Jrc2hvcCwgc2hlIGRpc2NvdmVyZWQgYW4gYW5jaWVudCBob2xvZ3JhcGhpYyBtYXAuIEl0IHB1bHNlZCB3aXRoIGZhaW50IGVuZXJneSwgc2hvd2luZyB0aGUgcGF0aCB0byByZXN0b3JlIHRoZSBwb3dlci4gQnV0IHRoZSBtYXAgd2FzIGxvY2tlZC4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogIm1hcCIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkhvdmVyIG92ZXIgdGhlIG5vZGVzIHRvIHVubG9jayB0aGUgcGF0aC4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGhlIEJyaWRnZSBvZiBMb2dpYyIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiVGhlIGZpcnN0IG9ic3RhY2xlIHdhcyBhIGRyYXdicmlkZ2UgY29udHJvbGxlZCBieSBhbiBvbGQgY29tcHV0ZXIuIFRoZSBzeXN0ZW0gd2FzIG9mZmxpbmUsIGFuZCB0aGUgbG9naWMgZ2F0ZXMgd2VyZSBzY3JhbWJsZWQuIFRvIGxvd2VyIHRoZSBicmlkZ2UsIEFsZXggbmVlZGVkIHRvIHNlbmQgYSAnVFJVRScgc2lnbmFsIHRvIHRoZSBtb3Rvci4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImxvZ2ljIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiVG9nZ2xlIHRoZSBzd2l0Y2hlcyB0byBnZXQgdGhlIG91dHB1dCBsaWdodCB0byB0dXJuIEdSRUVOLiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJUaGUgUml2ZXIgb2YgQ3VycmVudHMiLAogICAgICAgICAgICAgICAgdGV4dDogIkNyb3NzaW5nIHRoZSBydXNoaW5nIHJpdmVyIHJlcXVpcmVkIGEgYm9hdCwgYnV0IHRoZSBjdXJyZW50IHdhcyB0b28gc3Ryb25nLiBBbGV4IHJlbWVtYmVyZWQgQmVybm91bGxpJ3MgcHJpbmNpcGxlOiBjaGFuZ2luZyB0aGUgY2hhbm5lbCB3aWR0aCBjaGFuZ2VzIHRoZSBmbHVpZCBzcGVlZC4gU2hlIGhhZCB0byBuYXZpZ2F0ZSB0aGUgZmxvdyBjYXJlZnVsbHkuIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJmbHVpZCIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkFkanVzdCB0aGUgcml2ZXIgd2lkdGggc2xpZGVyIHRvIGNvbnRyb2wgdGhlIHdhdGVyIHNwZWVkIGFuZCBndWlkZSB0aGUgYm9hdC4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGhlIFNsb3BlIG9mIEZyaWN0aW9uIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJUaGUgcGF0aCBsZWQgdXAgYSBzdGVlcCwgaWN5IG1vdW50YWluLiBBbGV4J3MgYm9vdHMga2VwdCBzbGlwcGluZy4gU2hlIG5lZWRlZCB0byBpbmNyZWFzZSB0aGUgZnJpY3Rpb24gdG8gY2xpbWIuIFNoZSBmb3VuZCBzb21lIGdyYXZlbCBhbmQgc2FuZCBuZWFyYnkgdG8gc3ByZWFkIG9uIHRoZSBwYXRoLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAiZnJpY3Rpb24iLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJJbmNyZWFzZSB0aGUgU3VyZmFjZSBSb3VnaG5lc3MgKMK1KSB1bnRpbCBBbGV4IGNhbiBjbGltYiB0aGUgc2xvcGUgd2l0aG91dCBzbGlkaW5nIGJhY2suIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRoZSBDYXZlIG9mIEVjaG9lcyIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiQSBtYXNzaXZlIHN0b25lIGRvb3IgYmxvY2tlZCB0aGUgY2F2ZSBlbnRyYW5jZS4gSXQgd2FzIHNvdW5kLWFjdGl2YXRlZCwgcmVzcG9uZGluZyBvbmx5IHRvIGEgc3BlY2lmaWMgcmVzb25hbnQgZnJlcXVlbmN5LiBBbGV4IHR1bmVkIGhlciBzb25pYyBlbWl0dGVyIHRvIG1hdGNoIHRoZSBkb29yJ3MgaHVtLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAic291bmQiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJBZGp1c3QgdGhlIEZyZXF1ZW5jeSBzbGlkZXIgdW50aWwgdGhlIHdhdmUgbWF0Y2hlcyB0aGUgdGFyZ2V0IHBhdHRlcm4uIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRoZSBTb2xhciBMb2NrIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJBIGhlYXZ5IGRvb3IgYmxvY2tlZCB0aGUgcGF0aCwgc2VjdXJlZCBieSBhIHNvbGFyLXRoZXJtYWwgbG9jay4gSXQgcmVxdWlyZWQgaW50ZW5zZSwgY29uY2VudHJhdGVkIGhlYXQgdG8gb3Blbi4gQWxleCBmb3VuZCBhIGxhcmdlIGNvbnZleCBsZW5zIGluIGhlciBwYWNrLiBTaGUgbmVlZGVkIHRvIGZvY3VzIHRoZSBhbWJpZW50IGxpZ2h0IG9udG8gdGhlIGxvY2sncyBzZW5zb3IuIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJvcHRpY3MiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJEcmFnIHRoZSBsZW5zIGxlZnQgb3IgcmlnaHQgdG8gZm9jdXMgdGhlIGxpZ2h0IHJheXMgb250byB0aGUgcmVkIHNlbnNvci4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGhlIEFjaWRpYyBTd2FtcCIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiVGhlIHN3YW1wIHdhdGVycyB3ZXJlIGRhbmdlcm91c2x5IGFjaWRpYywgYmxvY2tpbmcgdGhlIHdheS4gQWxleCBoYWQgYSBzdXBwbHkgb2YgbmV1dHJhbGl6aW5nIGJhc2UuIFNoZSBuZWVkZWQgdG8gYWRkIGp1c3QgZW5vdWdoIHRvIG1ha2UgdGhlIHdhdGVyIHNhZmUgKHBIIDcpIHRvIGNyb3NzLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAiY2hlbWlzdHJ5IiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiQWRkIGRyb3BzIG9mIEJhc2UgdG8gcmFpc2UgdGhlIHBIIHRvIGV4YWN0bHkgNyAoTmV1dHJhbCkuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRoZSBNYWduZXRpYyBKdW5reWFyZCIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiVGhlIHBhdGggd2FzIGJ1cmllZCB1bmRlciBoZWF2eSBzY3JhcCBtZXRhbC4gQWxleCBidWlsdCBhIHRlbXBvcmFyeSBlbGVjdHJvbWFnbmV0IHVzaW5nIGEgYmF0dGVyeSBhbmQgYSBjb2lsIG9mIHdpcmUgdG8gbGlmdCB0aGUgZGVicmlzLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAibWFnbmV0aXNtIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiSG9sZCB0aGUgJ0FjdGl2YXRlJyBidXR0b24gdG8gZW5lcmdpemUgdGhlIG1hZ25ldCBhbmQgbW92ZSB0aGUgc2NyYXAgbWV0YWwuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRoZSBDaXJjdWl0IEdhdGUiLAogICAgICAgICAgICAgICAgdGV4dDogIlRoZSBnYXRlIHRvIHRoZSBQb3dlciBDb3JlIHdhcyBsb2NrZWQuIFRoZSB3aXJpbmcgd2FzIG9sZCBhbmQgZGlzY29ubmVjdGVkLiBBbGV4IGhhZCB0byByZXBhaXIgdGhlIGNpcmN1aXQgdG8gbGV0IHRoZSBlbGVjdHJvbnMgZmxvdyBhbmQgdW5sb2NrIHRoZSBkb29yLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAiY2lyY3VpdCIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkNsaWNrIHRoZSB3aXJlIHNlZ21lbnRzIHRvIHJvdGF0ZSB0aGVtIGFuZCBjb21wbGV0ZSB0aGUgcGF0aCBmcm9tIEJhdHRlcnkgdG8gTG9jay4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiVGhlIFNsZWVwaW5nIEdlbmVyYXRvciIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiU2hlIHJlYWNoZWQgdGhlIGhlYXJ0IG9mIFRlY2hub3BvbGlzLiBUaGUgbWFzc2l2ZSBnZW5lcmF0b3Igc3Rvb2Qgc3RpbGwuIEl0IG5lZWRlZCBhIGp1bXBzdGFydC4gVXNpbmcgRmFyYWRheSdzIExhdywgQWxleCBzcHVuIHRoZSBzdGFydGVyIGNvaWwgdG8gaW5kdWNlIHRoZSBmaXJzdCBzcGFyay4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImdlbmVyYXRvciIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIlNwaW4gdGhlIHdoZWVsIHF1aWNrbHkgd2l0aCB5b3VyIG1vdXNlL2ZpbmdlciB0byBnZW5lcmF0ZSB2b2x0YWdlISIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJUaGUgR3JpZCBBd2FrZW5zIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJUaGUgZ2VuZXJhdG9yIHJvYXJlZCB0byBsaWZlISBOb3csIHRoZSBlbmVyZ3kgaGFkIHRvIGJlIGRpc3RyaWJ1dGVkLiBBbGV4IG1hbmFnZWQgdGhlIGdyaWQsIGNvbm5lY3RpbmcgcG93ZXIgbGluZXMgdG8gdGhlIGNpdHkgZGlzdHJpY3RzIHdpdGhvdXQgb3ZlcmxvYWRpbmcgdGhlIHN5c3RlbS4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImdyaWQiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJDbGljayBub2RlcyB0byBjb25uZWN0IHRoZSBwb3dlciBwbGFudCAoR3JlZW4pIHRvIHRoZSBob3VzZXMgKFJlZCkuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlRlY2hub3BvbGlzIFJlc3RvcmVkIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJMaWdodHMgZmxpY2tlcmVkIG9uIGFjcm9zcyB0aGUgY2l0eS4gVGhlIGh1bSBvZiBtYWNoaW5lcnkgcmV0dXJuZWQuIEFsZXggaGFkIGRvbmUgaXQhIFRocm91Z2ggbG9naWMsIHBoeXNpY3MsIGFuZCBjaGVtaXN0cnksIHNoZSBoYWQgcmVzdG9yZWQgdGhlIHNwYXJrIHRvIFRlY2hub3BvbGlzLiIsCiAgICAgICAgICAgICAgICBzaW1UeXBlOiAiZmlyZXdvcmtzIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiQ2xpY2sgdGhlIHNreSB0byBjZWxlYnJhdGUhIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlN1bW1hcnk6IExvZ2ljIEdhdGVzIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJMb2dpYyBnYXRlcyBhcmUgdGhlIGJ1aWxkaW5nIGJsb2NrcyBvZiBkaWdpdGFsIGVsZWN0cm9uaWNzLiBBbiBBTkQgZ2F0ZSwgbGlrZSB0aGUgb25lIHVzZWQgaW4gdGhlIGJyaWRnZSwgcmVxdWlyZXMgYWxsIGlucHV0cyB0byBiZSB0cnVlIChPTikgZm9yIHRoZSBvdXRwdXQgdG8gYmUgdHJ1ZS4gVGhpcyBpcyBmdW5kYW1lbnRhbCB0byBob3cgY29tcHV0ZXJzIHByb2Nlc3MgaW5mb3JtYXRpb24uIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJsb2dpYyIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkV4cGVyaW1lbnQgd2l0aCB0aGUgc3dpdGNoZXMgdG8gc2VlIHRoZSB0cnV0aCB0YWJsZSBpbiBhY3Rpb24uIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlN1bW1hcnk6IEZsdWlkIER5bmFtaWNzIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJCZXJub3VsbGkncyBwcmluY2lwbGUgc3RhdGVzIHRoYXQgZm9yIGEgZmx1aWQsIGFuIGluY3JlYXNlIGluIHNwZWVkIG9jY3VycyBzaW11bHRhbmVvdXNseSB3aXRoIGEgZGVjcmVhc2UgaW4gcHJlc3N1cmUuIEluIHRoZSByaXZlciwgbmFycm93aW5nIHRoZSBjaGFubmVsIGZvcmNlZCB0aGUgd2F0ZXIgdG8gc3BlZWQgdXAgdG8gbWFpbnRhaW4gdGhlIGZsb3cgcmF0ZSAoQ29udGludWl0eSBFcXVhdGlvbikuIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJmbHVpZCIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIk9ic2VydmUgaG93IHRoZSB3YXRlciBzcGVlZCBjaGFuZ2VzIGFzIHlvdSBhZGp1c3QgdGhlIHJpdmVyIHdpZHRoLiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJTdW1tYXJ5OiBGcmljdGlvbiIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiRnJpY3Rpb24gaXMgYSBmb3JjZSB0aGF0IG9wcG9zZXMgbW90aW9uIGJldHdlZW4gdHdvIHN1cmZhY2VzIGluIGNvbnRhY3QuIEl0IGRlcGVuZHMgb24gdGhlIHRleHR1cmUgb2YgdGhlIHN1cmZhY2VzIChjb2VmZmljaWVudCBvZiBmcmljdGlvbiwgwrUpIGFuZCB0aGUgZm9yY2UgcHJlc3NpbmcgdGhlbSB0b2dldGhlci4gSGlnaGVyIMK1IG1lYW5zIG1vcmUgZ3JpcCEiLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImZyaWN0aW9uIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiVGVzdCBkaWZmZXJlbnQgcm91Z2huZXNzIGxldmVscyB0byBzZWUgaG93IHRoZXkgYWZmZWN0IG1vdmVtZW50LiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJTdW1tYXJ5OiBTb3VuZCAmIFJlc29uYW5jZSIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiU291bmQgdHJhdmVscyBhcyBhIHdhdmUuIEV2ZXJ5IG9iamVjdCBoYXMgYSBuYXR1cmFsIGZyZXF1ZW5jeSBhdCB3aGljaCBpdCB2aWJyYXRlcy4gUmVzb25hbmNlIG9jY3VycyB3aGVuIGEgc291bmQgd2F2ZSBtYXRjaGVzIHRoaXMgbmF0dXJhbCBmcmVxdWVuY3ksIGNhdXNpbmcgdGhlIG9iamVjdCB0byB2aWJyYXRlIHdpdGggZ3JlYXRlciBhbXBsaXR1ZGUuIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJzb3VuZCIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkZpbmQgdGhlIHJlc29uYW50IGZyZXF1ZW5jeSBhZ2Fpbi4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiU3VtbWFyeTogT3B0aWNzICYgUmVmcmFjdGlvbiIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiV2hlbiBsaWdodCBwYXNzZXMgdGhyb3VnaCBhIGxlbnMsIGl0IGJlbmRzIChyZWZyYWN0cykuIEEgY29udmV4IGxlbnMgY29udmVyZ2VzIHBhcmFsbGVsIGxpZ2h0IHJheXMgdG8gYSBzaW5nbGUgZm9jYWwgcG9pbnQuIFRoaXMgcHJpbmNpcGxlIGlzIHVzZWQgaW4gZXllcywgY2FtZXJhcywgYW5kIG1hZ25pZnlpbmcgZ2xhc3Nlcy4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogIm9wdGljcyIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkZvY3VzIHRoZSBsaWdodCBhZ2Fpbi4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiU3VtbWFyeTogQWNpZHMgJiBCYXNlcyIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiVGhlIHBIIHNjYWxlIG1lYXN1cmVzIGhvdyBhY2lkaWMgb3IgYmFzaWMgYSBzdWJzdGFuY2UgaXMuIEFjaWRzIGhhdmUgYSBwSCBsZXNzIHRoYW4gNywgd2hpbGUgYmFzZXMgaGF2ZSBhIHBIIGdyZWF0ZXIgdGhhbiA3LiBNaXhpbmcgdGhlbSBjYW4gbmV1dHJhbGl6ZSB0aGUgc29sdXRpb24sIGJyaW5naW5nIHRoZSBwSCBjbG9zZXIgdG8gNyAobGlrZSB3YXRlcikuIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJjaGVtaXN0cnkiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJOZXV0cmFsaXplIHRoZSBzb2x1dGlvbiBhZ2Fpbi4iCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAiU3VtbWFyeTogRWxlY3Ryb21hZ25ldGlzbSIsCiAgICAgICAgICAgICAgICB0ZXh0OiAiQW4gZWxlY3RyaWMgY3VycmVudCBmbG93aW5nIHRocm91Z2ggYSB3aXJlIGNyZWF0ZXMgYSBtYWduZXRpYyBmaWVsZC4gQnkgY29pbGluZyB0aGUgd2lyZSwgd2UgY2FuIGNvbmNlbnRyYXRlIHRoaXMgZmllbGQgdG8gY3JlYXRlIGEgc3Ryb25nIG1hZ25ldCB0aGF0IGNhbiBiZSB0dXJuZWQgb24gYW5kIG9mZi4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogIm1hZ25ldGlzbSIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIkFjdGl2YXRlIHRoZSBlbGVjdHJvbWFnbmV0IHRvIHNlZSB0aGUgbWFnbmV0aWMgZmllbGQgbGluZXMuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlN1bW1hcnk6IEVsZWN0cmljIENpcmN1aXRzIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJBbiBlbGVjdHJpYyBjaXJjdWl0IGlzIGEgY2xvc2VkIHBhdGggdGhhdCBhbGxvd3MgZWxlY3Ryb25zIHRvIGZsb3csIHBvd2VyaW5nIGRldmljZXMuIElmIHRoZSBwYXRoIGlzIGJyb2tlbiAob3BlbiBjaXJjdWl0KSwgdGhlIGN1cnJlbnQgc3RvcHMuIFN3aXRjaGVzIGFuZCB3aXJlcyBjb250cm9sIHRoaXMgZmxvdy4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImNpcmN1aXQiLAogICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb246ICJDbG9zZSB0aGUgY2lyY3VpdCB0byBsZXQgdGhlIHBvd2VyIGZsb3cuIgogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aXRsZTogIlN1bW1hcnk6IEVsZWN0cm9tYWduZXRpYyBJbmR1Y3Rpb24iLAogICAgICAgICAgICAgICAgdGV4dDogIkZhcmFkYXkncyBMYXcgb2YgSW5kdWN0aW9uIGV4cGxhaW5zIGhvdyBhIGNoYW5naW5nIG1hZ25ldGljIGZpZWxkIGNhbiBjcmVhdGUgYW4gZWxlY3RyaWMgY3VycmVudC4gU3Bpbm5pbmcgYSBjb2lsIGluc2lkZSBhIG1hZ25ldGljIGZpZWxkIChvciBtb3ZpbmcgYSBtYWduZXQgbmVhciBhIGNvaWwpIGdlbmVyYXRlcyBlbGVjdHJpY2l0eS4iLAogICAgICAgICAgICAgICAgc2ltVHlwZTogImdlbmVyYXRvciIsCiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbjogIlNwaW4gdGhlIGdlbmVyYXRvciB0byBpbmR1Y2UgYSBjdXJyZW50LiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJTdW1tYXJ5OiBQb3dlciBEaXN0cmlidXRpb24iLAogICAgICAgICAgICAgICAgdGV4dDogIkEgcG93ZXIgZ3JpZCBpcyBhIG5ldHdvcmsgZm9yIGRlbGl2ZXJpbmcgZWxlY3RyaWNpdHkgZnJvbSBwcm9kdWNlcnMgdG8gY29uc3VtZXJzLiBJdCBjb25zaXN0cyBvZiBnZW5lcmF0aW5nIHN0YXRpb25zLCB0cmFuc21pc3Npb24gbGluZXMsIGFuZCBkaXN0cmlidXRpb24gc3lzdGVtcyB0aGF0IG11c3QgYmUgYmFsYW5jZWQgdG8gcHJldmVudCBibGFja291dHMuIiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJncmlkIiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiQ29ubmVjdCB0aGUgZ3JpZCBub2RlcyB0byBkaXN0cmlidXRlIHBvd2VyLiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGl0bGU6ICJZb3VyIEFkdmVudHVyZSBDb250aW51ZXMhIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJZb3UndmUgaGVscGVkIEFsZXggcmVzdG9yZSBUZWNobm9wb2xpcywgYnV0IHlvdXIgU1RFTSBqb3VybmV5IGlzIGp1c3QgYmVnaW5uaW5nISBUaGUgd29ybGQgaXMgZnVsbCBvZiBwdXp6bGVzIHdhaXRpbmcgdG8gYmUgc29sdmVkLiBLZWVwIGFza2luZyBxdWVzdGlvbnMsIGtlZXAgZXhwZXJpbWVudGluZywgYW5kIGtlZXAgYnVpbGRpbmcuIFdoYXQgd2lsbCB5b3UgY3JlYXRlIG5leHQ/IiwKICAgICAgICAgICAgICAgIHNpbVR5cGU6ICJzYW5kYm94IiwKICAgICAgICAgICAgICAgIGluc3RydWN0aW9uOiAiQ2xpY2sgdG8gYWRkIGJsb2NrcyBhbmQgYnVpbGQgeW91ciBvd24gY3JlYXRpb24gaW4gdGhpcyBwaHlzaWNzIHNhbmRib3ghIgogICAgICAgICAgICB9CiAgICAgICAgXTsKCiAgICAgICAgY29uc3QgQm9vayA9IHsKICAgICAgICAgICAgY3VycmVudFBhZ2U6IDAsCiAgICAgICAgICAgIAogICAgICAgICAgICBpbml0OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyUGFnZSgpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgbmV4dFBhZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgPCBQYWdlcy5sZW5ndGggLSAxKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSsrOwogICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyUGFnZSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMDsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclBhZ2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHByZXZQYWdlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRQYWdlID4gMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UtLTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclBhZ2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHJlbmRlclBhZ2U6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgY29uc3QgcGFnZSA9IFBhZ2VzW3RoaXMuY3VycmVudFBhZ2VdOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgVGV4dAogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhZ2UtbnVtJykudGV4dENvbnRlbnQgPSB0aGlzLmN1cnJlbnRQYWdlICsgMTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3RhbC1wYWdlcycpLnRleHRDb250ZW50ID0gUGFnZXMubGVuZ3RoOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0b3J5LXRpdGxlJykudGV4dENvbnRlbnQgPSBwYWdlLnRpdGxlOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0b3J5LXRleHQnKS5pbm5lckhUTUwgPSBgPHA+JHtwYWdlLnRleHR9PC9wPjxwIGNsYXNzPSJtdC00IHRleHQtc20gZm9udC1ib2xkIHRleHQtZ3JlZW4tcHJpbWFyeSBpdGFsaWMiPlRhc2s6ICR7cGFnZS5pbnN0cnVjdGlvbn08L3A+YDsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gVXBkYXRlIEJ1dHRvbnMKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tcHJldicpLmRpc2FibGVkID0gdGhpcy5jdXJyZW50UGFnZSA9PT0gMDsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tbmV4dCcpLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA9PT0gUGFnZXMubGVuZ3RoIC0gMSkgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4tbmV4dCcpLnRleHRDb250ZW50ID0gIlJlc3RhcnQiOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQnKS5pbm5lckhUTUwgPSAiTmV4dCA8YnI+IOKGkiI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gTG9hZCBTaW11bGF0aW9uCiAgICAgICAgICAgICAgICBTaW11bGF0aW9ucy5sb2FkKHBhZ2Uuc2ltVHlwZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBjb25zdCBTaW11bGF0aW9ucyA9IHsKICAgICAgICAgICAgY2FudmFzOiBudWxsLAogICAgICAgICAgICBjdHg6IG51bGwsCiAgICAgICAgICAgIGFuaW1JZDogbnVsbCwKICAgICAgICAgICAgYWN0aXZlVHlwZTogbnVsbCwKICAgICAgICAgICAgc3RhdGU6IHt9LAoKICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24odHlwZSkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuYW5pbUlkKSBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1JZCk7CiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVR5cGUgPSB0eXBlOwogICAgICAgICAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWNhbnZhcycpOwogICAgICAgICAgICAgICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBSZXNldCBjb250cm9scwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jb250cm9scycpLmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gJyc7CgogICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBzcGVjaWZpYyBzaW11bGF0aW9uCiAgICAgICAgICAgICAgICBpZiAodGhpc1t0eXBlXSkgdGhpc1t0eXBlXS5pbml0KHRoaXMpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gMC4gQ09WRVIKICAgICAgICAgICAgY292ZXI6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgdDogMCwgcGFydGljbGVzOiBbXSB9OwogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDUwOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLnBhcnRpY2xlcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IE1hdGgucmFuZG9tKCkgKiA2MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBNYXRoLnJhbmRvbSgpICogMzUwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcjogTWF0aC5yYW5kb20oKSAqIDE1ICsgNSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBgaHNsKCR7TWF0aC5yYW5kb20oKSozNjB9LCA4MCUsIDYwJSlgLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdng6IChNYXRoLnJhbmRvbSgpLTAuNSkqMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZ5OiAoTWF0aC5yYW5kb20oKS0wLjUpKjEKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMiknOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgNjAwLCAzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLnBhcnRpY2xlcy5mb3JFYWNoKHAgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcC54ICs9IHAudng7IHAueSArPSBwLnZ5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocC54IDwgMCB8fCBwLnggPiA2MDApIHAudnggKj0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihwLnkgPCAwIHx8IHAueSA+IDM1MCkgcC52eSAqPSAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhwLngsIHAueSwgcC5yLCAwLCBNYXRoLlBJKjIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHAuY29sb3I7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSAxMDsgY3R4LnNoYWRvd0NvbG9yID0gIndoaXRlIjsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMmMzZTUwJzsgY3R4LmZvbnQgPSAnYm9sZCA0OHB4IHNlcmlmJzsgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoIlNURU0gQWR2ZW50dXJlIiwgMzAwLCAxNjApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9ICdpdGFsaWMgMjRweCBzYW5zLXNlcmlmJzsgY3R4LmZpbGxTdHlsZSA9ICcjMjdhZTYwJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KCJUaGUgUXVlc3QgZm9yIHRoZSBMb3N0IFNwYXJrIiwgMzAwLCAyMDApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc2hhZG93Qmx1ciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDEuIE1BUAogICAgICAgICAgICBtYXA6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgbm9kZXM6IFtdLCBob3ZlcjogLTEgfTsKICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTw1OyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLm5vZGVzLnB1c2goe3g6IDEwMCArIGkqMTAwLCB5OiAxNzUgKyBNYXRoLnNpbihpKSo1MCwgYWN0aXZlOiBmYWxzZX0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBzaW0uY2FudmFzLm9ubW91c2Vtb3ZlID0gKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHNpbS5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG14ID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBteSA9IGUuY2xpZW50WSAtIHJlY3QudG9wOwogICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUuaG92ZXIgPSAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLm5vZGVzLmZvckVhY2goKG4sIGkpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGQgPSBNYXRoLnNxcnQoKG14LW4ueCkqKjIgKyAobXktbi55KSoqMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZCA8IDIwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5hY3RpdmUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5ob3ZlciA9IGk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIDYwMCwgMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgUGF0aAogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzJjM2U1MCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAzOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc2V0TGluZURhc2goWzEwLCAxMF0pOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5ub2Rlcy5mb3JFYWNoKChuLCBpKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaT09PTApIGN0eC5tb3ZlVG8obi54LCBuLnkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBjdHgubGluZVRvKG4ueCwgbi55KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNldExpbmVEYXNoKFtdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgTm9kZXMKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFsbEFjdGl2ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5ub2Rlcy5mb3JFYWNoKG4gPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IG4uYWN0aXZlID8gJyMyZWNjNzEnIDogJyNiZGMzYzcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKG4ueCwgbi55LCAxMCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLmFjdGl2ZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zaGFkb3dCbHVyID0gMTU7IGN0eC5zaGFkb3dDb2xvciA9ICcjMmVjYzcxJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2ZmZic7IGN0eC5zdHJva2UoKTsgY3R4LnNoYWRvd0JsdXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuLmFjdGl2ZSkgYWxsQWN0aXZlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFsbEFjdGl2ZSkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gIk1hcCBVbmxvY2tlZCEgUHJvY2VlZCB0byB0aGUgbmV4dCBwYWdlLiI7CiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDIuIExPR0lDCiAgICAgICAgICAgIGxvZ2ljOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IHMxOiBmYWxzZSwgczI6IGZhbHNlIH07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udHJvbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWNvbnRyb2xzJyk7CiAgICAgICAgICAgICAgICAgICAgY29udHJvbHMuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGp1c3RpZnktY2VudGVyIGdhcC04Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgZm9udC1ib2xkIHRleHQtYnJhbmQtZGFyayBjdXJzb3ItcG9pbnRlciI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0ic3cxIiBjbGFzcz0idy02IGgtNiBhY2NlbnQtZ3JlZW4tcHJpbWFyeSI+IFN3aXRjaCBBPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgZm9udC1ib2xkIHRleHQtYnJhbmQtZGFyayBjdXJzb3ItcG9pbnRlciI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBpZD0ic3cyIiBjbGFzcz0idy02IGgtNiBhY2NlbnQtZ3JlZW4tcHJpbWFyeSI+IFN3aXRjaCBCPC9sYWJlbD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRleHQtY2VudGVyIG10LTIgdGV4dC1zbSB0ZXh0LWdyYXktNTAwIj5Mb2dpYzogKEEgT1IgQikgQU5EIChOT1QgQSk8L2Rpdj4KICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZSA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLnMxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N3MScpLmNoZWNrZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5zMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdzInKS5jaGVja2VkOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N3MScpLm9uY2hhbmdlID0gdXBkYXRlOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdzInKS5vbmNoYW5nZSA9IHVwZGF0ZTsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYSA9IHNpbS5zdGF0ZS5zMTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYiA9IHNpbS5zdGF0ZS5zMjsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gTG9naWM6IChBIHx8IEIpICYmICFBICA9PiBUaGlzIHNpbXBsaWZpZXMgdG8gKCFBICYmIEIpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhaXQsIGxldCdzIG1ha2UgaXQgc2ltcGxlciBmb3Iga2lkczogQSBBTkQgQgogICAgICAgICAgICAgICAgICAgICAgICAvLyBPciB0aGUgcmlkZGxlOiAiQm90aCBtdXN0IGJlIHRydWUiCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGEgJiYgYjsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgR2F0ZSBWaXN1YWwKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZWNmMGYxJzsgY3R4LmZpbGxSZWN0KDEwMCwgMTAwLCA0MDAsIDE1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMmMzZTUwJzsgY3R4LnN0cm9rZVJlY3QoMTAwLCAxMDAsIDQwMCwgMTUwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElucHV0cwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYSA/ICcjMmVjYzcxJyA6ICcjZTc0YzNjJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKDE1MCwgMTUwLCAxMCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgY3R4LmZpbGxTdHlsZT0nIzAwMCc7IGN0eC5maWxsVGV4dCgiQSIsIDE0NSwgMTQwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGIgPyAnIzJlY2M3MScgOiAnI2U3NGMzYyc7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYygxNTAsIDIwMCwgMTAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7IGN0eC5maWxsU3R5bGU9JyMwMDAnOyBjdHguZmlsbFRleHQoIkIiLCAxNDUsIDE5MCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBHYXRlIEJveAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMzNDQ5NWUnOyBjdHguZmlsbFJlY3QoMjUwLCAxNDAsIDYwLCA3MCk7IGN0eC5maWxsU3R5bGU9JyNmZmYnOyBjdHguZmlsbFRleHQoIkFORCIsIDI4MCwgMTgwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdpcmVzCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjN2Y4YzhkJzsgY3R4LmxpbmVXaWR0aCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygxNjAsIDE1MCk7IGN0eC5saW5lVG8oMjUwLCAxNTApOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygxNjAsIDIwMCk7IGN0eC5saW5lVG8oMjUwLCAyMDApOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygzMTAsIDE3NSk7IGN0eC5saW5lVG8oNDAwLCAxNzUpOyBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBPdXRwdXQgTGlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHJlc3VsdCA/ICcjMmVjYzcxJyA6ICcjOTVhNWE2JzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKDQyMCwgMTc1LCAyMCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc2hhZG93Qmx1ciA9IDIwOyBjdHguc2hhZG93Q29sb3IgPSAnIzJlY2M3MSc7IGN0eC5zdHJva2UoKTsgY3R4LnNoYWRvd0JsdXIgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gIkJyaWRnZSBMb3dlcmVkISI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiQnJpZGdlIExvY2tlZC4iOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyAzLiBGTFVJRFMKICAgICAgICAgICAgZmx1aWQ6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgd2lkdGg6IDUwLCBib2F0WDogMCB9OwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tY29udHJvbHMnKS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC00Ij48c3BhbiBjbGFzcz0iZm9udC1ib2xkIj5SaXZlciBXaWR0aDo8L3NwYW4+PGlucHV0IHR5cGU9InJhbmdlIiBtaW49IjIwIiBtYXg9IjE1MCIgdmFsdWU9IjUwIiBjbGFzcz0iZmxleC0xIiBvbmlucHV0PSJTaW11bGF0aW9ucy5zdGF0ZS53aWR0aD1wYXJzZUludCh0aGlzLnZhbHVlKSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHcgPSBzaW0uc3RhdGUud2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNwZWVkID0gMjAwIC8gdzsgLy8gTmFycm93ZXIgPSBGYXN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJpdmVyIEJhbmtzCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzI3YWU2MCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAwLCA2MDAsIDE3NSAtIHcvMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAxNzUgKyB3LzIsIDYwMCwgMTc1IC0gdy8yKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdhdGVyCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzM0OThkYic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAxNzUgLSB3LzIsIDYwMCwgdyk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBCb2F0CiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5ib2F0WCArPSBzcGVlZCAqIDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2ltLnN0YXRlLmJvYXRYID4gNjAwKSBzaW0uc3RhdGUuYm9hdFggPSAtNTA7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlNjdlMjInOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5lbGxpcHNlKHNpbS5zdGF0ZS5ib2F0WCwgMTc1LCAyMCwgMTAsIDAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBQYXJ0aWNsZXMKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwyNTUsMjU1LDAuNSknOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTwxMDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBweCA9IChEYXRlLm5vdygpLzUgKiBzcGVlZCArIGkqNjApICUgNjAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHB4LCAxNzUsIDIsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFdpZHRoID0gODA7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFNwZWVkID0gMjAwIC8gdGFyZ2V0V2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyh3IC0gdGFyZ2V0V2lkdGgpIDw9IDUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9IGBDdXJyZW50IFNwZWVkOiAke3NwZWVkLnRvRml4ZWQoMSl9IG0vcy4gUGVyZmVjdCEgT3B0aW11bSBmbG93LmA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykuY2xhc3NOYW1lID0gIm10LTMgdGV4dC1jZW50ZXIgZm9udC1ib2xkIHRleHQtZ3JlZW4tcHJpbWFyeSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSBgQ3VycmVudCBTcGVlZDogJHtzcGVlZC50b0ZpeGVkKDEpfSBtL3MuIE9wdGltdW06ICR7dGFyZ2V0U3BlZWQudG9GaXhlZCgxKX0gbS9zIChXaWR0aCB+JHt0YXJnZXRXaWR0aH0pYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS5jbGFzc05hbWUgPSAibXQtMyB0ZXh0LWNlbnRlciBmb250LWJvbGQgdGV4dC1icmFuZC1kYXJrIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyA0LiBGUklDVElPTgogICAgICAgICAgICBmcmljdGlvbjogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyBtdTogMC4xLCB5OiAzMDAsIHg6IDUwIH07CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jb250cm9scycpLmlubmVySFRNTCA9IGAKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTQiPjxzcGFuIGNsYXNzPSJmb250LWJvbGQiPlN1cmZhY2UgUm91Z2huZXNzICjCtSk6PC9zcGFuPjxpbnB1dCB0eXBlPSJyYW5nZSIgbWluPSIwIiBtYXg9IjEiIHN0ZXA9IjAuMSIgdmFsdWU9IjAuMSIgY2xhc3M9ImZsZXgtMSIgb25pbnB1dD0iU2ltdWxhdGlvbnMuc3RhdGUubXU9cGFyc2VGbG9hdCh0aGlzLnZhbHVlKSI+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgYDsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2xvcGUKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDAsIDM1MCk7IGN0eC5saW5lVG8oNjAwLCAxMDApOyBjdHgubGluZVRvKDYwMCwgMzUwKTsgY3R4LmZpbGxTdHlsZSA9ICcjOTVhNWE2JzsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRleHR1cmUgYmFzZWQgb24gbXUKICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2ltLnN0YXRlLm11ID4gMC41KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzdmOGM4ZCc7IGN0eC5saW5lV2lkdGggPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8NjAwOyBpKz0yMCkgeyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oaSwgMzUwIC0gKGkvNjAwKSoyNTApOyBjdHgubGluZVRvKGkrMTAsIDM1MCAtIChpLzYwMCkqMjUwIC0gNSk7IGN0eC5zdHJva2UoKTsgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGFyYWN0ZXIgbG9naWMKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3Jhdml0eSA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyaWN0aW9uID0gc2ltLnN0YXRlLm11ICogNTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV0Rm9yY2UgPSBncmF2aXR5IC0gZnJpY3Rpb247IC8vIFNpbXBsaWZpZWQKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXRGb3JjZSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS54IC09IG5ldEZvcmNlOyAvLyBTbGlkZSBkb3duCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiVG9vIHNsaXBwZXJ5ISBTbGlkaW5nIGJhY2shIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS5jbGFzc05hbWUgPSAibXQtMyB0ZXh0LWNlbnRlciBmb250LWJvbGQgdGV4dC1yZWQtNTAwIjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS54ICs9IDE7IC8vIENsaW1iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiR3JpcCBpcyBnb29kISBDbGltYmluZyEiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLmNsYXNzTmFtZSA9ICJtdC0zIHRleHQtY2VudGVyIGZvbnQtYm9sZCB0ZXh0LWdyZWVuLXByaW1hcnkiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZihzaW0uc3RhdGUueCA8IDUwKSBzaW0uc3RhdGUueCA9IDUwOwogICAgICAgICAgICAgICAgICAgICAgICBpZihzaW0uc3RhdGUueCA+IDU1MCkgc2ltLnN0YXRlLnggPSA1NTA7CgogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzbG9wZVkgPSAzNTAgLSAoc2ltLnN0YXRlLngvNjAwKSoyNTA7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IEh1bWFuIENoYXJhY3RlcgogICAgICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKHNpbS5zdGF0ZS54LCBzbG9wZVkpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBTdGljayBGaWd1cmUKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNlNzRjM2MnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlNzRjM2MnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVDYXAgPSAncm91bmQnOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2Fsa2luZyBhbmltYXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RyaWRlID0gTWF0aC5zaW4oc2ltLnN0YXRlLnggKiAwLjIpICogODsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhlYWQKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKDAsIC01MCwgNiwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQm9keQogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCwgLTQ0KTsgY3R4LmxpbmVUbygwLCAtMjApOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExlZ3MKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDAsIC0yMCk7IGN0eC5saW5lVG8oLTUgKyBzdHJpZGUsIDApOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygwLCAtMjApOyBjdHgubGluZVRvKDUgLSBzdHJpZGUsIDApOyBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBCb290cwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMyYzNlNTAnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoLTUgKyBzdHJpZGUgLSAzLCAtMiwgOCwgNCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCg1IC0gc3RyaWRlIC0gMywgLTIsIDgsIDQpOwoKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJvb3RzCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzJjM2U1MCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgtNSArIHN0cmlkZSAtIDMsIC0yLCA4LCA0KTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDUgLSBzdHJpZGUgLSAzLCAtMiwgOCwgNCk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gQm9vdHMKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMmMzZTUwJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KC01ICsgc3RyaWRlIC0gMywgLTIsIDgsIDQpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoNSAtIHN0cmlkZSAtIDMsIC0yLCA4LCA0KTsKCgogICAgICAgICAgICAgICAgICAgICAgICAvLyBCb290cwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMyYzNlNTAnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoLTUgKyBzdHJpZGUgLSAzLCAtMiwgOCwgNCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCg1IC0gc3RyaWRlIC0gMywgLTIsIDgsIDQpOwoKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJvb3RzCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzJjM2U1MCc7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgtNSArIHN0cmlkZSAtIDMsIC0yLCA4LCA0KTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDUgLSBzdHJpZGUgLSAzLCAtMiwgOCwgNCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBBcm1zCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygwLCAtMzgpOyBjdHgubGluZVRvKC01IC0gc3RyaWRlLCAtMjUpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygwLCAtMzgpOyBjdHgubGluZVRvKDUgKyBzdHJpZGUsIC0yNSk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyA1LiBTT1VORAogICAgICAgICAgICBzb3VuZDogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyBmcmVxOiA1MCwgdGFyZ2V0OiAxNTAgfTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWNvbnRyb2xzJykuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtNCI+PHNwYW4gY2xhc3M9ImZvbnQtYm9sZCI+RnJlcXVlbmN5Ojwvc3Bhbj48aW5wdXQgdHlwZT0icmFuZ2UiIG1pbj0iNTAiIG1heD0iMjUwIiB2YWx1ZT0iNTAiIGNsYXNzPSJmbGV4LTEiIG9uaW5wdXQ9IlNpbXVsYXRpb25zLnN0YXRlLmZyZXE9cGFyc2VJbnQodGhpcy52YWx1ZSkiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIGA7CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRhcmdldCBXYXZlIChHaG9zdCkKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3JnYmEoNDYsIDIwNCwgMTEzLCAwLjMpJzsgY3R4LmxpbmVXaWR0aCA9IDU7IGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCB4PTA7IHg8NjAwOyB4KyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSAxNzUgKyBNYXRoLnNpbih4ICogMC4wNSkgKiA1MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHg9PT0wKSBjdHgubW92ZVRvKHgseSk7IGVsc2UgY3R4LmxpbmVUbyh4LHkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZXIgV2F2ZQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3YXZlbGVuZ3RoID0gMjAwMCAvIHNpbS5zdGF0ZS5mcmVxOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzI5ODBiOSc7IGN0eC5saW5lV2lkdGggPSAzOyBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgeD0wOyB4PDYwMDsgeCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB5ID0gMTc1ICsgTWF0aC5zaW4oeCAqIChNYXRoLlBJKjIvd2F2ZWxlbmd0aCkpICogNTA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih4PT09MCkgY3R4Lm1vdmVUbyh4LHkpOyBlbHNlIGN0eC5saW5lVG8oeCx5KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBtYXRjaAogICAgICAgICAgICAgICAgICAgICAgICAvLyBUYXJnZXQgZnJlcSB+IDE1MCAtPiB3YXZlbGVuZ3RoIH4gMTMuMy4gCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE15IG1hdGggYWJvdmU6IHNpbih4ICogMC4wNSkuIDAuMDUgPSAyUEkgLyBsYW1iZGEuIGxhbWJkYSA9IDEyNS4KICAgICAgICAgICAgICAgICAgICAgICAgLy8gMjAwMCAvIGZyZXEgPSAxMjUgPT4gZnJlcSA9IDE2LiAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGV0J3MganVzdCBjaGVjayByYW5nZS4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpbS5zdGF0ZS5mcmVxID4gMTIwICYmIHNpbS5zdGF0ZS5mcmVxIDwgMTM1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiUmVzb25hbmNlIEFjaGlldmVkISBEb29yIE9wZW5pbmcuIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS5jbGFzc05hbWUgPSAibXQtMyB0ZXh0LWNlbnRlciBmb250LWJvbGQgdGV4dC1ncmVlbi1wcmltYXJ5IjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJGcmVxdWVuY3kgTWlzbWF0Y2guIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS5jbGFzc05hbWUgPSAibXQtMyB0ZXh0LWNlbnRlciBmb250LWJvbGQgdGV4dC1icmFuZC1kYXJrIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzaW0ubG9vcCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gNi4gT1BUSUNTIChMRU5TKQogICAgICAgICAgICBvcHRpY3M6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgbGVuc1g6IDEwMCwgZHJhZ2dpbmc6IGZhbHNlIH07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0WCA9IDUwMDsKICAgICAgICAgICAgICAgICAgICBjb25zdCBmb2NhbExlbmd0aCA9IDIwMDsKCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnREcmFnID0gKG14KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhteCAtIHNpbS5zdGF0ZS5sZW5zWCkgPCAzMCkgc2ltLnN0YXRlLmRyYWdnaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vdmVEcmFnID0gKG14KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaW0uc3RhdGUuZHJhZ2dpbmcpIHNpbS5zdGF0ZS5sZW5zWCA9IE1hdGgubWF4KDUwLCBNYXRoLm1pbig0NTAsIG14KSk7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmNhbnZhcy5vbm1vdXNlZG93biA9IChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBzaW0uY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBzdGFydERyYWcoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5jYW52YXMub25tb3VzZW1vdmUgPSAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gc2ltLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgbW92ZURyYWcoZS5jbGllbnRYIC0gcmVjdC5sZWZ0KTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5jYW52YXMub25tb3VzZXVwID0gKCkgPT4gc2ltLnN0YXRlLmRyYWdnaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgc2ltLmNhbnZhcy5vbm1vdXNlbGVhdmUgPSAoKSA9PiBzaW0uc3RhdGUuZHJhZ2dpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBzaW0uY2FudmFzLm9udG91Y2hzdGFydCA9IChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBzaW0uY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBzdGFydERyYWcoZS50b3VjaGVzWzBdLmNsaWVudFggLSByZWN0LmxlZnQpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmNhbnZhcy5vbnRvdWNobW92ZSA9IChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHNpbS5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVEcmFnKGUudG91Y2hlc1swXS5jbGllbnRYIC0gcmVjdC5sZWZ0KTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5jYW52YXMub250b3VjaGVuZCA9ICgpID0+IHNpbS5zdGF0ZS5kcmFnZ2luZyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCA9ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3R4ID0gc2ltLmN0eDsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNsZWFyUmVjdCgwLDAsNjAwLDM1MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IFNlbnNvcgogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlNzRjM2MnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QodGFyZ2V0WCAtIDUsIDE1MCwgMTAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgY3R4LmZpbGxUZXh0KCJTZW5zb3IiLCB0YXJnZXRYIC0gMTUsIDIyMCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IExlbnMKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbHggPSBzaW0uc3RhdGUubGVuc1g7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgxNzMsIDIxNiwgMjMwLCAwLjUpJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyMzNDk4ZGInOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZWxsaXBzZShseCwgMTc1LCAxNSwgODAsIDAsIDAsIE1hdGguUEkqMik7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7IGN0eC5zdHJva2UoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgUmF5cwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2YxYzQwZic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAyOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByYXlZID0gWzExNSwgMTQ1LCAxNzUsIDIwNSwgMjM1XTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9jdXNYID0gbHggKyBmb2NhbExlbmd0aDsKCiAgICAgICAgICAgICAgICAgICAgICAgIHJheVkuZm9yRWFjaCh5ID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oMCwgeSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKGx4LCB5KTsgLy8gVG8gbGVucwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVmcmFjdCB0byBmb2N1cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGV4dGVuZGVkIHBvaW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzbG9wZSA9ICgxNzUgLSB5KSAvIChmb2N1c1ggLSBseCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmRYID0gNjAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kWSA9IHkgKyBzbG9wZSAqIChlbmRYIC0gbHgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhlbmRYLCBlbmRZKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBGb2N1cwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoZm9jdXNYIC0gdGFyZ2V0WCkgPCAxNSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gIkZvY3VzZWQhIExvY2sgT3BlbmluZy4uLiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykuY2xhc3NOYW1lID0gIm10LTMgdGV4dC1jZW50ZXIgZm9udC1ib2xkIHRleHQtZ3JlZW4tcHJpbWFyeSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWaXN1YWwgZWZmZWN0IGZvciBmb2N1cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHRhcmdldFgsIDE3NSwgMTAsIDAsIE1hdGguUEkqMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSAyMDsgY3R4LnNoYWRvd0NvbG9yID0gJyNmMWM0MGYnOyBjdHguc3Ryb2tlKCk7IGN0eC5zaGFkb3dCbHVyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJBZGp1c3QgbGVucyBwb3NpdGlvbiB0byBmb2N1cyBsaWdodCBvbiBzZW5zb3IuIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS5jbGFzc05hbWUgPSAibXQtMyB0ZXh0LWNlbnRlciBmb250LWJvbGQgdGV4dC1icmFuZC1kYXJrIjsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzaW0ubG9vcCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gNy4gQ0hFTUlTVFJZCiAgICAgICAgICAgIGNoZW1pc3RyeTogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyBwaDogMywgZHJvcHM6IDAgfTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWNvbnRyb2xzJykuaW5uZXJIVE1MID0gYAogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLnN0YXRlLnBoICs9IDAuNTsgU2ltdWxhdGlvbnMuc3RhdGUuZHJvcHMrKzsiIGNsYXNzPSJweC00IHB5LTIgYmctYmx1ZS01MDAgdGV4dC13aGl0ZSByb3VuZGVkIGZvbnQtYm9sZCBob3ZlcjpiZy1ibHVlLTYwMCI+QWRkIEJhc2UgRHJvcDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9IlNpbXVsYXRpb25zLnN0YXRlLnBoID0gMzsgU2ltdWxhdGlvbnMuc3RhdGUuZHJvcHM9MDsiIGNsYXNzPSJtbC00IHB4LTQgcHktMiBiZy1ncmF5LTMwMCB0ZXh0LWdyYXktNzAwIHJvdW5kZWQgZm9udC1ib2xkIGhvdmVyOmJnLWdyYXktNDAwIj5SZXNldDwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIGA7CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN3YW1wIFdhdGVyCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2xvcjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpbS5zdGF0ZS5waCA8IDUpIGNvbG9yID0gJyNlNzRjM2MnOyAvLyBSZWQvQWNpZAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzaW0uc3RhdGUucGggPCA2LjUpIGNvbG9yID0gJyNmMWM0MGYnOyAvLyBZZWxsb3cKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2ltLnN0YXRlLnBoIDw9IDcuNSkgY29sb3IgPSAnIzJlY2M3MSc7IC8vIEdyZWVuL05ldXRyYWwKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBjb2xvciA9ICcjMzQ5OGRiJzsgLy8gQmx1ZS9CYXNlCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgwLCAxMDAsIDYwMCwgMjUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJ1YmJsZXMKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMyknOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTwxMDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB4ID0gTWF0aC5yYW5kb20oKSo2MDA7IGNvbnN0IHkgPSAxMDAgKyBNYXRoLnJhbmRvbSgpKjI1MDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyh4LCB5LCBNYXRoLnJhbmRvbSgpKjUsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ldGVyCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IGN0eC5mb250ID0gIjIwcHggQXJpYWwiOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoYHBIIExldmVsOiAke3NpbS5zdGF0ZS5waC50b0ZpeGVkKDEpfWAsIDIwLCA0MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2ltLnN0YXRlLnBoID49IDYuOCAmJiBzaW0uc3RhdGUucGggPD0gNy4yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiV2F0ZXIgTmV1dHJhbGl6ZWQhIFNhZmUgdG8gY3Jvc3MuIjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaW0uc3RhdGUucGggPiA3LjUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJUb28gQmFzaWMhIjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJUb28gQWNpZGljISI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDguIE1BR05FVElTTQogICAgICAgICAgICBtYWduZXRpc206IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgYWN0aXZlOiBmYWxzZSwgZGVicmlzWTogMzAwIH07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICJweC00IHB5LTIgYmctcmVkLTUwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgZm9udC1ib2xkIHNlbGVjdC1ub25lIGFjdGl2ZTpiZy1yZWQtNzAwIjsKICAgICAgICAgICAgICAgICAgICBidG4udGV4dENvbnRlbnQgPSAiQWN0aXZhdGUgTWFnbmV0IjsKICAgICAgICAgICAgICAgICAgICBidG4ub25tb3VzZWRvd24gPSAoKSA9PiBzaW0uc3RhdGUuYWN0aXZlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBidG4ub25tb3VzZXVwID0gKCkgPT4gc2ltLnN0YXRlLmFjdGl2ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGJ0bi5vbm1vdXNlbGVhdmUgPSAoKSA9PiBzaW0uc3RhdGUuYWN0aXZlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgLy8gVG91Y2ggc3VwcG9ydAogICAgICAgICAgICAgICAgICAgIGJ0bi5vbnRvdWNoc3RhcnQgPSAoZSkgPT4geyBlLnByZXZlbnREZWZhdWx0KCk7IHNpbS5zdGF0ZS5hY3RpdmUgPSB0cnVlOyB9OwogICAgICAgICAgICAgICAgICAgIGJ0bi5vbnRvdWNoZW5kID0gKGUpID0+IHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBzaW0uc3RhdGUuYWN0aXZlID0gZmFsc2U7IH07CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1jb250cm9scycpLmFwcGVuZENoaWxkKGJ0bik7CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyYW5lCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2YxYzQwZic7IGN0eC5maWxsUmVjdCgyNTAsIDAsIDIwLCAxMDApOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWduZXQKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHNpbS5zdGF0ZS5hY3RpdmUgPyAnI2U3NGMzYycgOiAnIzk1YTVhNic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgyMDAsIDEwMCwgMTIwLCA0MCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAvLyBGaWVsZCBMaW5lcwogICAgICAgICAgICAgICAgICAgICAgICBpZihzaW0uc3RhdGUuYWN0aXZlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgyMzEsIDc2LCA2MCwgMC41KSc7IGN0eC5saW5lV2lkdGggPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8NTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKDI2MCwgMTQwLCAyMCArIGkqMTAsIDAsIE1hdGguUEksIGZhbHNlKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGh5c2ljcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2ltLnN0YXRlLmRlYnJpc1kgPiAxNDApIHNpbS5zdGF0ZS5kZWJyaXNZIC09IDU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzaW0uc3RhdGUuZGVicmlzWSA8IDMwMCkgc2ltLnN0YXRlLmRlYnJpc1kgKz0gMTA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlYnJpcwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM3ZjhjOGQnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMjIwLCBzaW0uc3RhdGUuZGVicmlzWSwgODAsIDUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmZpbGxUZXh0KCJTY3JhcCIsIDI2MCwgc2ltLnN0YXRlLmRlYnJpc1kgKyAzMCk7CgogICAgICAgICAgICAgICAgICAgICAgICBpZihzaW0uc3RhdGUuZGVicmlzWSA8PSAxNTApIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJQYXRoIENsZWFyZWQhIjsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiUGF0aCBCbG9ja2VkLiI7CgogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICAvLyA5LiBDSVJDVUlUCiAgICAgICAgICAgIGNpcmN1aXQ6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIC8vIDA6IEhvcml6LCAxOiBWZXJ0CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyB3MTogMSwgdzI6IDAsIHczOiAxIH07IAogICAgICAgICAgICAgICAgICAgIHNpbS5jYW52YXMub25jbGljayA9IChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBzaW0uY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBteCA9IGUuY2xpZW50WCAtIHJlY3QubGVmdDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG14ID4gMTAwICYmIG14IDwgMjAwKSBzaW0uc3RhdGUudzEgPSAxIC0gc2ltLnN0YXRlLncxOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAobXggPiAyNTAgJiYgbXggPCAzNTApIHNpbS5zdGF0ZS53MiA9IDEgLSBzaW0uc3RhdGUudzI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChteCA+IDQwMCAmJiBteCA8IDUwMCkgc2ltLnN0YXRlLnczID0gMSAtIHNpbS5zdGF0ZS53MzsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJDbGljayB3aXJlcyB0byByb3RhdGUuIjsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jbGVhclJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGVkID0gKHNpbS5zdGF0ZS53MSA9PT0gMCAmJiBzaW0uc3RhdGUudzIgPT09IDAgJiYgc2ltLnN0YXRlLnczID09PSAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSBjb25uZWN0ZWQgPyAnI2YxYzQwZicgOiAnIzdmOGM4ZCc7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBCYXR0ZXJ5CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzM0NDk1ZSc7IGN0eC5maWxsUmVjdCgyMCwgMTUwLCA0MCwgNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2lyZXMKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDg7IGN0eC5zdHJva2VTdHlsZSA9IGNvbG9yOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VnbWVudCAxCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNpbS5zdGF0ZS53MSA9PT0gMCkgeyBjdHgubW92ZVRvKDYwLCAxNzUpOyBjdHgubGluZVRvKDIwMCwgMTc1KTsgfSAvLyBDb3JyZWN0CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyBjdHgubW92ZVRvKDEzMCwgMTA1KTsgY3R4LmxpbmVUbygxMzAsIDI0NSk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VnbWVudCAyCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNpbS5zdGF0ZS53MiA9PT0gMCkgeyBjdHgubW92ZVRvKDIwMCwgMTc1KTsgY3R4LmxpbmVUbygzNTAsIDE3NSk7IH0gLy8gQ29ycmVjdAogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsgY3R4Lm1vdmVUbygyNzUsIDEwNSk7IGN0eC5saW5lVG8oMjc1LCAyNDUpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlZ21lbnQgMwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IAogICAgICAgICAgICAgICAgICAgICAgICBpZihzaW0uc3RhdGUudzMgPT09IDApIHsgY3R4Lm1vdmVUbygzNTAsIDE3NSk7IGN0eC5saW5lVG8oNTAwLCAxNzUpOyB9IC8vIENvcnJlY3QKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7IGN0eC5tb3ZlVG8oNDI1LCAxMDUpOyBjdHgubGluZVRvKDQyNSwgMjQ1KTsgfQogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBMb2NrL0xpZ2h0CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb25uZWN0ZWQgPyAnIzJlY2M3MScgOiAnI2MwMzkyYic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyg1MzAsIDE3NSwgMjAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZihjb25uZWN0ZWQpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJDaXJjdWl0IENvbXBsZXRlISBHYXRlIE9wZW4uIjsKCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDEwLiBHRU5FUkFUT1IKICAgICAgICAgICAgZ2VuZXJhdG9yOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IGFuZ2xlOiAwLCBzcGVlZDogMCwgZW5lcmd5OiAwIH07CiAgICAgICAgICAgICAgICAgICAgbGV0IGxhc3RYID0gMDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBzaW0uY2FudmFzLm9ubW91c2Vtb3ZlID0gKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVsdGEgPSBNYXRoLmFicyhlLmNsaWVudFggLSBsYXN0WCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5zcGVlZCArPSBkZWx0YSAqIDAuMDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RYID0gZS5jbGllbnRYOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgLy8gVG91Y2ggc3VwcG9ydAogICAgICAgICAgICAgICAgICAgIHNpbS5jYW52YXMub250b3VjaG1vdmUgPSAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IE1hdGguYWJzKGUudG91Y2hlc1swXS5jbGllbnRYIC0gbGFzdFgpOwogICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUuc3BlZWQgKz0gZGVsdGEgKiAwLjAxOwogICAgICAgICAgICAgICAgICAgICAgICBsYXN0WCA9IGUudG91Y2hlc1swXS5jbGllbnRYOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5zcGVlZCAqPSAwLjk1OyAvLyBGcmljdGlvbgogICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUuYW5nbGUgKz0gc2ltLnN0YXRlLnNwZWVkOwogICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUuZW5lcmd5ID0gTWF0aC5taW4oMTAwLCBzaW0uc3RhdGUuZW5lcmd5ICsgc2ltLnN0YXRlLnNwZWVkICogMC4xKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZWVsCiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoMzAwLCAxNzUpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHgucm90YXRlKHNpbS5zdGF0ZS5hbmdsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzk1YTVhNic7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYygwLCAwLCA4MCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjN2Y4YzhkJzsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KC0xMCwgLTgwLCAyMCwgMTYwKTsgY3R4LmZpbGxSZWN0KC04MCwgLTEwLCAxNjAsIDIwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuZXJneSBCYXIKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZWNmMGYxJzsgY3R4LmZpbGxSZWN0KDE1MCwgMzAwLCAzMDAsIDIwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZjFjNDBmJzsgY3R4LmZpbGxSZWN0KDE1MCwgMzAwLCBzaW0uc3RhdGUuZW5lcmd5ICogMywgMjApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzJjM2U1MCc7IGN0eC5zdHJva2VSZWN0KDE1MCwgMzAwLCAzMDAsIDIwKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNpbS5zdGF0ZS5lbmVyZ3kgPj0gMTAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiR2VuZXJhdG9yIE9ubGluZSEiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSAyMDsgY3R4LnNoYWRvd0NvbG9yID0gJyNmMWM0MGYnOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gIlNwaW4gZmFzdGVyISI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc2hhZG93Qmx1ciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDExLiBHUklECiAgICAgICAgICAgIGdyaWQ6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt4OiA1MCwgeTogMTc1LCB0eXBlOiAnc291cmNlJywgY29ubmVjdGVkOiB0cnVlfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt4OiAyMDAsIHk6IDEwMCwgdHlwZTogJ25vZGUnLCBjb25uZWN0ZWQ6IGZhbHNlfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt4OiAyMDAsIHk6IDI1MCwgdHlwZTogJ25vZGUnLCBjb25uZWN0ZWQ6IGZhbHNlfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt4OiAzNTAsIHk6IDE3NSwgdHlwZTogJ25vZGUnLCBjb25uZWN0ZWQ6IGZhbHNlfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt4OiA1MDAsIHk6IDEwMCwgdHlwZTogJ2hvdXNlJywgY29ubmVjdGVkOiBmYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eDogNTAwLCB5OiAyNTAsIHR5cGU6ICdob3VzZScsIGNvbm5lY3RlZDogZmFsc2V9CiAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICAgICAgICAgIGFkajogWyAvLyBBZGphY2VuY3kgbGlzdCBmb3IgdGhlIGdyYXBoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMSwgMl0sICAgIC8vIDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFswLCAzXSwgICAgLy8gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgWzAsIDNdLCAgICAvLyAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbMSwgMiwgNCwgNV0sIC8vIDMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFszXSwgICAgICAgLy8gNAogICAgICAgICAgICAgICAgICAgICAgICAgICAgWzNdICAgICAgICAvLyA1CiAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAvLyBIZWxwZXIgdG8gY2hlY2sgZm9yIGEgcG93ZXJlZCBwYXRoIGZyb20gYSBub2RlIHRvIHRoZSBzb3VyY2UgKGluZGV4IDApCiAgICAgICAgICAgICAgICAgICAgc2ltLmlzUG93ZXJlZCA9IChzdGFydE5vZGVJbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlcyA9IHNpbS5zdGF0ZS5ub2RlczsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRqID0gc2ltLnN0YXRlLmFkajsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBub2RlIG11c3QgYmUgJ29uJyB0byBiZSBwYXJ0IG9mIGEgcGF0aAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGVzW3N0YXJ0Tm9kZUluZGV4XS5jb25uZWN0ZWQpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBxdWV1ZSA9IFtzdGFydE5vZGVJbmRleF07CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2aXNpdGVkID0gbmV3IFNldChbc3RhcnROb2RlSW5kZXhdKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlKHF1ZXVlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHUgPSBxdWV1ZS5zaGlmdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHUgPT09IDApIHJldHVybiB0cnVlOyAvLyBSZWFjaGVkIHRoZSBzb3VyY2UsIHdoaWNoIGlzIGFsd2F5cyBwb3dlcmVkCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIGFkalt1XSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdmlzaXRlZC5oYXModikgJiYgbm9kZXNbdl0uY29ubmVjdGVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpc2l0ZWQuYWRkKHYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKHYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmNhbnZhcy5vbmNsaWNrID0gKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHNpbS5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG14ID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBteSA9IGUuY2xpZW50WSAtIHJlY3QudG9wOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLm5vZGVzLmZvckVhY2gobiA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihNYXRoLnNxcnQoKG14LW4ueCkqKjIgKyAobXktbi55KSoqMikgPCAyMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbXBsZSBsb2dpYzogaWYgY2xpY2tlZCwgdG9nZ2xlIGl0cyBjb25uZWN0aW9uIHN0YXRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobi50eXBlICE9PSAnc291cmNlJykgbi5jb25uZWN0ZWQgPSAhbi5jb25uZWN0ZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsMCw2MDAsMzUwKTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgTGluZXMgKFNpbXBsaWZpZWQgaGFyZGNvZGVkIGNvbm5lY3Rpb25zKQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkcmF3TGluZSA9IChpMSwgaTIpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4xID0gc2ltLnN0YXRlLm5vZGVzW2kxXTsgY29uc3QgbjIgPSBzaW0uc3RhdGUubm9kZXNbaTJdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQSBsaW5lIGlzIHBvd2VyZWQgaWYgYm90aCBpdHMgZW5kcG9pbnRzIGhhdmUgYSBwYXRoIHRvIHRoZSBzb3VyY2UuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lUG93ZXJlZCA9IHNpbS5pc1Bvd2VyZWQoaTEpICYmIHNpbS5pc1Bvd2VyZWQoaTIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gbGluZVBvd2VyZWQgPyAnI2YxYzQwZicgOiAnIzdmOGM4ZCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhuMS54LCBuMS55KTsgY3R4LmxpbmVUbyhuMi54LCBuMi55KTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgZHJhd0xpbmUoMCwgMSk7IGRyYXdMaW5lKDAsIDIpOwogICAgICAgICAgICAgICAgICAgICAgICBkcmF3TGluZSgxLCAzKTsgZHJhd0xpbmUoMiwgMyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRyYXdMaW5lKDMsIDQpOyBkcmF3TGluZSgzLCA1KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYXcgTm9kZXMKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFsbE5vZGVzQ2xpY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5ub2Rlcy5mb3JFYWNoKChuLCBpKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgc291cmNlIG5vZGUgaXMgYWx3YXlzIGNvbm5lY3RlZC4gRm9yIGFsbCBvdGhlciBub2RlcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXkgYXJlIG5vdCBjb25uZWN0ZWQsIHRoZSBwdXp6bGUgaXMgbm90IHNvbHZlZC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLnR5cGUgIT09ICdzb3VyY2UnICYmICFuLmNvbm5lY3RlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbE5vZGVzQ2xpY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTm9kZVBvd2VyZWQgPSBzaW0uaXNQb3dlcmVkKGkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERldGVybWluZSBub2RlIGNvbG9yIGJhc2VkIG9uIGl0cyB0eXBlIGFuZCBzdGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4udHlwZSA9PT0gJ3NvdXJjZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMyZWNjNzEnOyAvLyBTb3VyY2UgaXMgYWx3YXlzIGdyZWVuIGFuZCBwb3dlcmVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG4udHlwZSA9PT0gJ2hvdXNlJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgaG91c2UgaXMgb25seSB2aXN1YWxseSAicG93ZXJlZCIgKHllbGxvdykgaWYgaXQgaGFzIGEgcGF0aCB0byB0aGUgc291cmNlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBpc05vZGVQb3dlcmVkID8gJyNmMWM0MGYnIDogJyNlNzRjM2MnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gUmVndWxhciBpbnRlcm1lZGlhdGUgbm9kZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEEgcmVndWxhciBub2RlIGlzIHllbGxvdyBvbmx5IGlmIGl0IGhhcyBhIHBhdGggdG8gdGhlIHNvdXJjZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gaXNOb2RlUG93ZXJlZCA/ICcjZjFjNDBmJyA6ICcjMzQ0OTVlJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMobi54LCBuLnksIDE1LCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNmZmYnOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFsbE5vZGVzQ2xpY2tlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbS1mZWVkYmFjaycpLnRleHRDb250ZW50ID0gIkdyaWQgRnVsbHkgT3BlcmF0aW9uYWwhIjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tZmVlZGJhY2snKS50ZXh0Q29udGVudCA9ICJDb25uZWN0IGFsbCBub2RlcyB0byBwb3dlciB0aGUgaG91c2VzLiI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2ltLmxvb3ApOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIDEyLiBGSVJFV09SS1MKICAgICAgICAgICAgZmlyZXdvcmtzOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IHBhcnRpY2xlczogW10gfTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBzaW0uY2FudmFzLm9uY2xpY2sgPSAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gc2ltLmNhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbXggPSBlLmNsaWVudFggLSByZWN0LmxlZnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG15ID0gZS5jbGllbnRZIC0gcmVjdC50b3A7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDMwOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5wYXJ0aWNsZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogbXgsIHk6IG15LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZ4OiAoTWF0aC5yYW5kb20oKS0wLjUpKjUsIHZ5OiAoTWF0aC5yYW5kb20oKS0wLjUpKjUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlmZTogMSwgY29sb3I6IGBoc2woJHtNYXRoLnJhbmRvbSgpKjM2MH0sIDEwMCUsIDUwJSlgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wID0gKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBzaW0uY3R4OwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoNDQsIDYyLCA4MCwgMC4yKSc7IC8vIFRyYWlscwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwwLDYwMCwzNTApOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPXNpbS5zdGF0ZS5wYXJ0aWNsZXMubGVuZ3RoLTE7IGk+PTA7IGktLSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcCA9IHNpbS5zdGF0ZS5wYXJ0aWNsZXNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnggKz0gcC52eDsgcC55ICs9IHAudnk7IHAudnkgKz0gMC4wNTsgLy8gR3Jhdml0eQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5saWZlIC09IDAuMDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBwLmNvbG9yOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gcC5saWZlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHAueCwgcC55LCAzLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYocC5saWZlIDw9IDApIHNpbS5zdGF0ZS5wYXJ0aWNsZXMuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltLWZlZWRiYWNrJykudGV4dENvbnRlbnQgPSAiVGVjaG5vcG9saXMgaXMgU2F2ZWQhIjsKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShzaW0ubG9vcCk7CiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBzaW0ubG9vcCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8gMTMuIFNBTkRCT1gKICAgICAgICAgICAgc2FuZGJveDogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyBib2RpZXM6IFtdIH07CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgc2ltLmNhbnZhcy5vbmNsaWNrID0gKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHNpbS5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG14ID0gZS5jbGllbnRYIC0gcmVjdC5sZWZ0OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBteSA9IGUuY2xpZW50WSAtIHJlY3QudG9wOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLmJvZGllcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IG14LCB5OiBteSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZ4OiAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiAyLCB2eTogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IE1hdGgucmFuZG9tKCkgPiAwLjUgPyAncmVjdCcgOiAnY2lyY2xlJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IE1hdGgucmFuZG9tKCkgKiAzMCArIDIwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGBoc2woJHtNYXRoLnJhbmRvbSgpKjM2MH0sIDcwJSwgNjAlKWAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNzOiAxCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0ID0gc2ltLnN0YXRlLmJvZGllc1tzaW0uc3RhdGUuYm9kaWVzLmxlbmd0aC0xXTsKICAgICAgICAgICAgICAgICAgICAgICAgbGFzdC5tYXNzID0gbGFzdC50eXBlID09PSAncmVjdCcgPyAobGFzdC5zaXplICogbGFzdC5zaXplKSA6IChNYXRoLlBJICogKGxhc3Quc2l6ZS8yKSoqMik7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgc2ltLmxvb3AgPSAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IHNpbS5jdHg7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHcgPSBzaW0uY2FudmFzLndpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoID0gc2ltLmNhbnZhcy5oZWlnaHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHcsIGgpOwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3Jhdml0eSA9IDAuNTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJpY3Rpb24gPSAwLjk4OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN0aXR1dGlvbiA9IDAuMDU7IC8vIExvd2VyZWQgZm9yIGxlc3MgYm91bmNlIGFuZCBiZXR0ZXIgc3RhY2tpbmcKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDEuIEFwcGx5IEZvcmNlcyAmIE1vdmUKICAgICAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlLmJvZGllcy5mb3JFYWNoKGIgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYi52eSArPSBncmF2aXR5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYi52eCAqPSBmcmljdGlvbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIueCArPSBiLnZ4OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYi55ICs9IGIudnk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gMi4gUmVzb2x2ZSBDb2xsaXNpb25zIChJdGVyYXRpdmUpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZXJhdGlvbnMgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGs9MDsgazxpdGVyYXRpb25zOyBrKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJvdW5kYXJ5IENvbGxpc2lvbnMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5ib2RpZXMuZm9yRWFjaChiID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoYWxmID0gYi5zaXplIC8gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYi55ICsgaGFsZiA+IGgpIHsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIueSA9IGggLSBoYWxmOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYi52eSAqPSAtcmVzdGl0dXRpb247IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLnZ4ICo9IDAuOTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiLnggLSBoYWxmIDwgMCkgeyBiLnggPSBoYWxmOyBiLnZ4ICo9IC1yZXN0aXR1dGlvbjsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiLnggKyBoYWxmID4gdykgeyBiLnggPSB3IC0gaGFsZjsgYi52eCAqPSAtcmVzdGl0dXRpb247IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJvZHkgdnMgQm9keQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaW0uc3RhdGUuYm9kaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgc2ltLnN0YXRlLmJvZGllcy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiMSA9IHNpbS5zdGF0ZS5ib2RpZXNbaV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGIyID0gc2ltLnN0YXRlLmJvZGllc1tqXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb2xsaXNpb24gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG54ID0gMCwgbnkgPSAwLCBwZW4gPSAwOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGIxLnR5cGUgPT09ICdjaXJjbGUnICYmIGIyLnR5cGUgPT09ICdjaXJjbGUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkeCA9IGIyLnggLSBiMS54OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZHkgPSBiMi55IC0gYjEueTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLnNxcnQoZHgqZHggKyBkeSpkeSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaW5EaXN0ID0gKGIxLnNpemUgKyBiMi5zaXplKSAvIDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlzdCA8IG1pbkRpc3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsaXNpb24gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbiA9IG1pbkRpc3QgLSBkaXN0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXN0ID09PSAwKSB7IG54ID0gMDsgbnkgPSAxOyB9IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyBueCA9IGR4IC8gZGlzdDsgbnkgPSBkeSAvIGRpc3Q7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiMS50eXBlID09PSAncmVjdCcgJiYgYjIudHlwZSA9PT0gJ3JlY3QnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkeCA9IGIyLnggLSBiMS54OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZHkgPSBiMi55IC0gYjEueTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHdDb21iaW5lZCA9IChiMS5zaXplICsgYjIuc2l6ZSkgLyAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaENvbWJpbmVkID0gKGIxLnNpemUgKyBiMi5zaXplKSAvIDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoZHgpIDwgd0NvbWJpbmVkICYmIE1hdGguYWJzKGR5KSA8IGhDb21iaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGxpc2lvbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3ggPSB3Q29tYmluZWQgLSBNYXRoLmFicyhkeCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3kgPSBoQ29tYmluZWQgLSBNYXRoLmFicyhkeSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG94IDwgb3kpIHsgcGVuID0gb3g7IG54ID0gZHggPiAwID8gMSA6IC0xOyBueSA9IDA7IH0gCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7IHBlbiA9IG95OyBueCA9IDA7IG55ID0gZHkgPiAwID8gMSA6IC0xOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaXJjID0gYjEudHlwZSA9PT0gJ2NpcmNsZScgPyBiMSA6IGIyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IGIxLnR5cGUgPT09ICdjaXJjbGUnID8gYjIgOiBiMTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsb3Nlc3RYID0gTWF0aC5tYXgocmVjdC54IC0gcmVjdC5zaXplLzIsIE1hdGgubWluKGNpcmMueCwgcmVjdC54ICsgcmVjdC5zaXplLzIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNsb3Nlc3RZID0gTWF0aC5tYXgocmVjdC55IC0gcmVjdC5zaXplLzIsIE1hdGgubWluKGNpcmMueSwgcmVjdC55ICsgcmVjdC5zaXplLzIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGR4ID0gY2lyYy54IC0gY2xvc2VzdFg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkeSA9IGNpcmMueSAtIGNsb3Nlc3RZOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzdFNxID0gZHgqZHggKyBkeSpkeTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXN0U3EgPCAoY2lyYy5zaXplLzIpKioyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGlzaW9uID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5zcXJ0KGRpc3RTcSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuID0gKGNpcmMuc2l6ZS8yKSAtIGRpc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpc3QgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZHgyID0gY2lyYy54IC0gcmVjdC54OyBjb25zdCBkeTIgPSBjaXJjLnkgLSByZWN0Lnk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhkeDIpID4gTWF0aC5hYnMoZHkyKSkgeyBueCA9IGR4MiA+IDAgPyAxIDogLTE7IG55ID0gMDsgfSBlbHNlIHsgbnggPSAwOyBueSA9IGR5MiA+IDAgPyAxIDogLTE7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyBueCA9IGR4IC8gZGlzdDsgbnkgPSBkeSAvIGRpc3Q7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYjEudHlwZSA9PT0gJ3JlY3QnKSB7IG54ID0gLW54OyBueSA9IC1ueTsgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sbGlzaW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQb3NpdGlvbmFsIENvcnJlY3Rpb24gKHdpdGggc2xvcCB0byBwcmV2ZW50IGppdHRlcikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNsb3AgPSAwLjU7IC8vIEFsbG93IHRoaXMgbXVjaCBwZW5ldHJhdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVyY2VudCA9IDAuNDsgLy8gQ29ycmVjdCBieSB0aGlzIHBlcmNlbnRhZ2UgdG8gYXZvaWQgb3Zlci1jb3JyZWN0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb3JyZWN0aW9uID0gTWF0aC5tYXgoMCwgcGVuIC0gc2xvcCkgLyAoMS9iMS5tYXNzICsgMS9iMi5tYXNzKSAqIHBlcmNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiMS54IC09ICgxL2IxLm1hc3MpICogY29ycmVjdGlvbiAqIG54OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYjEueSAtPSAoMS9iMS5tYXNzKSAqIGNvcnJlY3Rpb24gKiBueTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIyLnggKz0gKDEvYjIubWFzcykgKiBjb3JyZWN0aW9uICogbng7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiMi55ICs9ICgxL2IyLm1hc3MpICogY29ycmVjdGlvbiAqIG55OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJ2eCA9IGIyLnZ4IC0gYjEudng7IGNvbnN0IHJ2eSA9IGIyLnZ5IC0gYjEudnk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2ZWxBbG9uZ05vcm1hbCA9IHJ2eCAqIG54ICsgcnZ5ICogbnk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBhcHBseSBpbXB1bHNlIGlmIHRoZXkgYXJlIG1vdmluZyB0b3dhcmRzIGVhY2ggb3RoZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWxBbG9uZ05vcm1hbCA8IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaiA9IC0oMSArIHJlc3RpdHV0aW9uKSAqIHZlbEFsb25nTm9ybWFsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGogLz0gKDEvYjEubWFzcyArIDEvYjIubWFzcyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1wdWxzZVggPSBqICogbng7IGNvbnN0IGltcHVsc2VZID0gaiAqIG55OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIxLnZ4IC09IGltcHVsc2VYIC8gYjEubWFzczsgYjEudnkgLT0gaW1wdWxzZVkgLyBiMS5tYXNzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIyLnZ4ICs9IGltcHVsc2VYIC8gYjIubWFzczsgYjIudnkgKz0gaW1wdWxzZVkgLyBiMi5tYXNzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUuYm9kaWVzLmZvckVhY2goYm9keSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYm9keS5jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMmMzZTUwJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJvZHkudHlwZSA9PT0gJ3JlY3QnKSB7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdChib2R5LnggLSBib2R5LnNpemUvMiwgYm9keS55IC0gYm9keS5zaXplLzIsIGJvZHkuc2l6ZSwgYm9keS5zaXplKTsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVJlY3QoYm9keS54IC0gYm9keS5zaXplLzIsIGJvZHkueSAtIGJvZHkuc2l6ZS8yLCBib2R5LnNpemUsIGJvZHkuc2l6ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5hcmMoYm9keS54LCBib2R5LnksIGJvZHkuc2l6ZS8yLCAwLCBNYXRoLlBJKjIpOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbCgpOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHNpbS5sb29wKTsKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHNpbS5sb29wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICAvLyBJbml0aWFsaXplCiAgICAgICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBCb29rLmluaXQoKTsKICAgICAgICB9OwogICAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPg=="))));</script>