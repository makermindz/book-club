<script>document.write(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+U1RFTSBOYXR1cmUgQWR2ZW50dXJlczwvdGl0bGU+CiAgICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4udGFpbHdpbmRjc3MuY29tIj48L3NjcmlwdD4KICAgIDxzY3JpcHQ+CiAgICAgICAgdGFpbHdpbmQuY29uZmlnID0gewogICAgICAgICAgICB0aGVtZTogewogICAgICAgICAgICAgICAgZXh0ZW5kOiB7CiAgICAgICAgICAgICAgICAgICAgY29sb3JzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICdzdG9yeS1ibHVlJzogJyMzYjgyZjYnLAogICAgICAgICAgICAgICAgICAgICAgICAnc3RvcnktZ3JlZW4nOiAnIzIyYzU1ZScsCiAgICAgICAgICAgICAgICAgICAgICAgICdzdG9yeS1kYXJrJzogJyMxZTFiNGInLAogICAgICAgICAgICAgICAgICAgICAgICAncGFwZXInOiAnIzA0MjM0YScsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgIC8vIERpc2FibGUgcmlnaHQtY2xpY2sKICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGV2ZW50ID0+IGV2ZW50LnByZXZlbnREZWZhdWx0KCkpOwoKICAvLyBEaXNhYmxlIEYxMiwgQ3RybCtTaGlmdCtJLCBDdHJsK1UKICBkb2N1bWVudC5vbmtleWRvd24gPSBmdW5jdGlvbihlKSB7CiAgICBpZihldmVudC5rZXlDb2RlID09IDEyMykgcmV0dXJuIGZhbHNlOwogICAgaWYoZS5jdHJsS2V5ICYmIGUuc2hpZnRLZXkgJiYgZS5rZXlDb2RlID09ICdJJy5jaGFyQ29kZUF0KDApKSByZXR1cm4gZmFsc2U7CiAgICBpZihlLmN0cmxLZXkgJiYgZS5rZXlDb2RlID09ICdVJy5jaGFyQ29kZUF0KDApKSByZXR1cm4gZmFsc2U7CiAgfTsKICAKICAgIDwvc2NyaXB0PgogICAgPHN0eWxlPgogICAgICAgIGJvZHkgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOwogICAgICAgICAgICBoZWlnaHQ6IDEwMHZoOwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgICAgICB9CgogICAgICAgIC5wYWdlLWNvbnRhaW5lciB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBtYXgtd2lkdGg6IDEwMjRweDsKICAgICAgICAgICAgaGVpZ2h0OiA5MHZoOwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDQyMzRhOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwIDEwcHggMTBweCAwOyAvKiBSb3VuZGVkIG9uIHRoZSByaWdodCBzaWRlIG9ubHkgKi8KICAgICAgICAgICAgLyogVGhpcyBzaGFkb3cgbWltaWNzIHRoZSBkZXB0aCBvZiBhIHRoaWNrIGJvb2sgKi8KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAyMHB4IDMwcHggLTEwcHggcmdiYSgwLCAwLCAwLCAwLjUpLCAxMHB4IDAgMjBweCByZ2JhKDAsMCwwLDAuMik7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICAgICAgLyogQWRkZWQgdGhlIHNwaW5lIGJvcmRlciBoZXJlICovCiAgICAgICAgICAgIGJvcmRlci1sZWZ0OiAxMHB4IHNvbGlkICMwMjE1MmQ7CiAgICAgICAgfQoKICAgICAgICAubGVmdC1wYWdlIHsKICAgICAgICAgICAgZmxleDogMCAwIDMzLjMzMyU7CiAgICAgICAgICAgIHBhZGRpbmc6IDIuNXJlbTsKICAgICAgICAgICAgLyogVGhpcyBjcmVhdGVzIHRoZSAiZm9sZCIgbGluZSBpbiB0aGUgbWlkZGxlIG9mIHRoZSBib29rICovCiAgICAgICAgICAgIGJvcmRlci1yaWdodDogMnB4IHNvbGlkIHJnYmEoMCwwLDAsMC4zKTsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzA0MjM0YSA5NSUsICMwMzFiM2EgMTAwJSk7CiAgICAgICAgICAgIC8qIEFkZHMgYSBzbGlnaHQgaW5uZXIgc2hhZG93IHRvIHNpbXVsYXRlIHRoZSBwYWdlIGN1cnZpbmcgaW50byB0aGUgc3BpbmUgKi8KICAgICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMTVweCAwIDIwcHggLTEwcHggcmdiYSgwLDAsMCwwLjUpOwogICAgICAgIH0KCiAgICAgICAgLnJpZ2h0LXBhZ2UgewogICAgICAgICAgICBmbGV4OiAwIDAgNjYuNjY2JTsgLyogTWF0Y2hlcyBvcmlnaW5hbCBzdGVtLWJvb2sgbGF5b3V0IHJhdGlvICovCiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzExMTsKICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICB9CgogICAgICAgIGNhbnZhcyB7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMCU7CiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgIH0KCiAgICAgICAgLnN0b3J5LXRleHQgewogICAgICAgICAgICBsaW5lLWhlaWdodDogMS42OwogICAgICAgICAgICBmb250LXNpemU6IDFyZW07CiAgICAgICAgICAgIGNvbG9yOiAjZmZmZmZmOwogICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOyAvKiBJbnRlcm5hbCBzY3JvbGwgZml4ICovCiAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDAuNXJlbTsKICAgICAgICB9CgogICAgICAgIC8qIEN1c3RvbSBTY3JvbGxiYXIgZm9yIFN0b3J5IFRleHQgKi8KICAgICAgICAuc3RvcnktdGV4dDo6LXdlYmtpdC1zY3JvbGxiYXIgeyB3aWR0aDogNHB4OyB9CiAgICAgICAgLnN0b3J5LXRleHQ6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHsgYmFja2dyb3VuZDogIzIyYzU1ZTsgYm9yZGVyLXJhZGl1czogMTBweDsgfQoKICAgICAgICAuY2hhcHRlci10aXRsZSB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnR2VvcmdpYScsIHNlcmlmOwogICAgICAgICAgICBjb2xvcjogI2ZmZmZmZjsKICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogM3B4IHNvbGlkICNmZmYwMDA7CiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDAuNXJlbTsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMS41cmVtOwogICAgICAgIH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CgogICAgPGRpdiBjbGFzcz0icmVsYXRpdmUgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdy1mdWxsIG1heC13LTV4bCBoLVs5MHZoXSI+CiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0iYWJzb2x1dGUgdy1mdWxsIGgtZnVsbCBiZy1zbGF0ZS05MDAgcm91bmRlZC1yLTJ4bCB0cmFuc2Zvcm0gdHJhbnNsYXRlLXgtMyB0cmFuc2xhdGUteS0zIHNoYWRvdy0yeGwgei0wIj48L2Rpdj4KCiAgICAgICAgPGRpdiBjbGFzcz0icGFnZS1jb250YWluZXIgei0xMCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxlZnQtcGFnZSI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtYi1hdXRvIG92ZXJmbG93LWhpZGRlbiBmbGV4IGZsZXgtY29sIj4KICAgICAgICAgICAgICAgICAgICA8aDEgaWQ9InN0b3J5LXRpdGxlIiBjbGFzcz0idGV4dC0zeGwgZm9udC1ib2xkIG1iLTQgY2hhcHRlci10aXRsZSI+PC9oMT4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJzdG9yeS1jb250ZW50IiBjbGFzcz0ic3RvcnktdGV4dCBmbGV4LTEiPjwvZGl2PgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iZmxleCBmbGV4LWNvbCBnYXAtMyBtdC02IHB0LTYgYm9yZGVyLXQgYm9yZGVyLWdyYXktNzAwIj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tbmV4dCIgb25jbGljaz0iQm9vay5uZXh0KCkiIGNsYXNzPSJ3LWZ1bGwgcHgtNiBweS0zIHJvdW5kZWQtbGcgYmctc3RvcnktZ3JlZW4gdGV4dC13aGl0ZSBmb250LWJvbGQgaG92ZXI6YmctZ3JlZW4tNzAwIHNoYWRvdy1tZCB0cmFuc2l0aW9uLWFsbCBhY3RpdmU6c2NhbGUtOTUiPgogICAgICAgICAgICAgICAgICAgICAgICBOZXh0IEFkdmVudHVyZSDihpIKICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG4tcHJldiIgb25jbGljaz0iQm9vay5wcmV2KCkiIGNsYXNzPSJ3LWZ1bGwgcHgtNiBweS0yIHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ncmF5LTUwMCB0ZXh0LWdyYXktMzAwIHRleHQtc20gZm9udC1ib2xkIGhvdmVyOnRleHQtd2hpdGUgaG92ZXI6Ym9yZGVyLXdoaXRlIGRpc2FibGVkOm9wYWNpdHktMzAgdHJhbnNpdGlvbi1hbGwiPgogICAgICAgICAgICAgICAgICAgICAgICBQcmV2aW91cwogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0icmlnaHQtcGFnZSI+CiAgICAgICAgICAgICAgICA8Y2FudmFzIGlkPSJzaW0tY2FudmFzIj48L2NhbnZhcz4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImFic29sdXRlIGJvdHRvbS00IHJpZ2h0LTQgdGV4dC13aGl0ZSB0ZXh0LXMgb3BhY2l0eS01MCBzZWxlY3Qtbm9uZSI+JmNvcHk7IE1ha2VyIE1pbmR6PC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPHNjcmlwdD4KICAgICAgICBjb25zdCBTdG9yaWVzID0gWwogICAgICAgICAgICB7IHRpdGxlOiAiVGhlIENvc21pYyBXYWx0eiIsIHRleHQ6IGA8cCBjbGFzcz0ibWItNCI+TG9uZyBhZ28sIGEgc3RhciB3YXMgYm9ybi4gSXQgc3B1biBhbmQgcHVsbGVkIGR1c3QgYW5kIHJvY2tzIGludG8gYSBncmFuZCB3YWx0ei4gVGhlc2Ugcm9ja3MgYmVjYW1lIHBsYW5ldHMsIGVhY2ggd2l0aCBpdHMgb3duIHBlcnNvbmFsaXR5LjwvcD48cD5XYXRjaCBhcyB0aGV5IHRyYWNlIHRoZWlyIHBhdGhzIHRocm91Z2ggdGhlIHZvaWQsIGEgY2xvY2t3b3JrIG1lY2hhbmlzbSBoZWxkIGJ5IHRoZSBpbnZpc2libGUgc3RyaW5nIG9mIDxzdHJvbmc+R3Jhdml0eTwvc3Ryb25nPi48L3A+YCwgc2ltOiAic29sYXJTeXN0ZW0iIH0sCiAgICAgICAgICAgIHsgdGl0bGU6ICJUaGUgU2hha2luZyBHcm91bmQiLCB0ZXh0OiBgPHAgY2xhc3M9Im1iLTQiPlRoZSBFYXJ0aCdzIHN1cmZhY2UgaXMgYSBwdXp6bGUgb2YgZ2lhbnQgcGllY2VzIGNhbGxlZCA8c3Ryb25nPlRlY3RvbmljIFBsYXRlczwvc3Ryb25nPi4gVGhleSBzbG93bHkgZHJpZnQsIGJ1dCBzb21ldGltZXMgdGhleSBnZXQgc3R1Y2suIFdoZW4gdGhlIHByZXNzdXJlIGJ1aWxkcyBhbmQgdGhleSBzdWRkZW5seSBzbGlwLCB0aGUgZ3JvdW5kIHNoYWtlcyB2aW9sZW50bHkuPC9wPjxwPlRoaXMgaXMgYW4gPHN0cm9uZz5FYXJ0aHF1YWtlPC9zdHJvbmc+LCByZWxlYXNpbmcgZW5lcmd5IGFzIHNlaXNtaWMgd2F2ZXMgdGhhdCB0cmF2ZWwgdGhyb3VnaCB0aGUgcGxhbmV0LjwvcD5gLCBzaW06ICJlYXJ0aHF1YWtlIiB9LAogICAgICAgICAgICB7IHRpdGxlOiAiVGhlIEZpZXJ5IE1vdW50YWluIiwgdGV4dDogYDxwIGNsYXNzPSJtYi00Ij5EZWVwIGJlbmVhdGggdGhlIEVhcnRoLCByb2NrIG1lbHRzIGludG8gYSBmaWVyeSBzb3VwIGNhbGxlZCA8c3Ryb25nPk1hZ21hPC9zdHJvbmc+LiBMaWdodGVyIHRoYW4gdGhlIHNvbGlkIHJvY2sgYXJvdW5kIGl0LCBpdCByaXNlcywgZmluZGluZyBjcmFja3MgYW5kIHdlYWtuZXNzZXMgaW4gdGhlIGNydXN0LjwvcD48cD5XaGVuIGl0IGJ1cnN0cyB0aHJvdWdoIHRoZSBzdXJmYWNlLCBhIDxzdHJvbmc+Vm9sY2Fubzwvc3Ryb25nPiBlcnVwdHMsIHNwZXdpbmcgYXNoLCBnYXMsIGFuZCBtb2x0ZW4gbGF2YS48L3A+YCwgc2ltOiAidm9sY2FubyIgfSwKICAgICAgICAgICAgeyB0aXRsZTogIlRoZSBTa3kncyBHcmVhdCBSaXZlciIsIHRleHQ6IGA8cCBjbGFzcz0ibWItNCI+VGhlIHN1bidzIHdhcm10aCB0dXJucyB3YXRlciBmcm9tIG9jZWFucyBhbmQgbGFrZXMgaW50byBhbiBpbnZpc2libGUgZ2FzIGNhbGxlZCB3YXRlciB2YXBvci4gVGhpcyBpcyA8c3Ryb25nPkV2YXBvcmF0aW9uPC9zdHJvbmc+LiBBcyBpdCByaXNlcywgaXQgY29vbHMgYW5kIGZvcm1zIGNsb3VkcyAoPHN0cm9uZz5Db25kZW5zYXRpb248L3N0cm9uZz4pLjwvcD48cD5XaGVuIHRoZSBjbG91ZHMgZ2V0IHRvbyBoZWF2eSwgdGhlIHdhdGVyIGZhbGxzIGJhY2sgdG8gRWFydGggYXMgcmFpbiwgc25vdywgb3IgaGFpbC4gVGhpcyBpcyB0aGUgPHN0cm9uZz5XYXRlciBDeWNsZTwvc3Ryb25nPiwgYW4gZW5kbGVzcyBqb3VybmV5LjwvcD5gLCBzaW06ICJ3YXRlckN5Y2xlIiB9LAogICAgICAgICAgICB7IHRpdGxlOiAiVGhlIEZsYXNoIG9mIHRoZSBTdG9ybSIsIHRleHQ6IGA8cCBjbGFzcz0ibWItNCI+SW5zaWRlIGEgc3Rvcm0gY2xvdWQsIHRpbnkgaWNlIGNyeXN0YWxzIGFuZCB3YXRlciBkcm9wbGV0cyBydWIgdG9nZXRoZXIsIGJ1aWxkaW5nIHVwIHN0YXRpYyBlbGVjdHJpY2l0eS4gVGhlIHRvcCBvZiB0aGUgY2xvdWQgYmVjb21lcyBwb3NpdGl2ZSwgYW5kIHRoZSBib3R0b20gYmVjb21lcyBuZWdhdGl2ZS48L3A+PHA+V2hlbiB0aGUgY2hhcmdlIGlzIHN0cm9uZyBlbm91Z2gsIGl0IGxlYXBzIHRvIHRoZSBncm91bmQgaW4gYSBnaWFudCwgc3VwZXItaG90IHNwYXJrIHdlIGNhbGwgPHN0cm9uZz5MaWdodG5pbmc8L3N0cm9uZz4uPC9wPmAsIHNpbTogImxpZ2h0bmluZyIgfSwKICAgICAgICAgICAgeyB0aXRsZTogIlRoZSBQYWludGVkIFNreSIsIHRleHQ6IGA8cCBjbGFzcz0ibWItNCI+VGhlIFN1biBjb25zdGFudGx5IHNlbmRzIG91dCBhIHN0cmVhbSBvZiBjaGFyZ2VkIHBhcnRpY2xlcyBjYWxsZWQgdGhlIHNvbGFyIHdpbmQuIEVhcnRoJ3MgbWFnbmV0aWMgZmllbGQgcHJvdGVjdHMgdXMsIGZ1bm5lbGluZyB0aGVzZSBwYXJ0aWNsZXMgdG93YXJkcyB0aGUgcG9sZXMuPC9wPjxwPldoZW4gdGhleSBoaXQgZ2FzZXMgaW4gb3VyIGF0bW9zcGhlcmUsIHRoZXkgZ2xvdywgY3JlYXRpbmcgYmVhdXRpZnVsLCBkYW5jaW5nIGN1cnRhaW5zIG9mIGxpZ2h0IGtub3duIGFzIHRoZSA8c3Ryb25nPkF1cm9yYTwvc3Ryb25nPi48L3A+YCwgc2ltOiAiYXVyb3JhIiB9LAogICAgICAgICAgICB7IHRpdGxlOiAiVGhlIE9jZWFuJ3MgQnJlYXRoIiwgdGV4dDogYDxwIGNsYXNzPSJtYi00Ij5Ud2ljZSBhIGRheSwgdGhlIG9jZWFuIGxldmVscyByaXNlIGFuZCBmYWxsLiBUaGlzIGlzIHRoZSByaHl0aG0gb2YgdGhlIDxzdHJvbmc+VGlkZXM8L3N0cm9uZz4uIEl0J3MgY2F1c2VkIGJ5IHRoZSBncmF2aXRhdGlvbmFsIHB1bGwgb2YgdGhlIE1vb24sIGFuZCB0byBhIGxlc3NlciBleHRlbnQsIHRoZSBTdW4uPC9wPjxwPlRoZSBNb29uJ3MgZ3Jhdml0eSBwdWxscyB0aGUgd2F0ZXIgb24gdGhlIG5lYXIgc2lkZSwgY3JlYXRpbmcgYSBidWxnZS4gQSBzZWNvbmQgYnVsZ2UgZm9ybXMgb24gdGhlIGZhciBzaWRlIGFzIHRoZSBFYXJ0aCBpcyBwdWxsZWQgYXdheSBmcm9tIHRoZSB3YXRlci48L3A+YCwgc2ltOiAidGlkZXMiIH0sCiAgICAgICAgICAgIHsgdGl0bGU6ICJUaGUgU3RhciBFYXRlciIsIHRleHQ6IGA8cCBjbGFzcz0ibWItNCI+V2hlbiBhIHRydWx5IG1hc3NpdmUgc3RhciBkaWVzLCBpdCBjYW4gY29sbGFwc2UgdW5kZXIgaXRzIG93biBncmF2aXR5LCBzcXVlZXppbmcgYWxsIGl0cyBtYXR0ZXIgaW50byBhbiBpbmZpbml0ZWx5IHNtYWxsIHBvaW50LiBUaGlzIGNyZWF0ZXMgYSA8c3Ryb25nPkJsYWNrIEhvbGU8L3N0cm9uZz4uPC9wPjxwPkl0cyBncmF2aXR5IGlzIHNvIHBvd2VyZnVsIHRoYXQgbm90aGluZywgbm90IGV2ZW4gbGlnaHQsIGNhbiBlc2NhcGUgb25jZSBpdCBjcm9zc2VzIHRoZSBldmVudCBob3Jpem9uLiBJdCdzIHRoZSB1bHRpbWF0ZSBjb3NtaWMgdmFjdXVtIGNsZWFuZXIuPC9wPmAsIHNpbTogImJsYWNrSG9sZSIgfSwKICAgICAgICAgICAgeyB0aXRsZTogIlRoZSBGYWxsaW5nIFN0YXJzIiwgdGV4dDogYDxwIGNsYXNzPSJtYi00Ij5BcyBjb21ldHMgdHJhdmVsIG5lYXIgdGhlIFN1biwgdGhleSBsZWF2ZSBhIHRyYWlsIG9mIGR1c3QgYW5kIGljZS4gV2hlbiBFYXJ0aCBwYXNzZXMgdGhyb3VnaCB0aGlzIHRyYWlsLCB0aGUgdGlueSBkZWJyaXMgcGFydGljbGVzIGJ1cm4gdXAgaW4gb3VyIGF0bW9zcGhlcmUuPC9wPjxwPldlIHNlZSB0aGVzZSBidXJuaW5nIHBhcnRpY2xlcyBhcyBicmlnaHQgc3RyZWFrcyBvZiBsaWdodCBhY3Jvc3MgdGhlIG5pZ2h0IHNreSwga25vd24gYXMgYSA8c3Ryb25nPk1ldGVvciBTaG93ZXI8L3N0cm9uZz4uPC9wPmAsIHNpbTogIm1ldGVvclNob3dlciIgfSwKICAgICAgICAgICAgeyB0aXRsZTogIlRoZSBMZWFmJ3MgS2l0Y2hlbiIsIHRleHQ6IGA8cCBjbGFzcz0ibWItNCI+RGVlcCBpbnNpZGUgZXZlcnkgZ3JlZW4gbGVhZiwgYSBtYWdpY2FsIGtpdGNoZW4gaXMgYWx3YXlzIG9wZW4uIFRoZSBjaGVmcyBhcmUgY2FsbGVkIDxzdHJvbmc+Q2hsb3JvcGxhc3RzPC9zdHJvbmc+LjwvcD48cD5UaGV5IHVzZSBzdW5saWdodCwgd2F0ZXIsIGFuZCBjYXJib24gZGlveGlkZSB0byBjb29rIHVwIHN3ZWV0IHN1Z2FyIGZvciB0aGUgcGxhbnQgdG8gZWF0LiBUaGlzIGFtYXppbmcgcHJvY2VzcyBpcyBjYWxsZWQgPHN0cm9uZz5QaG90b3N5bnRoZXNpczwvc3Ryb25nPi48L3A+YCwgc2ltOiAicGhvdG9zeW50aGVzaXMiIH0sCiAgICAgICAgICAgIHsgdGl0bGU6ICJUaGUgV2hpc3BlcmluZyBXb29kcyIsIHRleHQ6IGA8cCBjbGFzcz0ibWItNCI+QmVuZWF0aCB0aGUgZm9yZXN0IGZsb29yIGxpZXMgYSBzZWNyZXQgbmV0d29yay4gQSB2YXN0LCBoaWRkZW4gd2ViIG9mIGZ1bmdhbCB0aHJlYWRzIGNhbGxlZCBhIDxzdHJvbmc+TXljZWxpdW0gTmV0d29yazwvc3Ryb25nPiBjb25uZWN0cyB0aGUgcm9vdHMgb2YgdHJlZXMuPC9wPjxwPlRyZWVzIHVzZSB0aGlzICJXb29kIFdpZGUgV2ViIiB0byBzaGFyZSBudXRyaWVudHMgYW5kIHNlbmQgd2FybmluZyBzaWduYWxzIHRvIGVhY2ggb3RoZXIgYWJvdXQgcGVzdHMgb3IgZHJvdWdodC4gSXQncyBhIGZvcmVzdCdzIGludGVybmV0ITwvcD5gLCBzaW06ICJteWNlbGl1bSIgfSwKICAgICAgICAgICAgeyB0aXRsZTogIlRoZSBCdXN5IEJlZSdzIEpvdXJuZXkiLCB0ZXh0OiBgPHAgY2xhc3M9Im1iLTQiPkZsb3dlcnMgbmVlZCB0byBzaGFyZSBwb2xsZW4gdG8gbWFrZSBzZWVkcy4gVGhleSBjYW4ndCB3YWxrLCBzbyB0aGV5IGhpcmUgbWVzc2VuZ2VycyEgQmVlcywgc2VhcmNoaW5nIGZvciBzd2VldCBuZWN0YXIsIGdldCBjb3ZlcmVkIGluIHllbGxvdyBwb2xsZW4gZHVzdC48L3A+PHA+QXMgYSBiZWUgZmxpZXMgdG8gdGhlIG5leHQgZmxvd2VyLCBpdCBjYXJyaWVzIHRoZSBwb2xsZW4gd2l0aCBpdCwgaGVscGluZyB0aGUgcGxhbnRzIHJlcHJvZHVjZS4gVGhpcyBpcyA8c3Ryb25nPlBvbGxpbmF0aW9uPC9zdHJvbmc+LjwvcD5gLCBzaW06ICJwb2xsaW5hdGlvbiIgfSwKICAgICAgICAgICAgeyB0aXRsZTogIlRoZSBXaW5nZWQgV29uZGVyIiwgdGV4dDogYDxwIGNsYXNzPSJtYi00Ij5BIGNhdGVycGlsbGFyJ3MgbGlmZSBpcyBhIHN0b3J5IG9mIGluY3JlZGlibGUgY2hhbmdlLiBJdCBoYXRjaGVzIGZyb20gYW4gZWdnLCBlYXRzIGxlYXZlcywgYW5kIGdyb3dzLiBUaGVuLCBpdCBmb3JtcyBhIHByb3RlY3RpdmUgc2hlbGwgY2FsbGVkIGEgY2hyeXNhbGlzLjwvcD48cD5JbnNpZGUsIGl0IGNvbXBsZXRlbHkgdHJhbnNmb3JtcyBpdHMgYm9keS4gV2hlbiBpdCBlbWVyZ2VzLCBpdCBpcyBhIGJlYXV0aWZ1bCBidXR0ZXJmbHkuIFRoaXMgbWFnaWNhbCBjaGFuZ2UgaXMgY2FsbGVkIDxzdHJvbmc+TWV0YW1vcnBob3Npczwvc3Ryb25nPi48L3A+YCwgc2ltOiAibWV0YW1vcnBob3NpcyIgfSwKICAgICAgICAgICAgeyB0aXRsZTogIlRoZSBXYW5kZXJpbmcgU2VlZCIsIHRleHQ6IGA8cCBjbGFzcz0ibWItNCI+QSBwbGFudCBjYW4ndCB3YWxrIHRvIGZpbmQgYSBuZXcgaG9tZSBmb3IgaXRzIGJhYmllcyAoc2VlZHMpLiBTbywgaXQgZ2l2ZXMgdGhlbSB3aW5ncyEgU29tZSBzZWVkcywgbGlrZSBkYW5kZWxpb25zLCBoYXZlIGZsdWZmeSBwYXJhY2h1dGVzIHRvIHJpZGUgdGhlIHdpbmQuPC9wPjxwPk90aGVycyBoYXZlIGhvb2tzIHRvIGNhdGNoIGEgcmlkZSBvbiBhbmltYWwgZnVyLiBUaGlzIGNsZXZlciB0cmljayBpcyBjYWxsZWQgPHN0cm9uZz5TZWVkIERpc3BlcnNhbDwvc3Ryb25nPi48L3A+YCwgc2ltOiAic2VlZERpc3BlcnNhbCIgfSwKICAgICAgICAgICAgeyB0aXRsZTogIlRoZSBMaXZpbmcgSmV3ZWxzIiwgdGV4dDogYDxwIGNsYXNzPSJtYi00Ij5BIDxzdHJvbmc+Q29yYWwgUmVlZjwvc3Ryb25nPiBpcyBsaWtlIGEgYnVzdGxpbmcgdW5kZXJ3YXRlciBjaXR5LCBidWlsdCBieSB0aW55IGFuaW1hbHMgY2FsbGVkIHBvbHlwcy4gVGhlc2UgcG9seXBzIGhhdmUgYSBzcGVjaWFsIGZyaWVuZHNoaXAgd2l0aCB0aW55IGFsZ2FlIGxpdmluZyBpbnNpZGUgdGhlbS48L3A+PHA+VGhlIGFsZ2FlIG1ha2UgZm9vZCBmb3IgdGhlIGNvcmFsIHVzaW5nIHN1bmxpZ2h0LCBhbmQgaW4gcmV0dXJuLCB0aGUgY29yYWwgZ2l2ZXMgdGhlbSBhIHNhZmUgaG9tZS4gVGhpcyB0ZWFtd29yaywgY2FsbGVkIHN5bWJpb3NpcywgY3JlYXRlcyB0aGUgcmVlZidzIHZpYnJhbnQgY29sb3JzLjwvcD5gLCBzaW06ICJjb3JhbFJlZWYiIH0sCiAgICAgICAgICAgIHsgdGl0bGU6ICJUaGUgVHdpbGlnaHQgTGFudGVybnMiLCB0ZXh0OiBgPHAgY2xhc3M9Im1iLTQiPk9uIGEgd2FybSBzdW1tZXIgZXZlbmluZywgeW91IG1pZ2h0IHNlZSB0aW55IGJsaW5raW5nIGxpZ2h0cyBpbiB0aGUgZ3Jhc3MuIFRoZXNlIGFyZSA8c3Ryb25nPkZpcmVmbGllczwvc3Ryb25nPiEgVGhleSBhcmVuJ3Qgb24gZmlyZTsgdGhleSBhcmUgbWFraW5nIHRoZWlyIG93biBsaWdodC48L3A+PHA+QSBjaGVtaWNhbCByZWFjdGlvbiBpbnNpZGUgdGhlaXIgYm9kaWVzIHByb2R1Y2VzIGxpZ2h0IHdpdGhvdXQgaGVhdC4gVGhpcyAiY29sZCBsaWdodCIgaXMgY2FsbGVkIDxzdHJvbmc+QmlvbHVtaW5lc2NlbmNlPC9zdHJvbmc+LCBhbmQgdGhleSB1c2UgaXQgdG8gdGFsayB0byBlYWNoIG90aGVyLjwvcD5gLCBzaW06ICJmaXJlZmxpZXMiIH0sCiAgICAgICAgICAgIHsgdGl0bGU6ICJUaGUgR3JlYXQgTWlncmF0aW9uIiwgdGV4dDogYDxwIGNsYXNzPSJtYi00Ij5NYW55IGFuaW1hbHMgdHJhdmVsIHRob3VzYW5kcyBvZiBtaWxlcyBldmVyeSB5ZWFyIGluIGEgam91cm5leSBjYWxsZWQgPHN0cm9uZz5NaWdyYXRpb248L3N0cm9uZz4uIEJ1dCBob3cgZG8gdGhleSBrbm93IHdoZXJlIHRvIGdvPzwvcD48cD5CaXJkcywgdHVydGxlcywgYW5kIGV2ZW4gYnV0dGVyZmxpZXMgaGF2ZSBhbiBhbWF6aW5nIGludGVybmFsIGNvbXBhc3MuIFRoZXkgY2FuIHNlbnNlIHRoZSBFYXJ0aCdzIG1hZ25ldGljIGZpZWxkIGFuZCB1c2UgaXQsIGFsb25nIHdpdGggdGhlIHN1biBhbmQgc3RhcnMsIHRvIG5hdmlnYXRlLjwvcD5gLCBzaW06ICJtaWdyYXRpb24iIH0sCiAgICAgICAgICAgIHsgdGl0bGU6ICJUaGUgQ3J5c3RhbCdzIFNlY3JldCIsIHRleHQ6IGA8cCBjbGFzcz0ibWItNCI+Tm8gdHdvIHNub3dmbGFrZXMgYXJlIGV4YWN0bHkgYWxpa2UsIGJ1dCB0aGV5IGFsbCBoYXZlIHNpeCBzaWRlcy4gVGhpcyBpcyBiZWNhdXNlIHdhdGVyIG1vbGVjdWxlcyBhcnJhbmdlIHRoZW1zZWx2ZXMgaW4gYSBoZXhhZ29uYWwgKHNpeC1zaWRlZCkgbGF0dGljZSBhcyB0aGV5IGZyZWV6ZS48L3A+PHA+QXMgYSB0aW55IGljZSBjcnlzdGFsIGZhbGxzIHRocm91Z2ggdGhlIGNsb3VkcywgbW9yZSB3YXRlciB2YXBvciBmcmVlemVzIG9udG8gaXRzIGFybXMsIGNyZWF0aW5nIGl0cyB1bmlxdWUgYW5kIGJlYXV0aWZ1bCBwYXR0ZXJuLjwvcD5gLCBzaW06ICJzbm93Zmxha2UiIH0sCiAgICAgICAgICAgIHsgdGl0bGU6ICJUaGUgU3RvbmUgU3Rvcnlib29rIiwgdGV4dDogYDxwIGNsYXNzPSJtYi00Ij5Mb25nIGFnbywgd2hlbiBhIGRpbm9zYXVyIGRpZWQgbmVhciBhIHJpdmVyLCBpdHMgYm9uZXMgd2VyZSBxdWlja2x5IGJ1cmllZCBieSBtdWQgYW5kIHNhbmQuIE92ZXIgbWlsbGlvbnMgb2YgeWVhcnMsIHRoZSBtdWQgdHVybmVkIHRvIHJvY2ssIGFuZCBtaW5lcmFscyBzZWVwZWQgaW50byB0aGUgYm9uZXMsIHR1cm5pbmcgdGhlbSB0byBzdG9uZS48L3A+PHA+VGhpcyBjcmVhdGVzIGEgPHN0cm9uZz5Gb3NzaWw8L3N0cm9uZz4sIGEgcGVyZmVjdCBzdG9uZSBjb3B5IHRoYXQgdGVsbHMgdXMgYSBzdG9yeSBhYm91dCBhbmNpZW50IGxpZmUuPC9wPmAsIHNpbTogImZvc3NpbCIgfSwKICAgICAgICAgICAgeyB0aXRsZTogIlRoZSBEcmlwcGluZyBTY3VscHRvciIsIHRleHQ6IGA8cCBjbGFzcz0ibWItNCI+RGVlcCB1bmRlcmdyb3VuZCwgcmFpbndhdGVyIHNlZXBzIHRocm91Z2ggbGltZXN0b25lIHJvY2ssIGRpc3NvbHZpbmcgYSBtaW5lcmFsIGNhbGxlZCBjYWxjaXRlLiBJbnNpZGUgYSBjYXZlLCB0aGlzIHdhdGVyIGRyaXBzIGZyb20gdGhlIGNlaWxpbmcuPC9wPjxwPkVhY2ggZHJvcCBsZWF2ZXMgYSB0aW55IGRlcG9zaXQgb2YgY2FsY2l0ZSBiZWhpbmQuIE92ZXIgdGhvdXNhbmRzIG9mIHllYXJzLCB0aGVzZSBkZXBvc2l0cyBncm93IGludG8gYW1hemluZyByb2NrIGZvcm1hdGlvbnMgY2FsbGVkIDxzdHJvbmc+U3RhbGFjdGl0ZXM8L3N0cm9uZz4gKGZyb20gdGhlIGNlaWxpbmcpIGFuZCA8c3Ryb25nPlN0YWxhZ21pdGVzPC9zdHJvbmc+IChmcm9tIHRoZSBmbG9vcikuPC9wPmAsIHNpbTogImNhdmVzIiB9LAogICAgICAgICAgICB7IHRpdGxlOiAiVGhlIEVuZGxlc3MgU3RvbmUiLCB0ZXh0OiBgPHAgY2xhc3M9Im1iLTQiPlRoZSByb2NrcyBiZW5lYXRoIHlvdXIgZmVldCBhcmUgb24gYW4gZW5kbGVzcyBqb3VybmV5LiBNb2x0ZW4gbWFnbWEgY29vbHMgaW50byA8c3Ryb25nPklnbmVvdXM8L3N0cm9uZz4gcm9jay4gV2luZCBhbmQgcmFpbiBicmVhayBpdCBkb3duIGludG8gc2FuZCwgd2hpY2ggaGFyZGVucyBpbnRvIDxzdHJvbmc+U2VkaW1lbnRhcnk8L3N0cm9uZz4gcm9jay48L3A+PHA+SWYgYnVyaWVkIGFuZCBjb29rZWQgYnkgaGVhdCBhbmQgcHJlc3N1cmUsIGl0IHRyYW5zZm9ybXMgaW50byA8c3Ryb25nPk1ldGFtb3JwaGljPC9zdHJvbmc+IHJvY2ssIHdoaWNoIGNhbiBtZWx0IGFuZCBzdGFydCB0aGUgPHN0cm9uZz5Sb2NrIEN5Y2xlPC9zdHJvbmc+IGFsbCBvdmVyIGFnYWluLjwvcD5gLCBzaW06ICJyb2NrQ3ljbGUiIH0sCiAgICAgICAgICAgIHsgdGl0bGU6ICJUaGUgRWFydGgncyBIb3QgQnJlYXRoIiwgdGV4dDogYDxwIGNsYXNzPSJtYi00Ij5JbiBzb21lIHBsYWNlcywgdW5kZXJncm91bmQgd2F0ZXIgZ2V0cyB0cmFwcGVkIG5lYXIgaG90IG1hZ21hLiBUaGUgd2F0ZXIgYm9pbHMsIGJ1dCB0aGUgcHJlc3N1cmUgZnJvbSB0aGUgcm9jayBhYm92ZSBrZWVwcyBpdCBmcm9tIHR1cm5pbmcgdG8gc3RlYW0uIEl0IGdldHMgc3VwZXJoZWF0ZWQhPC9wPjxwPkV2ZW50dWFsbHksIHRoZSBwcmVzc3VyZSBiZWNvbWVzIHRvbyBncmVhdCwgYW5kIGEgY29sdW1uIG9mIGhvdCB3YXRlciBhbmQgc3RlYW0gZXJ1cHRzIGludG8gdGhlIGFpci4gVGhpcyBpcyBhIDxzdHJvbmc+R2V5c2VyPC9zdHJvbmc+LjwvcD5gLCBzaW06ICJnZXlzZXIiIH0sCiAgICAgICAgICAgIHsgdGl0bGU6ICJUaGUgTGlnaHQtQmVuZGVyJ3MgVHJpY2siLCB0ZXh0OiBgPHAgY2xhc3M9Im1iLTQiPkhhdmUgeW91IGV2ZXIgc2VlbiBhIDxzdHJvbmc+UmFpbmJvdzwvc3Ryb25nPiBhZnRlciBhIHN0b3JtPyBJdCdzIGEgYmVhdXRpZnVsIHRyaWNrIG9mIGxpZ2h0LiBXaGVuIHN1bmxpZ2h0IHBhc3NlcyB0aHJvdWdoIGEgcmFpbmRyb3AsIHRoZSB3YXRlciBhY3RzIGxpa2UgYSB0aW55IHByaXNtLjwvcD48cD5JdCBiZW5kcyB0aGUgd2hpdGUgbGlnaHQgYW5kIHNwbGl0cyBpdCBpbnRvIGFsbCBpdHMgZGlmZmVyZW50IGNvbG9ycy4gVGhpcyBiZW5kaW5nIGlzIGNhbGxlZCA8c3Ryb25nPlJlZnJhY3Rpb248L3N0cm9uZz4sIGFuZCBpdCBwYWludHMgYSBjb2xvcmZ1bCBhcmMgYWNyb3NzIHRoZSBza3kuPC9wPmAsIHNpbTogInJhaW5ib3ciIH0sCiAgICAgICAgICAgIHsgdGl0bGU6ICJUaGUgU3VuJ3MgRmllcnkgQnJlYXRoIiwgdGV4dDogYDxwIGNsYXNzPSJtYi00Ij5UaGUgU3VuJ3Mgc3VyZmFjZSBpcyBhIHRhbmdsZWQgbWVzcyBvZiBwb3dlcmZ1bCBtYWduZXRpYyBmaWVsZHMuIFNvbWV0aW1lcywgdGhlc2UgZmllbGRzIHNuYXAgYW5kIHJlY29ubmVjdCwgcmVsZWFzaW5nIGEgdHJlbWVuZG91cyBidXJzdCBvZiBlbmVyZ3kuPC9wPjxwPlRoaXMgZXhwbG9zaW9uLCBjYWxsZWQgYSA8c3Ryb25nPlNvbGFyIEZsYXJlPC9zdHJvbmc+LCBzZW5kcyBhIHdhdmUgb2YgcmFkaWF0aW9uIGFuZCBjaGFyZ2VkIHBhcnRpY2xlcyBodXJ0bGluZyB0aHJvdWdoIHNwYWNlIGF0IGluY3JlZGlibGUgc3BlZWRzLjwvcD5gLCBzaW06ICJzb2xhckZsYXJlIiB9CiAgICAgICAgXTsKCiAgICAgICAgY29uc3QgQm9vayA9IHsKICAgICAgICAgICAgcGFnZTogMCwKICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7IHRoaXMucmVuZGVyKCk7IH0sCiAgICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdGhpcy5wYWdlID0gKHRoaXMucGFnZSA8IFN0b3JpZXMubGVuZ3RoIC0gMSkgPyB0aGlzLnBhZ2UgKyAxIDogMDsKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByZXY6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMucGFnZSA+IDApIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2UtLTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgY29uc3Qgc3RvcnkgPSBTdG9yaWVzW3RoaXMucGFnZV07CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RvcnktdGl0bGUnKS50ZXh0Q29udGVudCA9IHN0b3J5LnRpdGxlOwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0b3J5LWNvbnRlbnQnKS5pbm5lckhUTUwgPSBzdG9yeS50ZXh0OwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bi1wcmV2JykuZGlzYWJsZWQgPSB0aGlzLnBhZ2UgPT09IDA7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuLW5leHQnKS50ZXh0Q29udGVudCA9IHRoaXMucGFnZSA9PT0gU3Rvcmllcy5sZW5ndGggLSAxID8gIlJlc3RhcnQgQWR2ZW50dXJlIiA6ICJOZXh0IEFkdmVudHVyZSDihpIiOwogICAgICAgICAgICAgICAgU2ltdWxhdGlvbnMubG9hZChzdG9yeS5zaW0pOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgU2ltdWxhdGlvbnMgPSB7CiAgICAgICAgICAgIGFuaW1JZDogbnVsbCwgY2FudmFzOiBudWxsLCBjdHg6IG51bGwsIHdpZHRoOiAwLCBoZWlnaHQ6IDAsIHN0YXRlOiB7fSwKICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24odHlwZSkgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuYW5pbUlkKSBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1JZCk7CiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW0tY2FudmFzJyk7CiAgICAgICAgICAgICAgICB0aGlzLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0ge307CiAgICAgICAgICAgICAgICBjb25zdCBkcHIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxOwogICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IHRoaXMuY2FudmFzLnBhcmVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHJlY3Qud2lkdGggKiBkcHI7CiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSByZWN0LmhlaWdodCAqIGRwcjsKICAgICAgICAgICAgICAgIHRoaXMuY3R4LnNjYWxlKGRwciwgZHByKTsKICAgICAgICAgICAgICAgIHRoaXMud2lkdGggPSByZWN0LndpZHRoOwogICAgICAgICAgICAgICAgdGhpcy5oZWlnaHQgPSByZWN0LmhlaWdodDsKICAgICAgICAgICAgICAgIGlmICh0aGlzW3R5cGVdKSB0aGlzW3R5cGVdLmluaXQodGhpcyk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNvbGFyU3lzdGVtOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUucGxhbmV0cyA9IFtdOwogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5zdGFycyA9IFtdOwogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDEwMDsgaSsrKSBzaW0uc3RhdGUuc3RhcnMucHVzaCh7IHg6IE1hdGgucmFuZG9tKCkgKiBzaW0ud2lkdGgsIHk6IE1hdGgucmFuZG9tKCkgKiBzaW0uaGVpZ2h0LCBzaXplOiBNYXRoLnJhbmRvbSgpICogMiwgYWxwaGE6IE1hdGgucmFuZG9tKCkgfSk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3JzID0gWycjOWNhM2FmJywgJyNkOTc3MDYnLCAnIzNiODJmNicsICcjZWY0NDQ0JywgJyNlYWIzMDgnLCAnI2Y1OWUwYiddOwogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPDY7IGkrKykgc2ltLnN0YXRlLnBsYW5ldHMucHVzaCh7IHI6IDYwICsgaSAqIDM1LCBzaXplOiA0ICsgTWF0aC5yYW5kb20oKSAqIDgsIHNwZWVkOiAwLjAyIC0gKGkgKiAwLjAwMiksIGFuZ2xlOiBNYXRoLnJhbmRvbSgpICogTWF0aC5QSSAqIDIsIGNvbG9yOiBjb2xvcnNbaV0sIHRyYWlsOiBbXSB9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxvb3Aoc2ltKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBsb29wOiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGN0eCwgd2lkdGgsIGhlaWdodCwgc3RhdGUgfSA9IHNpbTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjeCA9IHdpZHRoIC8gMiwgY3kgPSBoZWlnaHQgLyAyOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzBmMTcyYSc7IGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLnN0YXJzLmZvckVhY2gocyA9PiB7IGN0eC5nbG9iYWxBbHBoYSA9IHMuYWxwaGEgKyBNYXRoLnNpbihEYXRlLm5vdygpLzUwMCkqMC4yOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMocy54LCBzLnksIHMuc2l6ZSwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgfSk7CiAgICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdW5QdWxzZSA9IDIwICsgTWF0aC5zaW4oRGF0ZS5ub3coKS8zMDApICogMjsKICAgICAgICAgICAgICAgICAgICBjb25zdCBncmFkID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KGN4LCBjeSwgNSwgY3gsIGN5LCBzdW5QdWxzZSAqIDIpOwogICAgICAgICAgICAgICAgICAgIGdyYWQuYWRkQ29sb3JTdG9wKDAsICcjZmZmJyk7IGdyYWQuYWRkQ29sb3JTdG9wKDAuMiwgJyNmY2QzNGQnKTsgZ3JhZC5hZGRDb2xvclN0b3AoMSwgJ3RyYW5zcGFyZW50Jyk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGdyYWQ7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhjeCwgY3ksIHN1blB1bHNlICogMiwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmYmJmMjQnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoY3gsIGN5LCAxNSwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5wbGFuZXRzLmZvckVhY2gocCA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHAuYW5nbGUgKz0gcC5zcGVlZDsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeCA9IGN4ICsgTWF0aC5jb3MocC5hbmdsZSkgKiBwLnIsIHkgPSBjeSArIE1hdGguc2luKHAuYW5nbGUpICogcC5yOwogICAgICAgICAgICAgICAgICAgICAgICBwLnRyYWlsLnB1c2goe3gsIHl9KTsgaWYgKHAudHJhaWwubGVuZ3RoID4gNDApIHAudHJhaWwuc2hpZnQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguc3Ryb2tlU3R5bGUgPSBwLmNvbG9yOyBjdHgubGluZVdpZHRoID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgcC50cmFpbC5mb3JFYWNoKChwb3MsIGkpID0+IHsgY3R4Lmdsb2JhbEFscGhhID0gaSAvIDQwOyBpZiAoaT09PTApIGN0eC5tb3ZlVG8ocG9zLngsIHBvcy55KTsgZWxzZSBjdHgubGluZVRvKHBvcy54LCBwb3MueSk7IH0pOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7IGN0eC5nbG9iYWxBbHBoYSA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBwLmNvbG9yOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoeCwgeSwgcC5zaXplLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDAsMC41KSc7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyh4LCB5LCBwLnNpemUsIHAuYW5nbGUgKyBNYXRoLlBJLzIsIHAuYW5nbGUgLSBNYXRoLlBJLzIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKHNpbSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBwaG90b3N5bnRoZXNpczogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7IHNpbS5zdGF0ZS5wYXJ0aWNsZXMgPSBbXTsgdGhpcy5sb29wKHNpbSk7IH0sCiAgICAgICAgICAgICAgICBsb29wOiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGN0eCwgd2lkdGgsIGhlaWdodCwgc3RhdGUgfSA9IHNpbTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBncmFkID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIDAsIGhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgZ3JhZC5hZGRDb2xvclN0b3AoMCwgJyM4NmVmYWMnKTsgZ3JhZC5hZGRDb2xvclN0b3AoMSwgJyMyMmM1NWUnKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gZ3JhZDsgY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMTZhMzRhJzsgY3R4LmxpbmVXaWR0aCA9IDI7CiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8d2lkdGg7IGkrPTUwKSB7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhpLCAwKTsgY3R4LmxpbmVUbyhpICsgTWF0aC5zaW4oaSkqMTAsIGhlaWdodCk7IGN0eC5zdHJva2UoKTsgfQogICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4xKSBzdGF0ZS5wYXJ0aWNsZXMucHVzaCh7eDogTWF0aC5yYW5kb20oKSp3aWR0aCwgeTogLTEwLCB2eDogMCwgdnk6IDIgKyBNYXRoLnJhbmRvbSgpLCB0eXBlOiAnc3VuJywgcjogM30pOwogICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4wNSkgc3RhdGUucGFydGljbGVzLnB1c2goe3g6IC0xMCwgeTogTWF0aC5yYW5kb20oKSpoZWlnaHQsIHZ4OiAyLCB2eTogKE1hdGgucmFuZG9tKCktMC41KSwgdHlwZTogJ2NvMicsIHI6IDR9KTsKICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMDUpIHN0YXRlLnBhcnRpY2xlcy5wdXNoKHt4OiBNYXRoLnJhbmRvbSgpKndpZHRoLCB5OiBoZWlnaHQrMTAsIHZ4OiAoTWF0aC5yYW5kb20oKS0wLjUpLCB2eTogLTIsIHR5cGU6ICdoMm8nLCByOiA0fSk7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHN0YXRlLnBhcnRpY2xlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcCA9IHN0YXRlLnBhcnRpY2xlc1tpXTsgcC54ICs9IHAudng7IHAueSArPSBwLnZ5OwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkeCA9IHAueCAtIHdpZHRoLzIsIGR5ID0gcC55IC0gaGVpZ2h0LzI7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLnNxcnQoZHgqZHggKyBkeSpkeSkgPCA1MCAmJiAocC50eXBlID09PSAnc3VuJyB8fCBwLnR5cGUgPT09ICdjbzInIHx8IHAudHlwZSA9PT0gJ2gybycpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5wYXJ0aWNsZXMuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VHlwZSA9IE1hdGgucmFuZG9tKCkgPiAwLjUgPyAnbzInIDogJ3N1Z2FyJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLnBhcnRpY2xlcy5wdXNoKHt4OiB3aWR0aC8yLCB5OiBoZWlnaHQvMiwgdng6IChNYXRoLnJhbmRvbSgpLTAuNSkqKG5ld1R5cGU9PT0nbzInPzM6MSksIHZ5OiAoTWF0aC5yYW5kb20oKS0wLjUpKihuZXdUeXBlPT09J28yJz8zOjEpLCB0eXBlOiBuZXdUeXBlLCByOiBuZXdUeXBlPT09J28yJz81OjYsIGxpZmU6IDEwMH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAudHlwZSA9PT0gJ3N1bicpIGN0eC5maWxsU3R5bGUgPSAnI2ZhY2MxNSc7IGVsc2UgaWYgKHAudHlwZSA9PT0gJ2NvMicpIGN0eC5maWxsU3R5bGUgPSAnIzZiNzI4MCc7IGVsc2UgaWYgKHAudHlwZSA9PT0gJ2gybycpIGN0eC5maWxsU3R5bGUgPSAnIzNiODJmNic7IGVsc2UgaWYgKHAudHlwZSA9PT0gJ28yJykgY3R4LmZpbGxTdHlsZSA9ICcjYmFlNmZkJzsgZWxzZSBpZiAocC50eXBlID09PSAnc3VnYXInKSBjdHguZmlsbFN0eWxlID0gJyNmZmYnOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMocC54LCBwLnksIHAuciwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAueCA8IC0yMCB8fCBwLnggPiB3aWR0aCsyMCB8fCBwLnkgPCAtMjAgfHwgcC55ID4gaGVpZ2h0KzIwKSBzdGF0ZS5wYXJ0aWNsZXMuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjEsIDEyOCwgNjEsIDAuOCknOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5lbGxpcHNlKHdpZHRoLzIsIGhlaWdodC8yLCA2MCwgNDAsIDAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyM4NmVmYWMnOyBjdHgubGluZVdpZHRoID0gMzsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IGN0eC5mb250ID0gIjEycHggc2Fucy1zZXJpZiI7IGN0eC50ZXh0QWxpZ24gPSAiY2VudGVyIjsgY3R4LmZpbGxUZXh0KCJDaGxvcm9wbGFzdCIsIHdpZHRoLzIsIGhlaWdodC8yICsgNSk7CiAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmxvb3Aoc2ltKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVhcnRocXVha2U6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgeyBzaW0uc3RhdGUgPSB7IG9mZnNldDogMCwgc2hha2VUaW1lOiAwLCBzaG9ja3dhdmVzOiBbXSB9OyB0aGlzLmxvb3Aoc2ltKTsgfSwKICAgICAgICAgICAgICAgIGxvb3A6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgY3R4LCB3aWR0aCwgaGVpZ2h0LCBzdGF0ZSB9ID0gc2ltOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzg1NGQwZSc7IGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5zaGFrZVRpbWUrKzsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuc2hha2VUaW1lID4gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLm9mZnNldCA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDIwOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuc2hha2VUaW1lID4gMjA1KSB7IHN0YXRlLnNoYWtlVGltZSA9IDA7IHN0YXRlLm9mZnNldCA9IDA7IHN0YXRlLnNob2Nrd2F2ZXMucHVzaCh7eDogd2lkdGgvMiwgeTogMTUwLCByOiAwfSk7IH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyBzdGF0ZS5vZmZzZXQgPSBNYXRoLnNpbihzdGF0ZS5zaGFrZVRpbWUgKiAwLjUpICogMjsgfQogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ExNjIwNyc7IGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aC8yIC0gMiArIHN0YXRlLm9mZnNldCwgaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM3MTNmMTInOyBjdHguZmlsbFJlY3Qod2lkdGgvMiArIDIgKyBzdGF0ZS5vZmZzZXQsIDAsIHdpZHRoLzIgLSAyLCBoZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSknOyBjdHgubGluZVdpZHRoID0gMzsKICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSBzdGF0ZS5zaG9ja3dhdmVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3ID0gc3RhdGUuc2hvY2t3YXZlc1tpXTsgdy5yICs9IDU7IGN0eC5nbG9iYWxBbHBoYSA9IDEgLSAody5yIC8gNDAwKTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHcueCwgdy55LCB3LnIsIDAsIE1hdGguUEkqMik7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHcuciA+IDQwMCkgc3RhdGUuc2hvY2t3YXZlcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7CiAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmxvb3Aoc2ltKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHZvbGNhbm86IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgeyBzaW0uc3RhdGUgPSB7IHBhcnRpY2xlczogW10sIG1hZ21hWTogc2ltLmhlaWdodCwgbGF2YTogW10gfTsgdGhpcy5sb29wKHNpbSk7IH0sCiAgICAgICAgICAgICAgICBsb29wOiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGN0eCwgd2lkdGgsIGhlaWdodCwgc3RhdGUgfSA9IHNpbTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM2YjcyODAnOyBjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjNDQ0MDNjJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDAsIGhlaWdodCk7IGN0eC5saW5lVG8od2lkdGgvMiAtIDUwLCAxMDApOyBjdHgubGluZVRvKHdpZHRoLzIgKyA1MCwgMTAwKTsgY3R4LmxpbmVUbyh3aWR0aCwgaGVpZ2h0KTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUubWFnbWFZID4gMTAwKSBzdGF0ZS5tYWdtYVkgLT0gMC41OwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2Y5NzMxNic7IGN0eC5maWxsUmVjdCh3aWR0aC8yIC0gMTAsIHN0YXRlLm1hZ21hWSwgMjAsIGhlaWdodCAtIHN0YXRlLm1hZ21hWSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLm1hZ21hWSA8PSAxMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8NTsgaSsrKSBzdGF0ZS5wYXJ0aWNsZXMucHVzaCh7IHg6IHdpZHRoLzIsIHk6IDEwMCwgdng6IChNYXRoLnJhbmRvbSgpLTAuNSkqNCwgdnk6IC01LU1hdGgucmFuZG9tKCkqNSwgbGlmZTogMTAwLCBjb2xvcjogTWF0aC5yYW5kb20oKT4wLjM/JyM1NzUzNGUnOicjZjU5ZTBiJyB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoTWF0aC5yYW5kb20oKTwwLjMpIHN0YXRlLmxhdmEucHVzaCh7IHg6IHdpZHRoLzIrKE1hdGgucmFuZG9tKCktMC41KSo0MCwgeTogMTAwIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNlZjQ0NDQnOwogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IHN0YXRlLmxhdmEubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGwgPSBzdGF0ZS5sYXZhW2ldOyBsLnggKz0gbC54IDwgd2lkdGgvMiA/IC0wLjUgOiAwLjU7IGwueSArPSAyOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMobC54LCBsLnksIDQsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGwueSA+IGhlaWdodCkgc3RhdGUubGF2YS5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IHN0YXRlLnBhcnRpY2xlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcCA9IHN0YXRlLnBhcnRpY2xlc1tpXTsgcC54ICs9IHAudng7IHAueSArPSBwLnZ5OyBwLnZ5ICs9IDAuMTsgcC5saWZlLS07CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBwLmNvbG9yOyBjdHguZ2xvYmFsQWxwaGEgPSBwLmxpZmUgLyAxMDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhwLngsIHAueSwgNSwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHAubGlmZSA8PSAwKSBzdGF0ZS5wYXJ0aWNsZXMuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxOwogICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKHNpbSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB3YXRlckN5Y2xlOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsgc2ltLnN0YXRlID0geyBwYXJ0aWNsZXM6IFtdLCBjbG91ZFNpemU6IDIwIH07IHRoaXMubG9vcChzaW0pOyB9LAogICAgICAgICAgICAgICAgbG9vcDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBjdHgsIHdpZHRoLCBoZWlnaHQsIHN0YXRlIH0gPSBzaW07CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjN2RkM2ZjJzsgY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzA3NTk4NSc7IGN0eC5maWxsUmVjdCgwLCBoZWlnaHQgLSA1MCwgd2lkdGgsIDUwKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmY2QzNGQnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoNTAsIDUwLCAzMCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuNSkgc3RhdGUucGFydGljbGVzLnB1c2goeyB4OiBNYXRoLnJhbmRvbSgpICogd2lkdGgsIHk6IGhlaWdodCAtIDUwLCB0eXBlOiAndmFwb3InLCB2eDogKE1hdGgucmFuZG9tKCktMC41KSowLjUsIHZ5OiAtMSB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuY2xvdWRTaXplID4gODAgJiYgTWF0aC5yYW5kb20oKSA8IDAuNSkgc3RhdGUucGFydGljbGVzLnB1c2goeyB4OiB3aWR0aC8yLTQwK01hdGgucmFuZG9tKCkqODAsIHk6IDEwMCwgdHlwZTogJ3JhaW4nLCB2eTogNSB9KTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjbG91ZENvbG9yID0gTWF0aC5mbG9vcigyNTUgLSBzdGF0ZS5jbG91ZFNpemUpOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBgcmdiKCR7Y2xvdWRDb2xvcn0sJHtjbG91ZENvbG9yfSwke2Nsb3VkQ29sb3J9KWA7CiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHdpZHRoLzIsIDEwMCwgc3RhdGUuY2xvdWRTaXplLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyh3aWR0aC8yLTQwLCAxMDAsIHN0YXRlLmNsb3VkU2l6ZSowLjgsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHdpZHRoLzIrNDAsIDEwMCwgc3RhdGUuY2xvdWRTaXplKjAuOCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSBzdGF0ZS5wYXJ0aWNsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHAgPSBzdGF0ZS5wYXJ0aWNsZXNbaV07IHAueCArPSBwLnZ4IHx8IDA7IHAueSArPSBwLnZ5OwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocC50eXBlID09PSAndmFwb3InKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjU1LDI1NSwyNTUsMC4zKSc7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhwLngsIHAueSwgMywgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLnkgPCAxMjApIHsgc3RhdGUucGFydGljbGVzLnNwbGljZShpLCAxKTsgaWYoc3RhdGUuY2xvdWRTaXplIDwgMTAwKSBzdGF0ZS5jbG91ZFNpemUgKz0gMC41OyB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocC50eXBlID09PSAncmFpbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMGVhNWU5JzsgY3R4LmxpbmVXaWR0aCA9IDI7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhwLngsIHAueSk7IGN0eC5saW5lVG8ocC54LCBwLnktMTApOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocC55ID4gaGVpZ2h0IC0gNTApIHN0YXRlLnBhcnRpY2xlcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmxvb3Aoc2ltKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxpZ2h0bmluZzogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0IH0gPSBzaW07IGNvbnN0IGNpdHlzY2FwZVBhdGggPSBuZXcgUGF0aDJEKCk7IGNpdHlzY2FwZVBhdGgubW92ZVRvKDAsIGhlaWdodCk7IGNpdHlzY2FwZVBhdGgubGluZVRvKDAsIGhlaWdodCAtIDQwKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4ICs9IDIwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ1aWxkaW5nSGVpZ2h0ID0gNDAgKyBNYXRoLnJhbmRvbSgpICogODA7IGNvbnN0IHRyZWVIZWlnaHQgPSAzMCArIE1hdGgucmFuZG9tKCkgKiA0MDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjQpIHsgY2l0eXNjYXBlUGF0aC5saW5lVG8oeCwgaGVpZ2h0IC0gYnVpbGRpbmdIZWlnaHQpOyBjaXR5c2NhcGVQYXRoLmxpbmVUbyh4ICsgMjAsIGhlaWdodCAtIGJ1aWxkaW5nSGVpZ2h0KTsgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsgY2l0eXNjYXBlUGF0aC5saW5lVG8oeCwgaGVpZ2h0IC0gNDApOyBjaXR5c2NhcGVQYXRoLmxpbmVUbyh4ICsgMTAsIGhlaWdodCAtIDQwIC0gdHJlZUhlaWdodCk7IGNpdHlzY2FwZVBhdGgubGluZVRvKHggKyAyMCwgaGVpZ2h0IC0gNDApOyB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNpdHlzY2FwZVBhdGgubGluZVRvKHdpZHRoLCBoZWlnaHQgLSA0MCk7IGNpdHlzY2FwZVBhdGgubGluZVRvKHdpZHRoLCBoZWlnaHQpOyBjaXR5c2NhcGVQYXRoLmNsb3NlUGF0aCgpOwogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZSA9IHsgYm9sdDogbnVsbCwgdGltZTogMCwgY2l0eXNjYXBlUGF0aDogY2l0eXNjYXBlUGF0aCB9OyB0aGlzLmxvb3Aoc2ltKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBsb29wOiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGN0eCwgd2lkdGgsIGhlaWdodCwgc3RhdGUgfSA9IHNpbTsgY3R4LmZpbGxTdHlsZSA9ICcjMWUyOTNiJzsgY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzBjMGEwOSc7IGN0eC5maWxsKHN0YXRlLmNpdHlzY2FwZVBhdGgpOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzQ3NTU2OSc7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmVsbGlwc2Uod2lkdGgvMiwgODAsIDE1MCwgNTAsIDAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUudGltZSsrOwogICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZS50aW1lID4gMTUwICYmICFzdGF0ZS5ib2x0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmJvbHQgPSBbe3g6IHdpZHRoLzIsIHk6IDEzMH1dOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTwxMDsgaSsrKSB7IGxldCBsYXN0ID0gc3RhdGUuYm9sdFtzdGF0ZS5ib2x0Lmxlbmd0aC0xXTsgc3RhdGUuYm9sdC5wdXNoKHt4OiBsYXN0LnggKyAoTWF0aC5yYW5kb20oKS0wLjUpKjQwLCB5OiBsYXN0LnkgKyAyMCArIE1hdGgucmFuZG9tKCkqMjB9KTsgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUudGltZSA+IDE2MCkgeyBzdGF0ZS5ib2x0ID0gbnVsbDsgc3RhdGUudGltZSA9IDA7IH0KICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuYm9sdCkgewogICAgICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2ZlZjA4YSc7IGN0eC5saW5lV2lkdGggPSA0OyBjdHguc2hhZG93Q29sb3IgPSAnI2ZlZjA4YSc7IGN0eC5zaGFkb3dCbHVyID0gMjA7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgc3RhdGUuYm9sdC5mb3JFYWNoKChwLCBpKSA9PiB7IGlmKGk9PT0wKSBjdHgubW92ZVRvKHAueCwgcC55KTsgZWxzZSBjdHgubGluZVRvKHAueCwgcC55KTsgfSk7IGN0eC5zdHJva2UoKTsgY3R4LnNoYWRvd0JsdXIgPSAwOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2Y4NzE3MSc7IGN0eC5mb250ID0gJ2JvbGQgMTZweCBzYW5zLXNlcmlmJzsgZm9yKGxldCBpPTA7IGk8MTA7IGkrKykgY3R4LmZpbGxUZXh0KCcrJywgd2lkdGgvMi0xMDArTWF0aC5yYW5kb20oKSoyMDAsIDYwK01hdGgucmFuZG9tKCkqMjApOwogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM2MGE1ZmEnOyBmb3IobGV0IGk9MDsgaTwxMDsgaSsrKSBjdHguZmlsbFRleHQoJy0nLCB3aWR0aC8yLTEwMCtNYXRoLnJhbmRvbSgpKjIwMCwgMTAwK01hdGgucmFuZG9tKCkqMjApOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMubG9vcChzaW0pKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXVyb3JhOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsgc2ltLnN0YXRlID0geyB0OiAwIH07IHRoaXMubG9vcChzaW0pOyB9LAogICAgICAgICAgICAgICAgbG9vcDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBjdHgsIHdpZHRoLCBoZWlnaHQsIHN0YXRlIH0gPSBzaW07IHN0YXRlLnQgKz0gMC4wMjsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwZjE3MmEnOyBjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgZm9yKGxldCBpPTA7IGk8NTA7IGkrKykgeyBjb25zdCB4ID0gKE1hdGguc2luKGkqMTIzKSoxMDAwMCkld2lkdGg7IGNvbnN0IHkgPSAoTWF0aC5jb3MoaSo0NTYpKjEwMDAwKSVoZWlnaHQ7IGN0eC5nbG9iYWxBbHBoYSA9IDAuNSswLjUqTWF0aC5zaW4oc3RhdGUudCtpKTsgY3R4LmZpbGxSZWN0KE1hdGguYWJzKHgpLCBNYXRoLmFicyh5KSwgMS41LCAxLjUpOyB9CiAgICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkcmF3Q3VydGFpbiA9IChjb2xvciwgb2Zmc2V0LCBzcGVlZCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygwLCBoZWlnaHQpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8PSB3aWR0aDsgeCArPSAxMCkgeyBjb25zdCB5ID0gNTAgKyBNYXRoLnNpbih4KjAuMDErc3RhdGUudCpzcGVlZCtvZmZzZXQpKjUwICsgTWF0aC5zaW4oeCowLjAyK3N0YXRlLnQqMC41KSozMDsgY3R4LmxpbmVUbyh4LCB5KTsgfQogICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHdpZHRoLCBoZWlnaHQpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzY3JlZW4nOyAKICAgICAgICAgICAgICAgICAgICBjb25zdCBncmFkMSA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCAwLCAwLCBoZWlnaHQpOyBncmFkMS5hZGRDb2xvclN0b3AoMCwgJ3JnYmEoNzQsIDIyMiwgMTI4LCAwKScpOyBncmFkMS5hZGRDb2xvclN0b3AoMC4zLCAncmdiYSg3NCwgMjIyLCAxMjgsIDAuNiknKTsgZ3JhZDEuYWRkQ29sb3JTdG9wKDEsICdyZ2JhKDc0LCAyMjIsIDEyOCwgMCknKTsgZHJhd0N1cnRhaW4oZ3JhZDEsIDAsIDEpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyYWQyID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIDAsIGhlaWdodCk7IGdyYWQyLmFkZENvbG9yU3RvcCgwLCAncmdiYSgxNjgsIDg1LCAyNDcsIDApJyk7IGdyYWQyLmFkZENvbG9yU3RvcCgwLjQsICdyZ2JhKDE2OCwgODUsIDI0NywgMC41KScpOyBncmFkMi5hZGRDb2xvclN0b3AoMSwgJ3JnYmEoMTY4LCA4NSwgMjQ3LCAwKScpOyBkcmF3Q3VydGFpbihncmFkMiwgMiwgMS41KTsKICAgICAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJzsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMjA2MTcnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCwgaGVpZ2h0KTsgY3R4LmxpbmVUbygwLCBoZWlnaHQtNjApOyBjdHgubGluZVRvKHdpZHRoKjAuMywgaGVpZ2h0LTE1MCk7IGN0eC5saW5lVG8od2lkdGgqMC42LCBoZWlnaHQtODApOyBjdHgubGluZVRvKHdpZHRoLCBoZWlnaHQtMTMwKTsgY3R4LmxpbmVUbyh3aWR0aCwgaGVpZ2h0KTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMubG9vcChzaW0pKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGlkZXM6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgeyBzaW0uc3RhdGUgPSB7IHRpbWU6IDAgfTsgdGhpcy5sb29wKHNpbSk7IH0sCiAgICAgICAgICAgICAgICBsb29wOiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGN0eCwgd2lkdGgsIGhlaWdodCwgc3RhdGUgfSA9IHNpbTsgc3RhdGUudGltZSArPSAwLjAwNTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYGhzbCgyMTAsIDUwJSwgJHs1MCs0MCpNYXRoLnNpbihzdGF0ZS50aW1lKX0pYDsgY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvZHlYID0gKHN0YXRlLnRpbWUqNTApJSh3aWR0aCsxMDApLTUwOyBjb25zdCBib2R5WSA9IGhlaWdodC8yLU1hdGguc2luKChib2R5WCs1MCkvKHdpZHRoKzEwMCkqTWF0aC5QSSkqKGhlaWdodC8yLTIwKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gTWF0aC5zaW4oc3RhdGUudGltZSk8MCA/ICcjZTJlOGYwJyA6ICcjZmNkMzRkJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKGJvZHlYLCBib2R5WSwgMjAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFuZEhlaWdodCA9IDgwOyBjdHguZmlsbFN0eWxlID0gJyNmNTllMGInOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCwgaGVpZ2h0LWxhbmRIZWlnaHQpOyBjdHguYmV6aWVyQ3VydmVUbyh3aWR0aCowLjMsIGhlaWdodC1sYW5kSGVpZ2h0LTIwLCB3aWR0aCowLjcsIGhlaWdodC1sYW5kSGVpZ2h0KzIwLCB3aWR0aCwgaGVpZ2h0LWxhbmRIZWlnaHQpOyBjdHgubGluZVRvKHdpZHRoLCBoZWlnaHQpOyBjdHgubGluZVRvKDAsIGhlaWdodCk7IGN0eC5jbG9zZVBhdGgoKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0aWRlTGV2ZWwgPSAoaGVpZ2h0LWxhbmRIZWlnaHQtMTApK01hdGguY29zKHN0YXRlLnRpbWUqMikqMzA7IGN0eC5maWxsU3R5bGUgPSAncmdiYSg1OSwgMTMwLCAyNDYsIDAuNyknOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCwgdGlkZUxldmVsKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIGN0eC5saW5lVG8oeCwgdGlkZUxldmVsK01hdGguc2luKHgqMC4wNStzdGF0ZS50aW1lKjUpKjMpOwogICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8od2lkdGgsIGhlaWdodCk7IGN0eC5saW5lVG8oMCwgaGVpZ2h0KTsgY3R4LmNsb3NlUGF0aCgpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKHNpbSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBibGFja0hvbGU6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5wYXJ0aWNsZXMgPSBbXTsgc2ltLnN0YXRlLnN0YXJzID0gW107CiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8MTAwOyBpKyspIHNpbS5zdGF0ZS5zdGFycy5wdXNoKHsgeDogTWF0aC5yYW5kb20oKSpzaW0ud2lkdGgsIHk6IE1hdGgucmFuZG9tKCkqc2ltLmhlaWdodCwgc2l6ZTogTWF0aC5yYW5kb20oKSoxLjUsIGFscGhhOiBNYXRoLnJhbmRvbSgpIH0pOwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9vcChzaW0pOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxvb3A6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgY3R4LCB3aWR0aCwgaGVpZ2h0LCBzdGF0ZSB9ID0gc2ltOyBjb25zdCBjeCA9IHdpZHRoLzIsIGN5ID0gaGVpZ2h0LzI7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsIDAsIDAsIDAuMiknOyBjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgc3RhdGUuc3RhcnMuZm9yRWFjaChzID0+IHsgY3R4Lmdsb2JhbEFscGhhID0gcy5hbHBoYTsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHMueCwgcy55LCBzLnNpemUsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7IH0pOwogICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7CiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlLnBhcnRpY2xlcy5sZW5ndGggPCAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5nbGUgPSBNYXRoLnJhbmRvbSgpKk1hdGguUEkqMjsgY29uc3QgZGlzdCA9IE1hdGgubWF4KHdpZHRoLCBoZWlnaHQpKjAuNjsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUucGFydGljbGVzLnB1c2goeyB4OiBjeCtNYXRoLmNvcyhhbmdsZSkqZGlzdCwgeTogY3krTWF0aC5zaW4oYW5nbGUpKmRpc3QsIHZ4OiAoTWF0aC5yYW5kb20oKS0wLjUpKjIsIHZ5OiAoTWF0aC5yYW5kb20oKS0wLjUpKjIsIGFuZ2xlOiBhbmdsZSwgZGlzdDogZGlzdCwgc3BlZWQ6IDErTWF0aC5yYW5kb20oKSB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHN0YXRlLnBhcnRpY2xlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcCA9IHN0YXRlLnBhcnRpY2xlc1tpXTsgcC5kaXN0IC09IHAuc3BlZWQ7IHAuYW5nbGUgKz0gMC4wMiArICgxMDAvKHAuZGlzdCsxKSkqMC4wMDE7IHAuc3BlZWQgKz0gMC4wNTsKICAgICAgICAgICAgICAgICAgICAgICAgcC54ID0gY3grTWF0aC5jb3MocC5hbmdsZSkqcC5kaXN0OyBwLnkgPSBjeStNYXRoLnNpbihwLmFuZ2xlKSpwLmRpc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yVmFsID0gTWF0aC5taW4oMjU1LCBNYXRoLmZsb29yKDI1NSooMjAwL3AuZGlzdCkpKTsgY3R4LmZpbGxTdHlsZSA9IGByZ2IoMjU1LCAkezI1NS1jb2xvclZhbH0sICR7MjU1LWNvbG9yVmFsfSlgOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaXplID0gTWF0aC5tYXgoMSwgMy0ocC5kaXN0LzIwMCkpOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMocC54LCBwLnksIHNpemUsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLmRpc3QgPCAyMCkgc3RhdGUucGFydGljbGVzLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JhZCA9IGN0eC5jcmVhdGVSYWRpYWxHcmFkaWVudChjeCwgY3ksIDIwLCBjeCwgY3ksIDYwKTsgZ3JhZC5hZGRDb2xvclN0b3AoMCwgJ3JnYmEoMjU1LCAxMDAsIDAsIDAuOCknKTsgZ3JhZC5hZGRDb2xvclN0b3AoMSwgJ3JnYmEoMjU1LCAwLCAwLCAwKScpOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBncmFkOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoY3gsIGN5LCA2MCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoY3gsIGN5LCAyMCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgyNTUsMjU1LDI1NSwwLjUpJzsgY3R4LmxpbmVXaWR0aCA9IDE7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMubG9vcChzaW0pKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWV0ZW9yU2hvd2VyOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUubWV0ZW9ycyA9IFtdOyBzaW0uc3RhdGUuc3RhcnMgPSBbXTsKICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTwxMDA7IGkrKykgc2ltLnN0YXRlLnN0YXJzLnB1c2goeyB4OiBNYXRoLnJhbmRvbSgpKnNpbS53aWR0aCwgeTogTWF0aC5yYW5kb20oKSpzaW0uaGVpZ2h0LCBzaXplOiBNYXRoLnJhbmRvbSgpKjIsIGFscGhhOiBNYXRoLnJhbmRvbSgpIH0pOwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9vcChzaW0pOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxvb3A6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgY3R4LCB3aWR0aCwgaGVpZ2h0LCBzdGF0ZSB9ID0gc2ltOyBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMTUsIDIzLCA0MiwgMC4zKSc7IGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnOyBzdGF0ZS5zdGFycy5mb3JFYWNoKHMgPT4geyBjdHguZ2xvYmFsQWxwaGEgPSBzLmFscGhhOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMocy54LCBzLnksIHMuc2l6ZSwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgfSk7CiAgICAgICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsKICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMSkgc3RhdGUubWV0ZW9ycy5wdXNoKHsgeDogTWF0aC5yYW5kb20oKSp3aWR0aCoxLjUsIHk6IC01MCwgdng6IC01LU1hdGgucmFuZG9tKCkqNSwgdnk6IDMrTWF0aC5yYW5kb20oKSo1LCBsZW46IDEwK01hdGgucmFuZG9tKCkqMjAsIGxpZmU6IDEuMCB9KTsKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2ZmZic7IGN0eC5saW5lQ2FwID0gJ3JvdW5kJzsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhdGUubWV0ZW9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgbSA9IHN0YXRlLm1ldGVvcnNbaV07IG0ueCArPSBtLnZ4OyBtLnkgKz0gbS52eTsgbS5saWZlIC09IDAuMDI7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAyKm0ubGlmZTsgY3R4Lmdsb2JhbEFscGhhID0gbS5saWZlOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8obS54LCBtLnkpOyBjdHgubGluZVRvKG0ueC1tLnZ4KjMsIG0ueS1tLnZ5KjMpOyBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtLmxpZmUgPD0gMCB8fCBtLnkgPiBoZWlnaHQgfHwgbS54IDwgMCkgc3RhdGUubWV0ZW9ycy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7IHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKHNpbSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBteWNlbGl1bTogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyBub2RlczogW10sIHB1bHNlczogW10gfTsKICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTw2OyBpKyspIHNpbS5zdGF0ZS5ub2Rlcy5wdXNoKHsgeDogNDAraSooc2ltLndpZHRoLzYpK01hdGgucmFuZG9tKCkqMzAsIHk6IDI4MCtNYXRoLnJhbmRvbSgpKjEwMCwgY29ubmVjdGlvbnM6IFtdIH0pOwogICAgICAgICAgICAgICAgICAgIHNpbS5zdGF0ZS5ub2Rlcy5mb3JFYWNoKChuLCBpKSA9PiB7IHNpbS5zdGF0ZS5ub2Rlcy5mb3JFYWNoKChuMiwgaikgPT4geyBpZiAoaSE9PWogJiYgTWF0aC5zcXJ0KChuLngtbjIueCkqKjIrKG4ueS1uMi55KSoqMik8MjAwICYmIE1hdGgucmFuZG9tKCk8MC41KSBuLmNvbm5lY3Rpb25zLnB1c2gobjIpOyB9KTsgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29wKHNpbSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbG9vcDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBjdHgsIHdpZHRoLCBoZWlnaHQsIHN0YXRlIH0gPSBzaW07IGN0eC5maWxsU3R5bGUgPSAnIzNmMmUyNic7IGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5ub2Rlcy5mb3JFYWNoKG4gPT4geyBjdHguc3Ryb2tlU3R5bGUgPSAnIzhiNmI1ZCc7IGN0eC5saW5lV2lkdGggPSA2OyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8obi54LCBuLnkpOyBjdHgucXVhZHJhdGljQ3VydmVUbyhuLngrKE1hdGgucmFuZG9tKCktMC41KSoxMCwgbi55LzIsIG4ueCwgMCk7IGN0eC5zdHJva2UoKTsgY3R4LmZpbGxTdHlsZSA9ICcjYTg4ZDdiJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKG4ueCwgbi55LCA2LCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyB9KTsKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpJzsgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUubm9kZXMuZm9yRWFjaChuID0+IHsgbi5jb25uZWN0aW9ucy5mb3JFYWNoKG4yID0+IHsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKG4ueCwgbi55KTsgY3R4LnF1YWRyYXRpY0N1cnZlVG8oKG4ueCtuMi54KS8yLCAobi55K24yLnkpLzIrMzAsIG4yLngsIG4yLnkpOyBjdHguc3Ryb2tlKCk7IH0pOyB9KTsKICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydCA9IHN0YXRlLm5vZGVzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpzdGF0ZS5ub2Rlcy5sZW5ndGgpXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0LmNvbm5lY3Rpb25zLmxlbmd0aCA+IDApIHN0YXRlLnB1bHNlcy5wdXNoKHsgc3RhcnQ6IHN0YXJ0LCBlbmQ6IHN0YXJ0LmNvbm5lY3Rpb25zW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpzdGFydC5jb25uZWN0aW9ucy5sZW5ndGgpXSwgcHJvZ3Jlc3M6IDAsIHNwZWVkOiAwLjAyK01hdGgucmFuZG9tKCkqMC4wMiB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjODZlZmFjJzsgY3R4LnNoYWRvd0NvbG9yID0gJyM4NmVmYWMnOyBjdHguc2hhZG93Qmx1ciA9IDU7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHN0YXRlLnB1bHNlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgcCA9IHN0YXRlLnB1bHNlc1tpXTsgcC5wcm9ncmVzcyArPSBwLnNwZWVkOyBjb25zdCB0ID0gcC5wcm9ncmVzcywgaW52VCA9IDEtdCwgY3ggPSAocC5zdGFydC54K3AuZW5kLngpLzIsIGN5ID0gKHAuc3RhcnQueStwLmVuZC55KS8yKzMwOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB4ID0gaW52VCppbnZUKnAuc3RhcnQueCArIDIqaW52VCp0KmN4ICsgdCp0KnAuZW5kLng7IGNvbnN0IHkgPSBpbnZUKmludlQqcC5zdGFydC55ICsgMippbnZUKnQqY3kgKyB0KnQqcC5lbmQueTsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHgsIHksIDIsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwLnByb2dyZXNzID49IDEpIHN0YXRlLnB1bHNlcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGN0eC5zaGFkb3dCbHVyID0gMDsgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmxvb3Aoc2ltKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBvbGxpbmF0aW9uOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBzaW0uc3RhdGUgPSB7IGJlZToge3g6IDUwLCB5OiAxMDAsIHRhcmdldDogMH0sIGZsb3dlcnM6IFtdIH07CiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7IGk8MzsgaSsrKSBzaW0uc3RhdGUuZmxvd2Vycy5wdXNoKHt4OiAyMDAraSoxNTAsIHk6IDMwMH0pOwogICAgICAgICAgICAgICAgICAgIHRoaXMubG9vcChzaW0pOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGxvb3A6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHtjdHgsIHdpZHRoLCBoZWlnaHQsIHN0YXRlfSA9IHNpbTsgY3R4LmZpbGxTdHlsZSA9ICcjODdDRUVCJzsgY3R4LmZpbGxSZWN0KDAsMCx3aWR0aCxoZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLmZsb3dlcnMuZm9yRWFjaChmID0+IHsgY3R4LmZpbGxTdHlsZSA9ICcjMjI4QjIyJzsgY3R4LmZpbGxSZWN0KGYueC0yLCBmLnksIDQsIDUwKTsgY3R4LmZpbGxTdHlsZSA9ICcjRkY2OUI0JzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKGYueCwgZi55LCAxNSwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgY3R4LmZpbGxTdHlsZSA9ICcjRkZENzAwJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKGYueCwgZi55LCA1LCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyB9KTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBzdGF0ZS5mbG93ZXJzW3N0YXRlLmJlZS50YXJnZXRdOyBjb25zdCBkeCA9IHRhcmdldC54LXN0YXRlLmJlZS54LCBkeSA9ICh0YXJnZXQueS0yMCktc3RhdGUuYmVlLnksIGRpc3QgPSBNYXRoLnNxcnQoZHgqZHgrZHkqZHkpOwogICAgICAgICAgICAgICAgICAgIGlmKGRpc3QgPCA1KSBzdGF0ZS5iZWUudGFyZ2V0ID0gKHN0YXRlLmJlZS50YXJnZXQrMSklc3RhdGUuZmxvd2Vycy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7IHN0YXRlLmJlZS54ICs9IChkeC9kaXN0KSoyOyBzdGF0ZS5iZWUueSArPSAoZHkvZGlzdCkqMjsgfQogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnI0ZGRDcwMCc7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhzdGF0ZS5iZWUueCwgc3RhdGUuYmVlLnksIDgsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7IGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7IGN0eC5maWxsUmVjdChzdGF0ZS5iZWUueC0yLCBzdGF0ZS5iZWUueS04LCA0LCAxNik7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwyNTUsMjU1LDAuNyknOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5lbGxpcHNlKHN0YXRlLmJlZS54LTUsIHN0YXRlLmJlZS55LTUsIDgsIDQsIE1hdGguc2luKERhdGUubm93KCkvNTApLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsgY3R4LmVsbGlwc2Uoc3RhdGUuYmVlLngrNSwgc3RhdGUuYmVlLnktNSwgOCwgNCwgLU1hdGguc2luKERhdGUubm93KCkvNTApLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKHNpbSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBtZXRhbW9ycGhvc2lzOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsgc2ltLnN0YXRlID0geyBzdGFnZTogMCwgdGltZXI6IDAsIHg6IDUwIH07IHRoaXMubG9vcChzaW0pOyB9LAogICAgICAgICAgICAgICAgbG9vcDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qge2N0eCwgd2lkdGgsIGhlaWdodCwgc3RhdGV9ID0gc2ltOyBjdHguZmlsbFN0eWxlID0gJyM3MjhGQ0UnOyBjdHguZmlsbFJlY3QoMCwwLHdpZHRoLGhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGUubm93KCkvNTAwOyBmb3IobGV0IGk9MDsgaTx3aWR0aDsgaSs9MTUpIHsgY3R4LmZpbGxTdHlsZSA9ICcjMjJjNTVlJzsgY29uc3QgaCA9IDQwK01hdGguc2luKGkqMC4xK3RpbWUpKjEwOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oaSwgaGVpZ2h0KTsgY3R4LnF1YWRyYXRpY0N1cnZlVG8oaSs1LCBoZWlnaHQtaC8yLCBpK01hdGguc2luKHRpbWUqMitpKSo1LCBoZWlnaHQtaCk7IGN0eC5saW5lVG8oaSsxMCwgaGVpZ2h0KTsgY3R4LmZpbGwoKTsgfQogICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjOEI0NTEzJzsgY3R4LmxpbmVXaWR0aCA9IDEwOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCwgMjAwKTsgY3R4LmxpbmVUbyh3aWR0aCwgMjAwKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLnRpbWVyKys7IGlmKHN0YXRlLnRpbWVyID4gMjAwKSB7IHN0YXRlLnN0YWdlID0gKHN0YXRlLnN0YWdlKzEpJTQ7IHN0YXRlLnRpbWVyID0gMDsgc3RhdGUueCA9IDUwOyB9CiAgICAgICAgICAgICAgICAgICAgaWYoc3RhdGUuc3RhZ2UgPT09IDApIHsgY3R4LmZpbGxTdHlsZSA9ICcjZmZmJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHdpZHRoLzIsIDE5NSwgNSwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgY3R4LmZpbGxUZXh0KCJFZ2ciLCB3aWR0aC8yLTEwLCAxODApOyB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihzdGF0ZS5zdGFnZSA9PT0gMSkgeyBzdGF0ZS54ICs9IDAuNTsgY3R4LmZpbGxTdHlsZSA9ICcjN0NGQzAwJzsgZm9yKGxldCBpPTA7IGk8NTsgaSsrKSB7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhzdGF0ZS54K2kqMTAsIDE5MCtNYXRoLnNpbihzdGF0ZS50aW1lciowLjIraSkqMiwgNiwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgfSBjdHguZmlsbFN0eWxlID0gJyMwMDAnOyBjdHguZmlsbFRleHQoIkxhcnZhIiwgc3RhdGUueCwgMTcwKTsgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoc3RhdGUuc3RhZ2UgPT09IDIpIHsgY3R4LmZpbGxTdHlsZSA9ICcjOEZCQzhGJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguZWxsaXBzZSh3aWR0aC8yLCAyMTAsIDEwLCAyMCwgMCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgY3R4LmZpbGxUZXh0KCJQdXBhIiwgd2lkdGgvMi0xNSwgMjQwKTsgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgeyBzdGF0ZS54ICs9IDI7IGNvbnN0IHkgPSAxNTArTWF0aC5zaW4oc3RhdGUudGltZXIqMC4xKSozMDsgY3R4LmZpbGxTdHlsZSA9ICcjRkZBNTAwJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKHN0YXRlLngsIHkpOyBjdHgubGluZVRvKHN0YXRlLngtMTUsIHktMTUpOyBjdHgubGluZVRvKHN0YXRlLngtMTUsIHkrMTUpOyBjdHguZmlsbCgpOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oc3RhdGUueCwgeSk7IGN0eC5saW5lVG8oc3RhdGUueCsxNSwgeS0xNSk7IGN0eC5saW5lVG8oc3RhdGUueCsxNSwgeSsxNSk7IGN0eC5maWxsKCk7IGN0eC5maWxsU3R5bGUgPSAnIzAwMCc7IGN0eC5maWxsUmVjdChzdGF0ZS54LTIsIHktMTAsIDQsIDIwKTsgY3R4LmZpbGxUZXh0KCJCdXR0ZXJmbHkiLCBzdGF0ZS54LTIwLCB5LTMwKTsgfQogICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKHNpbSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBzZWVkRGlzcGVyc2FsOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsgc2ltLnN0YXRlID0geyBzZWVkczogW10gfTsgdGhpcy5sb29wKHNpbSk7IH0sCiAgICAgICAgICAgICAgICBsb29wOiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB7Y3R4LCB3aWR0aCwgaGVpZ2h0LCBzdGF0ZX0gPSBzaW07IGN0eC5maWxsU3R5bGUgPSAnIzg3Q0VFQic7IGN0eC5maWxsUmVjdCgwLDAsd2lkdGgsaGVpZ2h0KTsgY3R4LmZpbGxTdHlsZSA9ICcjMjI4QjIyJzsgY3R4LmZpbGxSZWN0KDAsIGhlaWdodC0yMCwgd2lkdGgsIDIwKTsKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnIzIyOEIyMic7IGN0eC5saW5lV2lkdGggPSAzOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMTAwLCBoZWlnaHQtMjApOyBjdHgubGluZVRvKDEwMCwgaGVpZ2h0LTE1MCk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoMTAwLCBoZWlnaHQtMTUwLCAxMCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgICAgICBpZihNYXRoLnJhbmRvbSgpIDwgMC4wNSkgc3RhdGUuc2VlZHMucHVzaCh7eDogMTAwLCB5OiBoZWlnaHQtMTUwLCB2eDogMStNYXRoLnJhbmRvbSgpLCB2eTogLTAuNStNYXRoLnJhbmRvbSgpfSk7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUuc2VlZHMuZm9yRWFjaCgocywgaSkgPT4geyBzLnggKz0gcy52eDsgcy55ICs9IHMudnk7IGN0eC5zdHJva2VTdHlsZSA9ICcjZmZmJzsgY3R4LmxpbmVXaWR0aCA9IDE7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhzLngsIHMueSk7IGN0eC5saW5lVG8ocy54LTUsIHMueS01KTsgY3R4LnN0cm9rZSgpOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8ocy54LCBzLnkpOyBjdHgubGluZVRvKHMueC01LCBzLnkrNSk7IGN0eC5zdHJva2UoKTsgaWYocy54ID4gd2lkdGgpIHN0YXRlLnNlZWRzLnNwbGljZShpLCAxKTsgfSk7CiAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmxvb3Aoc2ltKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvcmFsUmVlZjogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgc2ltLnN0YXRlID0geyBmaXNoOiBbXSwgYnViYmxlczogW10sIGNvcmFsczogW10sIHRpbWU6IDAgfTsKICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTwxNTsgaSsrKSBzaW0uc3RhdGUuZmlzaC5wdXNoKHsgeDogTWF0aC5yYW5kb20oKSpzaW0ud2lkdGgsIHk6IE1hdGgucmFuZG9tKCkqKHNpbS5oZWlnaHQtMTAwKSwgdng6IChNYXRoLnJhbmRvbSgpLTAuNSkqMywgY29sb3I6IGBoc2woJHtNYXRoLnJhbmRvbSgpKjM2MH0sIDgwJSwgNjAlKWAsIHNpemU6IDUrTWF0aC5yYW5kb20oKSo4IH0pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bUNvcmFscyA9IE1hdGguZmxvb3Ioc2ltLndpZHRoLzE1KTsKICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTxudW1Db3JhbHM7IGkrKykgc2ltLnN0YXRlLmNvcmFscy5wdXNoKHsgeDogaSoxNStNYXRoLnJhbmRvbSgpKjUsIGg6IDQwK01hdGgucmFuZG9tKCkqNjAsIGNvbG9yOiBgaHNsKCR7TWF0aC5yYW5kb20oKSo2MCszMDB9LCA3MCUsICR7NDArTWF0aC5yYW5kb20oKSoyMH0lKWAsIHR5cGU6IE1hdGgucmFuZG9tKCk+MC41Pydyb3VuZCc6J2JyYW5jaCcgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb29wKHNpbSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgbG9vcDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qge2N0eCwgd2lkdGgsIGhlaWdodCwgc3RhdGV9ID0gc2ltOyBzdGF0ZS50aW1lICs9IDAuMDI7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JhZCA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCAwLCAwLCBoZWlnaHQpOyBncmFkLmFkZENvbG9yU3RvcCgwLCAnIzAwYjRkYicpOyBncmFkLmFkZENvbG9yU3RvcCgxLCAnIzAwODNiMCcpOyBjdHguZmlsbFN0eWxlID0gZ3JhZDsgY3R4LmZpbGxSZWN0KDAsMCx3aWR0aCxoZWlnaHQpOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLmNvcmFscy5mb3JFYWNoKChjLCBpKSA9PiB7IGN0eC5maWxsU3R5bGUgPSBjLmNvbG9yOyBjb25zdCBzd2F5ID0gTWF0aC5zaW4oc3RhdGUudGltZStpKjAuNSkqNTsgaWYgKGMudHlwZSA9PT0gJ3JvdW5kJykgeyBjdHguYmVnaW5QYXRoKCk7IGN0eC5lbGxpcHNlKGMueCwgaGVpZ2h0LCAxMCwgYy5oLzIsIDAsIE1hdGguUEksIDApOyBjdHguZmlsbCgpOyB9IGVsc2UgeyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oYy54LCBoZWlnaHQpOyBjdHgucXVhZHJhdGljQ3VydmVUbyhjLngrc3dheSwgaGVpZ2h0LWMuaC8yLCBjLngrc3dheSoxLjUsIGhlaWdodC1jLmgpOyBjdHgubGluZVdpZHRoID0gNDsgY3R4LnN0cm9rZVN0eWxlID0gYy5jb2xvcjsgY3R4LnN0cm9rZSgpOyB9IH0pOwogICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4wNSkgc3RhdGUuYnViYmxlcy5wdXNoKHsgeDogTWF0aC5yYW5kb20oKSp3aWR0aCwgeTogaGVpZ2h0LCByOiBNYXRoLnJhbmRvbSgpKjMrMSwgdjogTWF0aC5yYW5kb20oKSoxKzAuNSB9KTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gc3RhdGUuYnViYmxlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgeyBsZXQgYiA9IHN0YXRlLmJ1YmJsZXNbaV07IGIueSAtPSBiLnY7IGIueCArPSBNYXRoLnNpbihiLnkqMC4wNSkqMC41OyBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKSc7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhiLngsIGIueSwgYi5yLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyBpZiAoYi55IDwgMCkgc3RhdGUuYnViYmxlcy5zcGxpY2UoaSwgMSk7IH0KICAgICAgICAgICAgICAgICAgICBzdGF0ZS5maXNoLmZvckVhY2goZiA9PiB7IGYueCArPSBmLnZ4OyBpZihmLnggPCAtMjApIGYueCA9IHdpZHRoKzIwOyBpZihmLnggPiB3aWR0aCsyMCkgZi54ID0gLTIwOyBjdHguc2F2ZSgpOyBjdHgudHJhbnNsYXRlKGYueCwgZi55KTsgaWYgKGYudnggPCAwKSBjdHguc2NhbGUoLTEsIDEpOyBjdHguZmlsbFN0eWxlID0gZi5jb2xvcjsgY3R4LmJlZ2luUGF0aCgpOyBjdHguZWxsaXBzZSgwLCAwLCBmLnNpemUsIGYuc2l6ZS8xLjUsIDAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygtZi5zaXplLzIsIDApOyBjdHgubGluZVRvKC1mLnNpemUtNSwgLTUpOyBjdHgubGluZVRvKC1mLnNpemUtNSwgNSk7IGN0eC5maWxsKCk7IGN0eC5maWxsU3R5bGUgPSAnd2hpdGUnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoZi5zaXplLzIsIC0yLCAyLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyBjdHguZmlsbFN0eWxlID0gJ2JsYWNrJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKGYuc2l6ZS8yKzEsIC0yLCAxLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyBjdHgucmVzdG9yZSgpOyB9KTsKICAgICAgICAgICAgICAgICAgICBjdHguc2F2ZSgpOyBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ292ZXJsYXknOyBjb25zdCByYXlHcmFkID0gY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIDAsIGhlaWdodCk7IHJheUdyYWQuYWRkQ29sb3JTdG9wKDAsICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSknKTsgcmF5R3JhZC5hZGRDb2xvclN0b3AoMSwgJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMCknKTsgY3R4LmZpbGxTdHlsZSA9IHJheUdyYWQ7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygwLCAwKTsgY3R4LmxpbmVUbyh3aWR0aCwgMCk7IGN0eC5saW5lVG8od2lkdGgqMC44LCBoZWlnaHQpOyBjdHgubGluZVRvKHdpZHRoKjAuMiwgaGVpZ2h0KTsgY3R4LmZpbGwoKTsgY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMubG9vcChzaW0pKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmlyZWZsaWVzOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsgc2ltLnN0YXRlID0geyBmbGllczogW10gfTsgZm9yKGxldCBpPTA7IGk8MzA7IGkrKykgc2ltLnN0YXRlLmZsaWVzLnB1c2goeyB4OiBNYXRoLnJhbmRvbSgpKnNpbS53aWR0aCwgeTogTWF0aC5yYW5kb20oKSpzaW0uaGVpZ2h0LCB0OiBNYXRoLnJhbmRvbSgpKjEwMCB9KTsgdGhpcy5sb29wKHNpbSk7IH0sCiAgICAgICAgICAgICAgICBsb29wOiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB7Y3R4LCB3aWR0aCwgaGVpZ2h0LCBzdGF0ZX0gPSBzaW07IGN0eC5maWxsU3R5bGUgPSAnIzAyMDYxNyc7IGN0eC5maWxsUmVjdCgwLDAsd2lkdGgsaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBzdGF0ZS5mbGllcy5mb3JFYWNoKGYgPT4geyBmLnggKz0gKE1hdGgucmFuZG9tKCktMC41KTsgZi55ICs9IChNYXRoLnJhbmRvbSgpLTAuNSk7IGYudCArPSAwLjE7IGNvbnN0IGFscGhhID0gKE1hdGguc2luKGYudCkrMSkvMjsgY3R4LmZpbGxTdHlsZSA9IGByZ2JhKDI1NSwgMjU1LCAwLCAke2FscGhhfSlgOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5hcmMoZi54LCBmLnksIDMsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7IGN0eC5zaGFkb3dCbHVyID0gMTA7IGN0eC5zaGFkb3dDb2xvciA9ICd5ZWxsb3cnOyBjdHguZmlsbCgpOyBjdHguc2hhZG93Qmx1ciA9IDA7IH0pOwogICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKHNpbSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBmb3NzaWw6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgeyBzaW0uc3RhdGUgPSB7IHNlZGltZW50SDogMCB9OyB0aGlzLmxvb3Aoc2ltKTsgfSwKICAgICAgICAgICAgICAgIGxvb3A6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHtjdHgsIHdpZHRoLCBoZWlnaHQsIHN0YXRlfSA9IHNpbTsgY3R4LmZpbGxTdHlsZSA9ICcjODdDRUVCJzsgY3R4LmZpbGxSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpOyBjdHguZmlsbFN0eWxlID0gJyM1RDQwMzcnOyBjdHguZmlsbFJlY3QoMCwgaGVpZ2h0LTQwLCB3aWR0aCwgNDApOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvc3NpbEZhY3RvciA9IE1hdGgubWluKDEsIE1hdGgubWF4KDAsIChzdGF0ZS5zZWRpbWVudEgtMzApLzEwMCkpOyBjb25zdCBib25lQ29sb3IgPSBgcmdiKCR7MjU1LSgyNTUtNzgpKmZvc3NpbEZhY3Rvcn0sJHsyNTUtKDI1NS01MikqZm9zc2lsRmFjdG9yfSwkezI1NS0oMjU1LTQ2KSpmb3NzaWxGYWN0b3J9KWA7CiAgICAgICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsgY3R4LnRyYW5zbGF0ZSh3aWR0aC8yLCBoZWlnaHQtNDUpOyBjdHguc3Ryb2tlU3R5bGUgPSBib25lQ29sb3I7IGN0eC5saW5lV2lkdGggPSA0OyBjdHgubGluZUNhcCA9ICdyb3VuZCc7IGN0eC5maWxsU3R5bGUgPSBib25lQ29sb3I7CiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKC00MCwgMCk7IGN0eC5xdWFkcmF0aWNDdXJ2ZVRvKDAsIC0xMCwgNTAsIDUpOyBjdHguc3Ryb2tlKCk7IGZvcihsZXQgaT0tMjA7IGk8MjA7IGkrPTgpIHsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKGksIC01KTsgY3R4LmxpbmVUbyhpLCA1KTsgY3R4LnN0cm9rZSgpOyB9IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygtNDAsIDApOyBjdHgubGluZVRvKC01NSwgLTUpOyBjdHgubGluZVRvKC02MCwgNSk7IGN0eC5saW5lVG8oLTQ1LCA1KTsgY3R4LmNsb3NlUGF0aCgpOyBjdHguZmlsbCgpOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oLTIwLCAwKTsgY3R4LmxpbmVUbygtMjUsIDIwKTsgY3R4LnN0cm9rZSgpOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMjAsIDApOyBjdHgubGluZVRvKDI1LCAyMCk7IGN0eC5zdHJva2UoKTsgY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUuc2VkaW1lbnRIIDwgaGVpZ2h0LTQwKSBzdGF0ZS5zZWRpbWVudEggKz0gMC41OwogICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50WSA9IGhlaWdodC00MCwgcmVtYWluaW5nID0gc3RhdGUuc2VkaW1lbnRIOyBjb25zdCBsYXllcnMgPSBbe2g6IDQwLCBjOiAncmdiYSgxMjEsIDg1LCA3MiwgMC43KSd9LCB7aDogNDAsIGM6ICdyZ2JhKDE0MSwgMTEwLCA5OSwgMC43KSd9LCB7aDogNjAsIGM6ICdyZ2JhKDE2MSwgMTM2LCAxMjcsIDAuOCknfSwge2g6IDIwMCwgYzogJ3JnYmEoNjIsIDM5LCAzNSwgMC45KSd9XTsKICAgICAgICAgICAgICAgICAgICBsYXllcnMuZm9yRWFjaChsID0+IHsgaWYgKHJlbWFpbmluZyA+IDApIHsgY29uc3QgaCA9IE1hdGgubWluKHJlbWFpbmluZywgbC5oKTsgY3R4LmZpbGxTdHlsZSA9IGwuYzsgY3R4LmZpbGxSZWN0KDAsIGN1cnJlbnRZLWgsIHdpZHRoLCBoKTsgY3VycmVudFkgLT0gaDsgcmVtYWluaW5nIC09IGg7IH0gfSk7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgY3R4LmZvbnQgPSAnMTRweCBzYW5zLXNlcmlmJzsgY3R4LmZpbGxUZXh0KGZvc3NpbEZhY3RvcjwwLjI/IkJ1cmlhbC4uLiI6Zm9zc2lsRmFjdG9yPDAuOD8iUHJlc3N1cmUgJiBUaW1lLi4uIjoiRm9zc2lsaXplZCEiLCAxMCwgMzApOwogICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKHNpbSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBjYXZlczogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7IHNpbS5zdGF0ZSA9IHsgaDogMCwgZHJvcFk6IDAgfTsgdGhpcy5sb29wKHNpbSk7IH0sCiAgICAgICAgICAgICAgICBsb29wOiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB7Y3R4LCB3aWR0aCwgaGVpZ2h0LCBzdGF0ZX0gPSBzaW07IGN0eC5maWxsU3R5bGUgPSAnIzJjMmMyYyc7IGN0eC5maWxsUmVjdCgwLDAsd2lkdGgsaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBpZihzdGF0ZS5oIDwgMTAwKSBzdGF0ZS5oICs9IDAuMTsKICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNkM2QzZDMnOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8od2lkdGgvMi0yMCwgMCk7IGN0eC5saW5lVG8od2lkdGgvMisyMCwgMCk7IGN0eC5saW5lVG8od2lkdGgvMiwgc3RhdGUuaCk7IGN0eC5maWxsKCk7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyh3aWR0aC8yLTIwLCBoZWlnaHQpOyBjdHgubGluZVRvKHdpZHRoLzIrMjAsIGhlaWdodCk7IGN0eC5saW5lVG8od2lkdGgvMiwgaGVpZ2h0LXN0YXRlLmgpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRyb3BZICs9IDU7IGlmKHN0YXRlLmRyb3BZID4gaGVpZ2h0KSBzdGF0ZS5kcm9wWSA9IHN0YXRlLmg7CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDBmJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHdpZHRoLzIsIHN0YXRlLmRyb3BZLCAzLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKHNpbSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICByb2NrQ3ljbGU6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgeyBzaW0uc3RhdGUgPSB7IGFuZ2xlOiAwIH07IHRoaXMubG9vcChzaW0pOyB9LAogICAgICAgICAgICAgICAgbG9vcDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qge2N0eCwgd2lkdGgsIGhlaWdodCwgc3RhdGV9ID0gc2ltOyBjdHguZmlsbFN0eWxlID0gJyNGQUI5NzInOyBjdHguZmlsbFJlY3QoMCwwLHdpZHRoLGhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgc3RhdGUuYW5nbGUgKz0gMC4wMTsgY29uc3QgY3ggPSB3aWR0aC8yLCBjeSA9IGhlaWdodC8yLCByID0gMTAwLCB0eXBlcyA9IFsnTWFnbWEnLCAnSWduZW91cycsICdTZWRpbWVudCcsICdTZWRpbWVudGFyeScsICdNZXRhbW9ycGhpYyddLCBjb2xvcnMgPSBbJyNmMDAnLCAnIzU1NScsICcjZWVjJywgJyNkMmI0OGMnLCAnIzcwODA5MCddOwogICAgICAgICAgICAgICAgICAgIHR5cGVzLmZvckVhY2goKHQsIGkpID0+IHsgY29uc3QgYSA9IHN0YXRlLmFuZ2xlKyhpKk1hdGguUEkqMi90eXBlcy5sZW5ndGgpLCB4ID0gY3grTWF0aC5jb3MoYSkqciwgeSA9IGN5K01hdGguc2luKGEpKnI7IGN0eC5maWxsU3R5bGUgPSBjb2xvcnNbaV07IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyh4LCB5LCAzMCwgMCwgTWF0aC5QSSoyKTsgY3R4LmZpbGwoKTsgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInOyBjdHguZmlsbFRleHQodCwgeCwgeSs0MCk7IH0pOwogICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjMDAwJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKGN4LCBjeSwgciwgMCwgTWF0aC5QSSoyKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKHNpbSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBnZXlzZXI6IHsKICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKHNpbSkgeyBzaW0uc3RhdGUgPSB7IHByZXNzdXJlOiAwLCBlcnVwdGluZzogZmFsc2UsIHBhcnRpY2xlczogW10gfTsgdGhpcy5sb29wKHNpbSk7IH0sCiAgICAgICAgICAgICAgICBsb29wOiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB7Y3R4LCB3aWR0aCwgaGVpZ2h0LCBzdGF0ZX0gPSBzaW07IGN0eC5maWxsU3R5bGUgPSAnIzg3Q0VFQic7IGN0eC5maWxsUmVjdCgwLDAsd2lkdGgsaGVpZ2h0KTsgY3R4LmZpbGxTdHlsZSA9ICcjOEI0NTEzJzsgY3R4LmZpbGxSZWN0KDAsIGhlaWdodC01MCwgd2lkdGgsIDUwKTsKICAgICAgICAgICAgICAgICAgICBpZighc3RhdGUuZXJ1cHRpbmcpIHsgc3RhdGUucHJlc3N1cmUgKz0gMTsgaWYoc3RhdGUucHJlc3N1cmUgPiAyMDApIHN0YXRlLmVydXB0aW5nID0gdHJ1ZTsgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgeyBzdGF0ZS5wcmVzc3VyZSAtPSAyOyBpZihzdGF0ZS5wcmVzc3VyZSA8IDApIHN0YXRlLmVydXB0aW5nID0gZmFsc2U7IGZvcihsZXQgaT0wOyBpPDU7IGkrKykgc3RhdGUucGFydGljbGVzLnB1c2goeyB4OiB3aWR0aC8yLCB5OiBoZWlnaHQtNTAsIHZ5OiAtNS1NYXRoLnJhbmRvbSgpKjUsIHZ4OiAoTWF0aC5yYW5kb20oKS0wLjUpKjIgfSk7IH0KICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9c3RhdGUucGFydGljbGVzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHsgbGV0IHAgPSBzdGF0ZS5wYXJ0aWNsZXNbaV07IHAueCArPSBwLnZ4OyBwLnkgKz0gcC52eTsgcC52eSArPSAwLjE7IGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsMjU1LDI1NSwwLjcpJzsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHAueCwgcC55LCAzLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyBpZihwLnkgPiBoZWlnaHQpIHN0YXRlLnBhcnRpY2xlcy5zcGxpY2UoaSwgMSk7IH0KICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMubG9vcChzaW0pKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmFpbmJvdzogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7IHNpbS5zdGF0ZSA9IHsgdDogMCB9OyB0aGlzLmxvb3Aoc2ltKTsgfSwKICAgICAgICAgICAgICAgIGxvb3A6IGZ1bmN0aW9uKHNpbSkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHtjdHgsIHdpZHRoLCBoZWlnaHQsIHN0YXRlfSA9IHNpbTsgc3RhdGUudCArPSAwLjAxOyBjdHguZmlsbFN0eWxlID0gJyMxMTE4MjcnOyBjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3ggPSB3aWR0aC8yLjUsIGN5ID0gaGVpZ2h0LzIsIHNpemUgPSAxMjAsIGhUcmkgPSBzaXplKk1hdGguc3FydCgzKS8yLCBwMSA9IHt4OiBjeCwgeTogY3ktaFRyaS8yLTIwfSwgcDIgPSB7eDogY3gtc2l6ZS8yLCB5OiBjeStoVHJpLzItMjB9LCBwMyA9IHt4OiBjeCtzaXplLzIsIHk6IGN5K2hUcmkvMi0yMH07CiAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMDUpJzsgY3R4LnN0cm9rZVN0eWxlID0gJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKSc7IGN0eC5saW5lV2lkdGggPSAyOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8ocDEueCwgcDEueSk7IGN0eC5saW5lVG8ocDIueCwgcDIueSk7IGN0eC5saW5lVG8ocDMueCwgcDMueSk7IGN0eC5jbG9zZVBhdGgoKTsgY3R4LmZpbGwoKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVudHJ5VCA9IDAuNitNYXRoLnNpbihzdGF0ZS50KSowLjEsIGVudHJ5WCA9IHAxLngrKHAyLngtcDEueCkqZW50cnlULCBlbnRyeVkgPSBwMS55KyhwMi55LXAxLnkpKmVudHJ5VDsKICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnI2ZmZmZmZic7IGN0eC5saW5lV2lkdGggPSA0OyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCwgZW50cnlZKzUwKTsgY3R4LmxpbmVUbyhlbnRyeVgsIGVudHJ5WSk7IGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xvcnMgPSBbJyNmZjAwMDAnLCAnI2ZmN2YwMCcsICcjZmZmZjAwJywgJyMwMGZmMDAnLCAnIzAwMDBmZicsICcjNGIwMDgyJywgJyM5NDAwZDMnXTsKICAgICAgICAgICAgICAgICAgICBjb2xvcnMuZm9yRWFjaCgoY29sLCBpKSA9PiB7IGN0eC5zdHJva2VTdHlsZSA9IGNvbDsgY3R4LmxpbmVXaWR0aCA9IDU7IGN0eC5nbG9iYWxBbHBoYSA9IDAuODsgY29uc3QgZXhpdFQgPSBlbnRyeVQrMC4xKyhpKjAuMDE1KSwgZXhpdFggPSBwMS54KyhwMy54LXAxLngpKmV4aXRULCBleGl0WSA9IHAxLnkrKHAzLnktcDEueSkqZXhpdFQ7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyhlbnRyeVgsIGVudHJ5WSk7IGN0eC5saW5lVG8oZXhpdFgsIGV4aXRZKTsgY3R4LnN0cm9rZSgpOyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oZXhpdFgsIGV4aXRZKTsgY3R4LmxpbmVUbyh3aWR0aCwgZXhpdFkrKGV4aXRZLWVudHJ5WSkqMisoaSozMCkpOyBjdHguc3Ryb2tlKCk7IH0pOwogICAgICAgICAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDE7IGN0eC5maWxsU3R5bGUgPSAnI2ZmZic7IGN0eC5mb250ID0gJzE0cHggc2Fucy1zZXJpZic7IGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJzsgY3R4LmZpbGxUZXh0KCJQcmlzbSBSZWZyYWN0aW9uIiwgY3gsIGN5KzEwMCk7CiAgICAgICAgICAgICAgICAgICAgc2ltLmFuaW1JZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmxvb3Aoc2ltKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNub3dmbGFrZTogewogICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oc2ltKSB7IHNpbS5zdGF0ZSA9IHsgbGVuOiAwIH07IHRoaXMubG9vcChzaW0pOyB9LAogICAgICAgICAgICAgICAgbG9vcDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qge2N0eCwgd2lkdGgsIGhlaWdodCwgc3RhdGV9ID0gc2ltOyBjdHguZmlsbFN0eWxlID0gJyMxZTNhOGEnOyBjdHguZmlsbFJlY3QoMCwwLHdpZHRoLGhlaWdodCk7IGlmKHN0YXRlLmxlbiA8IDEwMCkgc3RhdGUubGVuICs9IDAuNTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkcmF3Rmxha2UgPSAoeCwgeSwgc2NhbGUpID0+IHsgY3R4LnNhdmUoKTsgY3R4LnRyYW5zbGF0ZSh4LCB5KTsgY3R4LnNjYWxlKHNjYWxlLCBzY2FsZSk7IGN0eC5zdHJva2VTdHlsZSA9ICcjZmZmJzsgY3R4LmxpbmVXaWR0aCA9IDI7IGZvcihsZXQgaT0wOyBpPDY7IGkrKykgeyBjdHgucm90YXRlKE1hdGguUEkvMyk7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygwLDApOyBjdHgubGluZVRvKDAsIHN0YXRlLmxlbik7IGN0eC5zdHJva2UoKTsgaWYoc3RhdGUubGVuID4gMjApIHsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDAsIDIwKTsgY3R4LmxpbmVUbygxMCwgMzApOyBjdHguc3Ryb2tlKCk7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbygwLCAyMCk7IGN0eC5saW5lVG8oLTEwLCAzMCk7IGN0eC5zdHJva2UoKTsgfSBpZihzdGF0ZS5sZW4gPiA1MCkgeyBjdHguYmVnaW5QYXRoKCk7IGN0eC5tb3ZlVG8oMCwgNTApOyBjdHgubGluZVRvKDIwLCA3MCk7IGN0eC5zdHJva2UoKTsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKDAsIDUwKTsgY3R4LmxpbmVUbygtMjAsIDcwKTsgY3R4LnN0cm9rZSgpOyB9IH0gY3R4LnJlc3RvcmUoKTsgfTsKICAgICAgICAgICAgICAgICAgICBkcmF3Rmxha2Uod2lkdGgvMi04MCwgaGVpZ2h0LzItODAsIDEpOyBkcmF3Rmxha2Uod2lkdGgvMisxMjAsIGhlaWdodC8yKzgwLCAwLjcpOwogICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKHNpbSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBzb2xhckZsYXJlOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsgc2ltLnN0YXRlID0geyB0OiAwLCBmbGFyZXM6IFtdLCBwYXJ0aWNsZXM6IFtdLCBzdXJmYWNlTm9pc2U6IFtdIH07IGZvcihsZXQgaT0wOyBpPDEwMDsgaSsrKSBzaW0uc3RhdGUuc3VyZmFjZU5vaXNlLnB1c2goeyB4OiBNYXRoLnJhbmRvbSgpKk1hdGguUEkqMiwgeTogTWF0aC5yYW5kb20oKSpNYXRoLlBJLCBzaXplOiBNYXRoLnJhbmRvbSgpKjUrMiwgYWxwaGE6IE1hdGgucmFuZG9tKCkqMC41KzAuMiB9KTsgdGhpcy5sb29wKHNpbSk7IH0sCiAgICAgICAgICAgICAgICBsb29wOiBmdW5jdGlvbihzaW0pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB7Y3R4LCB3aWR0aCwgaGVpZ2h0LCBzdGF0ZX0gPSBzaW07IGNvbnN0IGN4ID0gd2lkdGgvMiwgY3kgPSBoZWlnaHQvMiwgc3VuUmFkaXVzID0gMTAwOyBzdGF0ZS50ICs9IDAuMDU7IGN0eC5maWxsU3R5bGUgPSAnIzAwMDAwMCc7IGN0eC5maWxsUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBncmFkaWVudCA9IGN0eC5jcmVhdGVSYWRpYWxHcmFkaWVudChjeCwgY3ksIHN1blJhZGl1cywgY3gsIGN5LCBzdW5SYWRpdXMqMyk7IGdyYWRpZW50LmFkZENvbG9yU3RvcCgwLCAncmdiYSgyNTUsIDEwMCwgMCwgMC44KScpOyBncmFkaWVudC5hZGRDb2xvclN0b3AoMC4yLCAncmdiYSgyNTUsIDUwLCAwLCAwLjQpJyk7IGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCAncmdiYSgyNTUsIDAsIDAsIDApJyk7IGN0eC5maWxsU3R5bGUgPSBncmFkaWVudDsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKGN4LCBjeSwgc3VuUmFkaXVzKjMsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3VuR3JhZCA9IGN0eC5jcmVhdGVSYWRpYWxHcmFkaWVudChjeCwgY3ksIHN1blJhZGl1cyowLjIsIGN4LCBjeSwgc3VuUmFkaXVzKTsgc3VuR3JhZC5hZGRDb2xvclN0b3AoMCwgJyNGREI4MTMnKTsgc3VuR3JhZC5hZGRDb2xvclN0b3AoMC44LCAnI0ZGOEMwMCcpOyBzdW5HcmFkLmFkZENvbG9yU3RvcCgxLCAnI0ZGNDUwMCcpOyBjdHguZmlsbFN0eWxlID0gc3VuR3JhZDsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKGN4LCBjeSwgc3VuUmFkaXVzLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyhjeCwgY3ksIHN1blJhZGl1cywgMCwgTWF0aC5QSSoyKTsgY3R4LmNsaXAoKTsgc3RhdGUuc3VyZmFjZU5vaXNlLmZvckVhY2gobiA9PiB7IGNvbnN0IHB4ID0gY3grTWF0aC5jb3Mobi54K3N0YXRlLnQqMC4wMikqKG4ueS9NYXRoLlBJKSpzdW5SYWRpdXMsIHB5ID0gY3krTWF0aC5zaW4obi54K3N0YXRlLnQqMC4wMikqKG4ueS9NYXRoLlBJKSpzdW5SYWRpdXMqMC44OyBjdHguZmlsbFN0eWxlID0gYHJnYmEoMjU1LCAyMDAsIDAsICR7bi5hbHBoYX0pYDsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHB4LCBweSwgbi5zaXplLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyB9KTsgY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuMDIpIHN0YXRlLmZsYXJlcy5wdXNoKHsgYW5nbGU6IE1hdGgucmFuZG9tKCkqTWF0aC5QSSoyLCBsaWZlOiAwLCBtYXhMaWZlOiAxMDArTWF0aC5yYW5kb20oKSoxMDAsIHNjYWxlOiAwLjUrTWF0aC5yYW5kb20oKSoxLjUgfSk7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IHN0YXRlLmZsYXJlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZiA9IHN0YXRlLmZsYXJlc1tpXTsgZi5saWZlKys7IGNvbnN0IGdyb3d0aCA9IE1hdGguc2luKChmLmxpZmUvZi5tYXhMaWZlKSpNYXRoLlBJKSwgaCA9IDYwKmYuc2NhbGUqZ3Jvd3RoOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB4MSA9IGN4K01hdGguY29zKGYuYW5nbGUtMC4xKSpzdW5SYWRpdXMsIHkxID0gY3krTWF0aC5zaW4oZi5hbmdsZS0wLjEpKnN1blJhZGl1cywgeDIgPSBjeCtNYXRoLmNvcyhmLmFuZ2xlKzAuMSkqc3VuUmFkaXVzLCB5MiA9IGN5K01hdGguc2luKGYuYW5nbGUrMC4xKSpzdW5SYWRpdXM7CiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGByZ2JhKDI1NSwgMjAwLCAxMDAsICR7Z3Jvd3RofSlgOyBjdHgubGluZVdpZHRoID0gMypncm93dGg7IGN0eC5iZWdpblBhdGgoKTsgY3R4Lm1vdmVUbyh4MSwgeTEpOyBjdHgucXVhZHJhdGljQ3VydmVUbyhjeCtNYXRoLmNvcyhmLmFuZ2xlKSooc3VuUmFkaXVzK2gqMiksIGN5K01hdGguc2luKGYuYW5nbGUpKihzdW5SYWRpdXMraCoyKSwgeDIsIHkyKTsgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZi5saWZlL2YubWF4TGlmZSA+IDAuNCAmJiBmLmxpZmUvZi5tYXhMaWZlIDwgMC42ICYmIE1hdGgucmFuZG9tKCk8MC4zKSBzdGF0ZS5wYXJ0aWNsZXMucHVzaCh7IHg6IGN4K01hdGguY29zKGYuYW5nbGUpKihzdW5SYWRpdXMraCksIHk6IGN5K01hdGguc2luKGYuYW5nbGUpKihzdW5SYWRpdXMraCksIHZ4OiBNYXRoLmNvcyhmLmFuZ2xlKSooMitNYXRoLnJhbmRvbSgpKSwgdnk6IE1hdGguc2luKGYuYW5nbGUpKigyK01hdGgucmFuZG9tKCkpLCBsaWZlOiA2MCB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYubGlmZSA+PSBmLm1heExpZmUpIHN0YXRlLmZsYXJlcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBzdGF0ZS5wYXJ0aWNsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsgbGV0IHAgPSBzdGF0ZS5wYXJ0aWNsZXNbaV07IHAueCArPSBwLnZ4OyBwLnkgKz0gcC52eTsgcC5saWZlLS07IGN0eC5maWxsU3R5bGUgPSBgcmdiYSgyNTUsIDI1NSwgMjAwLCAke3AubGlmZS82MH0pYDsgY3R4LmJlZ2luUGF0aCgpOyBjdHguYXJjKHAueCwgcC55LCAyLCAwLCBNYXRoLlBJKjIpOyBjdHguZmlsbCgpOyBpZiAocC5saWZlIDw9IDApIHN0YXRlLnBhcnRpY2xlcy5zcGxpY2UoaSwgMSk7IH0KICAgICAgICAgICAgICAgICAgICBzaW0uYW5pbUlkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMubG9vcChzaW0pKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWlncmF0aW9uOiB7CiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbihzaW0pIHsgc2ltLnN0YXRlID0geyBiaXJkczogW10gfTsgZm9yKGxldCBpPTA7IGk8MjA7IGkrKykgc2ltLnN0YXRlLmJpcmRzLnB1c2goeyB4OiAtTWF0aC5yYW5kb20oKSoxMDAsIHk6IDUwK01hdGgucmFuZG9tKCkqMjAwLCBzcGVlZDogMitNYXRoLnJhbmRvbSgpLCBvZmZzZXQ6IE1hdGgucmFuZG9tKCkqMTAgfSk7IHRoaXMubG9vcChzaW0pOyB9LAogICAgICAgICAgICAgICAgbG9vcDogZnVuY3Rpb24oc2ltKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qge2N0eCwgd2lkdGgsIGhlaWdodCwgc3RhdGV9ID0gc2ltOyBjdHguZmlsbFN0eWxlID0gJyM4N0NFRUInOyBjdHguZmlsbFJlY3QoMCwwLHdpZHRoLGhlaWdodCk7IGN0eC5maWxsU3R5bGUgPSAnIzIyOEIyMic7IGN0eC5iZWdpblBhdGgoKTsgY3R4LmFyYyh3aWR0aC8yLCBoZWlnaHQrMjAwLCAzMDAsIDAsIE1hdGguUEkqMik7IGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IERhdGUubm93KCkvMTAwOyBzdGF0ZS5iaXJkcy5mb3JFYWNoKGIgPT4geyBiLnggKz0gYi5zcGVlZDsgaWYoYi54ID4gd2lkdGgrMjApIGIueCA9IC0yMDsgY3R4LnN0cm9rZVN0eWxlID0gJyMwMDAnOyBjdHgubGluZVdpZHRoID0gMjsgY3R4LmJlZ2luUGF0aCgpOyBjdHgubW92ZVRvKGIueC02LCBiLnkrTWF0aC5zaW4odCoyK2Iub2Zmc2V0KSo1KTsgY3R4LmxpbmVUbyhiLngsIGIueSk7IGN0eC5saW5lVG8oYi54KzYsIGIueStNYXRoLnNpbih0KjIrYi5vZmZzZXQpKjUpOyBjdHguc3Ryb2tlKCk7IH0pOwogICAgICAgICAgICAgICAgICAgIHNpbS5hbmltSWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5sb29wKHNpbSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkgeyBCb29rLmluaXQoKTsgfTsKICAgIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4="))));</script>